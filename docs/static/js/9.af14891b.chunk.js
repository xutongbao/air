(this.webpackJsonpair=this.webpackJsonpair||[]).push([[9],{114:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return m}));var n=a(0),i=a(14);function r(e){var t=e.name,a=e.className;return Object(i.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(a||""),onClick:e.onClick})}var c=a(308);var l=function(e){var t=e.dataSource,a=e.total,n=e.current,r=e.pageSize,l=e.getColumns;return Object(i.jsx)("div",{className:"m-content-table",children:Object(i.jsx)(c.a,{className:"m-my-table",columns:l(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,a){return e.onRowSelect(t,a)}},pagination:{current:n,total:a,pageSize:r,onChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showTotal:function(e){return Object(i.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(i.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var o=function(e){var t=e.dataSource,a=e.getColumns;return Object(i.jsx)("div",{className:"m-content-table",children:Object(i.jsx)(c.a,{className:"m-my-table",columns:a(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(i.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(i.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=a(113),d=a(119),u=a(195),h=a(311);function m(e){var t=e.value,a=void 0===t?{}:t,r=e.onChange,c=Object(n.useState)(!1),l=Object(d.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(),f=Object(d.a)(p,2),b=f[0],j=f[1],g=function(e){r(Object(s.a)(Object(s.a)({required:o,message:b},a),e))},O=!1,S="";return"boolean"===typeof a.required?(O=a.required,S=a.message):(O=o,S=b),Object(i.jsxs)("div",{children:[Object(i.jsx)(u.a,{checked:O,onChange:function(e){m(e.target.checked),g({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(i.jsx)(h.a,{className:"m-fields-required-input ".concat(O?"active":""),value:S,onChange:function(e){j(e.target.value),g({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}},117:function(e,t,a){"use strict";var n={light:{templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit"}},i=a(129),r=a.n(i),c=a(130),l=a(113),o=a(131),s=a.n(o),d=a(88),u="http://localhost:81";u="https://efficacious-tiny-infinity.glitch.me",s.a.defaults.baseURL=u,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(l.a)({},e.data):e.data=Object(l.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(d.b.warning(e.data.message),e.data):Promise.reject(e)}));var h=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={light:{templateSearch:function(e){return h({url:n.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return h({url:n.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return h({url:n.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return h({url:n.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return h({url:n.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return h({url:n.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return h({url:n.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return h({url:n.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return h({url:n.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return h({url:n.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return h({url:n.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return h({url:n.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return h({url:n.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return h({url:n.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return h({url:n.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return h({url:n.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return h({url:n.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return h({url:n.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return h({url:n.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return h({url:n.light.fieldsEdit,data:e,method:"post"})}}};t.a=m},128:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(117),i=function(e){return function(t){n.a.light.routerSearch().then((function(a){200===a.code&&(t({type:"SET_LIGHT_STATE",key:["router"],value:a.data}),e&&e())}))}}},315:function(e,t,a){"use strict";a.r(t);var n=a(113),i=a(0),r=a(62),c=a(6),l=a(196),o=a(194),s=a(312),d=a(309),u=a(127),h=a(311),m=a(14),p=a(114),f=a(119),b=a(117),j=a(128),g=s.a.confirm;t.default=Object(r.b)((function(e){return{router:e.getIn(["light","router"]).toJS()}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=function(e){var t=d.a.useForm(),a=Object(f.a)(t,1)[0],r=Object(i.useState)(!1),c=Object(f.a)(r,2),l=c[0],o=c[1],s=Object(i.useState)({}),u=Object(f.a)(s,2),h=u[0],m=u[1],p=Object(i.useState)("add"),O=Object(f.a)(p,2),S=O[0],x=O[1],v=Object(i.useState)(),y=Object(f.a)(v,2),T=y[0],E=y[1],C=e.router,N={},A=function(){e.onDispatch(Object(j.a)())};return Object(i.useEffect)((function(){A()}),[]),Object(i.useEffect)((function(){a.resetFields()}),[l,a]),{isModalVisible:l,initValues:h,type:S,form:a,modalTitle:T,handleDelete:function(t){console.log("\u5220\u9664, id:",t),g({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){b.a.light.routerDelete({ids:[t]}).then((function(t){200===t.code&&e.onDispatch(Object(j.a)())}))}})},handleAdd:function(){x("add"),E("\u6dfb\u52a0\u5e94\u7528"),m(N),console.log(N),o(!0)},handleEdit:function(e){var t=C.find((function(t){return t.id===e}));console.log("\u7f16\u8f91, id:",t),x("edit"),E("\u4fee\u6539\u540d\u79f0"),m(Object(n.a)(Object(n.a)({},h),t)),o(!0)},setIsModalVisible:o,handleFinish:function(e){console.log("Success:",e),"add"===S?(e.path="/light/index/content",b.a.light.routerAdd({dataItem:e}).then((function(e){200===e.code&&(o(!1),A())}))):"edit"===S&&b.a.light.routerEdit({id:h.id,dataItem:Object(n.a)(Object(n.a)({},h),e)}).then((function(e){200===e.code&&(o(!1),A())}))},handleFinishFailed:function(e){console.log("Failed:",e)},handleJumpToSet:function(t){e.history.push("/light/admin/setApplication?id=".concat(t))}}}(e),a=t.isModalVisible,r=t.initValues,c=t.type,O=t.form,S=t.modalTitle,x=t.handleDelete,v=t.handleAdd,y=t.handleEdit,T=t.setIsModalVisible,E=t.handleFinish,C=t.handleFinishFailed,N=t.handleJumpToSet,A=e.router;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"m-admin-content home",children:[Object(m.jsxs)("div",{className:"m-admin-row",children:[Object(m.jsx)("div",{className:"m-adimn-row-title",children:"\u81ea\u5b9a\u4e49\u5e94\u7528"}),Object(m.jsxs)("div",{className:"m-app-wrap",children:[A.map((function(e){return Object(m.jsxs)("div",{className:"m-app-item",onClick:function(){return N(e.id)},children:[Object(m.jsx)(l.a,{overlay:Object(m.jsxs)(o.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(m.jsx)(o.a.Item,{onClick:function(){return y(e.id)},children:"\u4fee\u6539\u540d\u79f0"},"0"),Object(m.jsx)(o.a.Item,{onClick:function(){return x(e.id)},children:"\u5220\u9664\u5e94\u7528"},"1")]}),children:Object(m.jsx)("span",{className:"m-app-item-icon",children:Object(m.jsx)(p.b,{name:"more"})})}),e.title]},e.id)})),Object(m.jsxs)("div",{className:"m-app-item",onClick:v,children:[Object(m.jsx)(p.b,{name:"add",className:"m-application-icon"}),"\u521b\u5efa\u65b0\u5e94\u7528"]})]})]}),Object(m.jsx)(s.a,{title:S,visible:a,onCancel:function(){return T(!1)},footer:null,forceRender:!0,children:Object(m.jsxs)(d.a,{form:O,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(n.a)({},r),onFinish:E,onFinishFailed:C,children:[Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(d.a.Item,{label:"\u5e94\u7528\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0\uff01"}],children:Object(m.jsx)(h.a,{})})}),Object(m.jsxs)(d.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===c||"edit"===c)&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(u.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(m.jsx)(p.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(m.jsxs)(u.a,{className:"m-space",onClick:function(){O.resetFields()},children:[Object(m.jsx)(p.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(m.jsx)(u.a,{className:"m-space",onClick:function(){return T(!1)},children:"\u53d6\u6d88"})]})]})})]})})})))}}]);
//# sourceMappingURL=9.af14891b.chunk.js.map