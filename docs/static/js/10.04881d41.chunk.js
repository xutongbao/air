(this.webpackJsonpair=this.webpackJsonpair||[]).push([[10],{118:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return j}));var a=n(0),c=n(14);function o(e){var t=e.name,n=e.className;return Object(c.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(n||""),onClick:e.onClick})}var i=n(308);var l=function(e){var t=e.dataSource,n=e.total,a=e.current,o=e.pageSize,l=e.getColumns;return Object(c.jsx)("div",{className:"m-content-table",children:Object(c.jsx)(i.a,{className:"m-my-table",columns:l(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,n){return e.onRowSelect(t,n)}},pagination:{current:a,total:n,pageSize:o,onChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showTotal:function(e){return Object(c.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(c.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var r=function(e){var t=e.dataSource,n=e.getColumns;return Object(c.jsx)("div",{className:"m-content-table",children:Object(c.jsx)(i.a,{className:"m-my-table",columns:n(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(c.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(c.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=n(115),d=n(119),u=n(195),b=n(311);function m(e){var t=e.value,n=void 0===t?{}:t,o=e.onChange,i=Object(a.useState)(!1),l=Object(d.a)(i,2),r=l[0],m=l[1],j=Object(a.useState)(),f=Object(d.a)(j,2),h=f[0],O=f[1],g=function(e){o(Object(s.a)(Object(s.a)({required:r,message:h},n),e))},p=!1,S="";return"boolean"===typeof n.required?(p=n.required,S=n.message):(p=r,S=h),Object(c.jsxs)("div",{children:[Object(c.jsx)(u.a,{checked:p,onChange:function(e){m(e.target.checked),g({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(c.jsx)(b.a,{className:"m-fields-required-input ".concat(p?"active":""),value:S,onChange:function(e){O(e.target.value),g({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}function j(e){var t=e.value,n=e.onChange,o=e.children,i=Object(a.useState)(!1),l=Object(d.a)(i,2),r=l[0],s=l[1],b=!1;return b="boolean"===typeof t?t:r,Object(c.jsx)(u.a,{checked:b,onChange:function(e){s(e.target.checked),n(e.target.checked)},children:o})}},295:function(e,t,n){"use strict";n.r(t);var a=n(115),c=n(0),o=n(63),i=n(6),l=n(312),r=n(309),s=n(127),d=n(118),u=n(14);var b=function(e){var t=e.onAdd;return Object(u.jsx)("div",{className:"m-content-tool",children:Object(u.jsx)("div",{className:"m-content-tool-row",children:Object(u.jsxs)(s.a,{className:"m-space",type:"primary",onClick:t,children:[Object(u.jsx)(d.b,{name:"add",className:"m-tool-btn-icon"}),"\u6dfb\u52a0"]})})})},m=n(189);var j=n(188);function f(e){return function(e){if(Array.isArray(e))return Object(m.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(j.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(190).a;var h=n(311),O=function(e){return[].concat(f(e.columns),[{title:"\u64cd\u4f5c",width:220,render:function(t){return Object(u.jsxs)("div",{className:"m-action",children:[Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",danger:!0,onClick:function(){return e.onDelete(t)},children:"\u5220\u9664"}),Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onCheck(t)},children:"\u67e5\u770b"}),Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onEdit(t)},children:"\u7f16\u8f91"})]})}}])},g=n(119),p=n(123),S=n(124),v=l.a.confirm;function x(e){var t=Object(c.useState)(),n=Object(g.a)(t,2),o=n[0],i=n[1],l=Object(c.useState)(1),s=Object(g.a)(l,2),d=s[0],b=s[1],m=Object(c.useState)({columns:[],dataSource:[],pageSize:10}),j=Object(g.a)(m,2),f=j[0],O=j[1],x=r.a.useForm(),C=Object(g.a)(x,1)[0],k=Object(c.useState)(!1),N=Object(g.a)(k,2),y=N[0],F=N[1],w=Object(c.useState)({}),z=Object(g.a)(w,2),I=z[0],T=z[1],E=Object(c.useState)("add"),A=Object(g.a)(E,2),M=A[0],R=A[1],V=Object(c.useState)(),D=Object(g.a)(V,2),q=D[0],J=D[1],K=Object(c.useState)([]),P=Object(g.a)(K,2),_=P[0],G=P[1],H={getColumns:function(e){return e.filter((function(e){return e.isColumn})).map((function(e){return{title:e.title,dataIndex:e.dataIndex,render:function(t,n){var a=Object(S.b)().find((function(t){return t.renderFunName===e.renderFunName}));return a?a.render(t,n):t}}}))},getModalFields:function(e){return e.map((function(e){if(e.isModalField){var t=Object(S.a)().find((function(t){return t.formComponentName===e.formComponentName}));return Object(u.jsx)(r.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,children:t?t.component:Object(u.jsx)(h.a,{})},e.id)}}))}},L=H.getColumns,B=H.getModalFields,Q=Object(S.c)(e),U=Q.id-0,W={},X=f.pageSize,Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,a=e.pageSize,c=void 0===a?X:a,o=e.searchParams,l=void 0===o?{}:o;p.a.light.tableSearch({tableId:U,page:n,pageSize:c,searchParams:l}).then((function(e){200===e.code&&(O({columns:L(e.data.fields),dataSource:e.data.list,pageSize:e.data.pageSize}),G(B(e.data.fields)),i(e.data.total),b(e.data.current))}))};return Object(c.useEffect)((function(){console.log(Q.id),Y({page:d,pageSize:f.pageSize})}),[Q.id]),Object(c.useEffect)((function(){C.resetFields()}),[y]),{dataSource:f.dataSource,total:o,current:d,pageSize:f.pageSize,columns:f.columns,isModalVisible:y,initValues:I,type:M,form:C,modalTitle:q,modalFields:_,handleSearch:Y,handleDelete:function(e){console.log("\u5220\u9664, id:",e.id),v({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){p.a.light.tableDelete({tableId:U,ids:[e.id]}).then((function(e){200===e.code&&Y()}))}})},handleAdd:function(){R("add"),T(W),J("\u6dfb\u52a0"),F(!0)},handleEdit:function(e){console.log("\u7f16\u8f91, id:",e),R("edit"),T(Object(a.a)(Object(a.a)({},I),e)),J("\u7f16\u8f91"),F(!0)},handleCheck:function(e){R("check"),T(Object(a.a)(Object(a.a)({},I),e)),J("\u67e5\u770b"),F(!0)},setIsModalVisible:F,handleFinish:function(e){console.log("Success:",e),"add"===M?p.a.light.tableAdd({tableId:U,dataItem:e}).then((function(e){200===e.code&&(F(!1),Y())})):"edit"===M&&p.a.light.tableEdit({tableId:U,id:I.id,dataItem:Object(a.a)(Object(a.a)({},I),e)}).then((function(e){200===e.code&&(F(!1),Y())}))},handleFinishFailed:function(e){console.log("Failed:",e)}}}var C=n(88),k=l.a.confirm;t.default=Object(o.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=x(e),n=t.dataSource,o=t.total,i=t.current,m=t.pageSize,j=t.columns,f=t.isModalVisible,h=t.initValues,p=t.type,S=t.form,v=t.modalTitle,N=t.modalFields,y=t.handleSearch,F=t.handleDelete,w=t.handleAdd,z=t.handleEdit,I=t.handleCheck,T=t.setIsModalVisible,E=t.handleFinish,A=t.handleFinishFailed,M=function(){var e=Object(c.useState)([]),t=Object(g.a)(e,2),n=t[0],a=t[1];return{handleRowSelect:function(e,t){console.log(e,t),a(e)},handleOperate:function(e){var t=e.type;0===n.length?C.b.warning("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879"):0===t?k({title:"\u786e\u8ba4\u8981\u6279\u91cf\u63d0\u4ea4\u767e\u5ea6\u5ba1\u6838\u5417?",onOk:function(){console.log(n)}}):1===t?k({title:"\u786e\u8ba4\u6279\u91cf\u66f4\u65b0\u6570\u636e\u5230\u767e\u5ea6\u5417?",onOk:function(){console.log(n)}}):2===t?k({title:"\u786e\u8ba4\u8981\u6279\u91cf\u67e5\u770b\u5ba1\u6838\u5417?",onOk:function(){console.log(n)}}):3===t?k({title:"\u786e\u8ba4\u8981\u6279\u91cf\u63d0\u4ea4\u767e\u5ea6\u5ba1\u6838\u5417?",onOk:function(){console.log(n)}}):4===t?k({title:"\u786e\u8ba4\u66f4\u65b0\u6570\u636e\u5230\u767e\u5ea6\u5417?",onOk:function(){console.log(n)}}):5===t?k({title:"\u786e\u8ba4\u8981\u67e5\u770b\u767e\u5ea6\u5ba1\u6838\u5417?",onOk:function(){console.log(n)}}):6===t&&k({title:"\u786e\u8ba4\u8981\u6279\u91cf\u7ed1\u5b9a\u5230\u5e97\u94fa\u5417?",onOk:function(){console.log(n)}})}}}().handleRowSelect;return Object(u.jsxs)("div",{className:"m-admin-content",children:[Object(u.jsx)(b,{onAdd:w}),Object(u.jsx)(d.d,{dataSource:n,total:o,current:i,pageSize:m,columns:j,onSearch:y,onDelete:F,onEdit:z,onCheck:I,onRowSelect:M,getColumns:O}),Object(u.jsx)(l.a,{title:v,visible:f,onCancel:function(){return T(!1)},footer:null,forceRender:!0,children:Object(u.jsxs)(r.a,{form:S,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(a.a)({},h),onFinish:E,onFinishFailed:A,children:[N,Object(u.jsxs)(r.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===p||"edit"===p)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(s.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(u.jsx)(d.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(u.jsxs)(s.a,{className:"m-space",onClick:function(){S.resetFields()},children:[Object(u.jsx)(d.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(u.jsx)(s.a,{className:"m-space",onClick:function(){return T(!1)},children:"\u53d6\u6d88"})]})]})})]})})))}}]);
//# sourceMappingURL=10.04881d41.chunk.js.map