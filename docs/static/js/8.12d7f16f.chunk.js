(this.webpackJsonpair=this.webpackJsonpair||[]).push([[8],{115:function(e,t,a){"use strict";a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p}));var n=a(114),r=(a(64),a(326)),i=a(323),c=a(130),o=a.n(c),l=a(9),s=r.a.TextArea,d=function(e){return function(e){var t={},a=e.split("?");if(a.length<=1)return t;for(var n=0,r=(a=a[1].split("&")).length;n<r;n++){var i=a[n].split("=");t[i[0]]=i[1]}return t}(e.location.search)},u=function(e){var t=/http(s)?:\/\/([A-Za-z0123456789:.-]+)\/\S+/.exec(e);if(t)return"http://"+t[2]},m=function(){return[{id:1,title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",component:Object(l.jsx)(r.a,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(r.a,Object(n.a)({},t))}},{id:2,title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",component:Object(l.jsx)(s,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(s,Object(n.a)({},t))}},{id:3,title:"\u6570\u5b57",formComponentName:"InputNumber",component:Object(l.jsx)(i.a,{style:{width:"100%"}}),getComponent:function(e){var t=e.props;return Object(l.jsx)(i.a,Object(n.a)({style:{width:"100%"}},t))}},{id:4,title:"\u56fe\u7247",formComponentName:"Image",component:Object(l.jsx)("img",{style:{width:"100%"},alt:"\u56fe\u7247"}),getComponent:function(e){var t=e.props;return Object(l.jsx)("img",Object(n.a)(Object(n.a)({style:{width:"100%"}},t),{},{alt:"\u56fe\u7247"}))}}]},p=function(){return[{id:1,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input","TextArea"],render:function(e){return Object(l.jsx)("span",{children:e})}},{id:2,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(l.jsx)("span",{children:e?o()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{id:3,title:"\u56fe\u7247",renderFunName:"renderImage",formComponentNameArr:["Image"],render:function(e){return Object(l.jsx)("img",{alt:"\u56fe\u7247",src:e})}}]}},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="http://localhost:81";n="http://39.97.238.175:81"},118:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return O}));var n=a(0),r=a(9);function i(e){var t=e.name,a=e.className,n=e.title;return Object(r.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(a||""),title:n,onClick:e.onClick})}var c=a(320);var o=function(e){var t=e.dataSource,a=e.total,n=e.current,i=e.pageSize,o=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:o(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,a){return e.onRowSelect(t,a)}},pagination:{current:n,total:a,pageSize:i,onChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var l=function(e){var t=e.dataSource,a=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:a(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=a(114),d=a(120),u=a(201),m=a(326);function p(e){var t=e.value,a=void 0===t?{}:t,i=e.onChange,c=Object(n.useState)(!1),o=Object(d.a)(c,2),l=o[0],p=o[1],f=Object(n.useState)(),h=Object(d.a)(f,2),b=h[0],j=h[1],v=function(e){i(Object(s.a)(Object(s.a)({required:l,message:b},a),e))},O=!1,g="";return a&&"boolean"===typeof a.required?(O=a.required,g=a.message):(O=l,g=b),Object(r.jsxs)("div",{children:[Object(r.jsx)(u.a,{checked:O,onChange:function(e){p(e.target.checked),v({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(r.jsx)(m.a,{className:"m-fields-required-input ".concat(O?"active":""),value:g,onChange:function(e){j(e.target.value),v({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}var f=a(89),h=a(321),b=a(131),j=a(119),v=a(115);function O(e){var t=e.value,a=void 0===t?"":t,n=e.msg,i=e.onChange,c=e.accept,o=void 0===c?".jpg":c,l={uid:"-1",name:a,status:"done",url:a},d=[];a&&d.push(l);var u={name:"file",action:j.a.light.testUpload,maxCount:1,listType:"picture",defaultFileList:[].concat(d),accept:o,onChange:function(e){if("done"===e.file.status){if(f.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),1===e.file.response.state){var t=Object(v.b)("https://efficacious-tiny-infinity.glitch.me/api/upload");console.log(t);var a="".concat(Object(v.b)(e.file.xhr.responseURL),"/").concat(e.file.response.data.filename);console.log(a),i(a)}}else"error"===e.file.status&&f.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return Object(r.jsx)("span",{children:Object(r.jsxs)(h.a,Object(s.a)(Object(s.a)({},u),{},{children:[Object(r.jsx)(b.a,{children:"\u4e0a\u4f20\u56fe\u7247"}),Object(r.jsx)("span",{className:"m-upload-text",children:n})]}))})}},119:function(e,t,a){"use strict";var n={light:{testUpload:a(117).a+"/api/upload",templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit",fieldsEditAll:"/api/fields/editAll"}};t.a=n},121:function(e,t,a){"use strict";var n=a(119),r=a(133),i=a.n(r),c=a(134),o=a(114),l=a(135),s=a.n(l),d=a(89),u=a(117);s.a.defaults.baseURL=u.a,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(o.a)({},e.data):e.data=Object(o.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(d.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(c.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={light:{templateSearch:function(e){return m({url:n.a.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:n.a.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:n.a.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:n.a.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:n.a.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:n.a.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:n.a.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:n.a.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:n.a.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:n.a.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:n.a.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:n.a.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:n.a.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:n.a.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:n.a.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:n.a.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:n.a.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:n.a.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:n.a.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:n.a.light.fieldsEdit,data:e,method:"post"})},fieldsEditAll:function(e){return m({url:n.a.light.fieldsEditAll,data:e,method:"post"})}}};t.a=p},303:function(e,t,a){"use strict";var n=a(198);t.a=n.a},308:function(e,t,a){"use strict";var n,r=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"===typeof e&&c.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!o(a))throw TypeError("Stringified UUID is invalid");return a};t.a=function(e,t,a){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var r=0;r<16;++r)t[a+r]=n[r];return t}return d(n)}},324:function(e,t,a){"use strict";a.r(t);var n=a(114),r=a(0),i=a(62),c=a(6),o=a(2),l=a(4),s=a(3),d=a(10),u=a(13),m=a(16),p=a(17),f=a(8),h=a(12),b=a.n(h),j=a(139),v=a.n(j),O=a(61),g=a(60),x=a(5),y=r.forwardRef((function(e,t){var a,n=e.prefixCls,i=e.forceRender,c=e.className,o=e.style,s=e.children,d=e.isActive,u=e.role,m=r.useState(d||i),p=Object(x.a)(m,2),f=p[0],h=p[1];return r.useEffect((function(){(i||d)&&h(!0)}),[i,d]),f?r.createElement("div",{ref:t,className:b()("".concat(n,"-content"),(a={},Object(l.a)(a,"".concat(n,"-content-active"),d),Object(l.a)(a,"".concat(n,"-content-inactive"),!d),a),c),style:o,role:u},r.createElement("div",{className:"".concat(n,"-content-box")},s)):null}));y.displayName="PanelContent";var C=y,N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.apply(this,arguments)).handleItemClick=function(){var t=e.props,a=t.onItemClick,n=t.panelKey;"function"===typeof a&&a(n)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.handleItemClick()},e}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e){return!v()(this.props,e)}},{key:"render",value:function(){var e,t,a=this,n=this.props,i=n.className,c=n.id,s=n.style,d=n.prefixCls,u=n.header,m=n.headerClass,p=n.children,f=n.isActive,h=n.showArrow,j=n.destroyInactivePanel,v=n.accordion,O=n.forceRender,x=n.openMotion,y=n.expandIcon,N=n.extra,I=n.collapsible,S="disabled"===I,A=b()("".concat(d,"-header"),(e={},Object(l.a)(e,m,m),Object(l.a)(e,"".concat(d,"-header-collapsible-only"),"header"===I),e)),w=b()((t={},Object(l.a)(t,"".concat(d,"-item"),!0),Object(l.a)(t,"".concat(d,"-item-active"),f),Object(l.a)(t,"".concat(d,"-item-disabled"),S),t),i),E=r.createElement("i",{className:"arrow"});return h&&"function"===typeof y&&(E=y(this.props)),r.createElement("div",{className:w,style:s,id:c},r.createElement("div",{className:A,onClick:function(){return"header"!==I&&a.handleItemClick()},role:v?"tab":"button",tabIndex:S?-1:0,"aria-expanded":f,onKeyPress:this.handleKeyPress},h&&E,"header"===I?r.createElement("span",{onClick:this.handleItemClick,className:"".concat(d,"-header-text")},u):u,N&&r.createElement("div",{className:"".concat(d,"-extra")},N)),r.createElement(g.b,Object(o.a)({visible:f,leavedClassName:"".concat(d,"-content-hidden")},x,{forceRender:O,removeOnLeave:j}),(function(e,t){var a=e.className,n=e.style;return r.createElement(C,{ref:t,prefixCls:d,className:a,style:n,isActive:f,forceRender:O,role:v?"tabpanel":null},p)})))}}]),a}(r.Component);N.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var I=N;function S(e){var t=e;if(!Array.isArray(t)){var a=Object(f.a)(t);t="number"===a||"string"===a?[t]:[]}return t.map((function(e){return String(e)}))}var A=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).onClickItem=function(e){var t=n.state.activeKey;if(n.props.accordion)t=t[0]===e?[]:[e];else{var a=(t=Object(s.a)(t)).indexOf(e);a>-1?t.splice(a,1):t.push(e)}n.setActiveKey(t)},n.getNewChild=function(e,t){if(!e)return null;var a=n.state.activeKey,i=n.props,c=i.prefixCls,o=i.openMotion,l=i.accordion,s=i.destroyInactivePanel,d=i.expandIcon,u=i.collapsible,m=e.key||String(t),p=e.props,f=p.header,h=p.headerClass,b=p.destroyInactivePanel,j=p.collapsible,v=null!==j&&void 0!==j?j:u,O={key:m,panelKey:m,header:f,headerClass:h,isActive:l?a[0]===m:a.indexOf(m)>-1,prefixCls:c,destroyInactivePanel:null!==b&&void 0!==b?b:s,openMotion:o,accordion:l,children:e.props.children,onItemClick:"disabled"===v?null:n.onClickItem,expandIcon:d,collapsible:v};return"string"===typeof e.type?e:r.cloneElement(e,O)},n.getItems=function(){var e=n.props.children;return Object(O.a)(e).map(n.getNewChild)},n.setActiveKey=function(e){"activeKey"in n.props||n.setState({activeKey:e}),n.props.onChange(n.props.accordion?e[0]:e)};var i=e.activeKey,c=e.defaultActiveKey;return"activeKey"in e&&(c=i),n.state={activeKey:S(c)},n}return Object(u.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return!v()(this.props,e)||!v()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,i=t.style,c=t.accordion,o=b()((e={},Object(l.a)(e,a,!0),Object(l.a)(e,n,!!n),e));return r.createElement("div",{className:o,style:i,role:c?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=S(e.activeKey)),t}}]),a}(r.Component);A.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},A.Panel=I;var w=A,E=(A.Panel,a(155)),k=a(116),F=a(28),P=a(58),T=function(e){Object(P.a)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var t=r.useContext(F.b).getPrefixCls,a=e.prefixCls,n=e.className,i=void 0===n?"":n,c=e.showArrow,s=void 0===c||c,d=t("collapse",a),u=b()(Object(l.a)({},"".concat(d,"-no-arrow"),!s),i);return r.createElement(w.Panel,Object(o.a)({},e,{prefixCls:d,className:u}))},D=a(128),H=a(122),R=function(e){var t,a=r.useContext(F.b),n=a.getPrefixCls,i=a.direction,c=e.prefixCls,s=e.className,d=void 0===s?"":s,u=e.bordered,m=void 0===u||u,p=e.ghost,f=n("collapse",c),h=function(){var t=e.expandIconPosition;return void 0!==t?t:"rtl"===i?"right":"left"}(),j=b()((t={},Object(l.a)(t,"".concat(f,"-borderless"),!m),Object(l.a)(t,"".concat(f,"-icon-position-").concat(h),!0),Object(l.a)(t,"".concat(f,"-rtl"),"rtl"===i),Object(l.a)(t,"".concat(f,"-ghost"),!!p),t),d),v=Object(o.a)(Object(o.a)({},D.a),{motionAppear:!1,leavedClassName:"".concat(f,"-content-hidden")});return r.createElement(w,Object(o.a)({openMotion:v},e,{bordered:m,expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.expandIcon,n=a?a(t):r.createElement(E.a,{rotate:t.isActive?90:void 0});return Object(H.a)(n,(function(){return{className:b()(n.props.className,"".concat(f,"-arrow"))}}))},prefixCls:f,className:j}),function(){var t=e.children;return Object(O.a)(t).map((function(e,t){var a;if(null===(a=e.props)||void 0===a?void 0:a.disabled){var n=e.key||String(t),r=e.props,i=r.disabled,c=r.collapsible,l=Object(o.a)(Object(o.a)({},Object(k.a)(e.props,["disabled"])),{key:n,collapsible:null!==c&&void 0!==c?c:i?"disabled":void 0});return Object(H.a)(e,l)}return e}))}())};R.Panel=T;var K=R,V=a(314).a,M=a(303),z=a(322),U=a(326),q=a(131),L=a(49),Y=a(118),G=a(9);var _=Object(c.g)((function(e){var t=e.applicationTitle,a=e.tableId,n=e.onSave;return Object(G.jsxs)("div",{className:"m-design-header",children:[Object(G.jsxs)("div",{className:"m-design-header-title",children:[Object(G.jsx)(Y.b,{name:"goback",title:"\u8fd4\u56de",className:"m-set-application-header-icon",onClick:function(){return e.history.go(-1)}}),Object(G.jsx)("span",{title:t,children:t})]}),Object(G.jsx)("div",{className:"m-design-header-middle"}),Object(G.jsxs)("div",{className:"m-design-header-action",children:[Object(G.jsx)(q.a,{type:"primary",onClick:n,children:"\u4fdd\u5b58"}),Object(G.jsx)(L.b,{to:"/light/formview?id=".concat(a),target:"_blank",style:{display:"inherit"},children:Object(G.jsx)(q.a,{children:"\u9884\u89c8"})})]})]})})),J=a(142),Z=a(120),$=a(121),B=a(327),Q=a(89),W=a(115),X=a(308),ee=function(e){var t=e.initValuesForAttr;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(z.a.Item,{label:"\u5b57\u6bb5\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(G.jsx)(U.a,{})}),t.isHasPlaceHolder&&Object(G.jsx)(z.a.Item,{label:"placeholder",name:"placeholder",children:Object(G.jsx)(U.a,{})}),Object(G.jsx)(z.a.Item,{label:"\u82f1\u6587\u540d\u79f0",name:"dataIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(G.jsx)(U.a,{})}),t.isHasRules&&Object(G.jsx)(z.a.Item,{label:"\u5b57\u6bb5\u5fc5\u586b",name:"rules",children:Object(G.jsx)(Y.a,{})}),"image"===t.type&&Object(G.jsx)(z.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247",name:"src",children:Object(G.jsx)(Y.e,{})})]})},te=B.a.confirm,ae=[];function ne(e){var t=z.a.useForm(),a=Object(Z.a)(t,1)[0],i=z.a.useForm(),c=Object(Z.a)(i,1)[0],o=Object(r.useState)([]),l=Object(Z.a)(o,2),s=l[0],d=l[1],u=Object(r.useState)(),m=Object(Z.a)(u,2),p=m[0],f=m[1],h=Object(r.useState)(),b=Object(Z.a)(h,2),j=b[0],v=b[1],O=Object(r.useState)({}),g=Object(Z.a)(O,2),x=g[0],y=g[1],C=Object(W.d)(e).id,N=function(){$.a.light.fieldsSearch({tableId:C}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));d(t),f(e.data.title),Array.isArray(t)&&t.length>0&&I({id:t[0].id,myDataSource:t})}}))},I=function(e){var t=e.id,a=e.myDataSource,r=void 0===a?s:a;v(t);var i=r.find((function(e){return e.id===t})),c=Array.isArray(i.rules)&&i.rules.length>0?i.rules[0]:{message:"".concat(i.title,"\u4e0d\u80fd\u4e3a\u7a7a")};y(Object(n.a)(Object(n.a)({},i),{},{rules:c}))};return Object(r.useEffect)((function(){c.resetFields()}),[x]),Object(r.useEffect)((function(){N()}),[]),Object(r.useEffect)((function(){ae=s}),[s]),{form:a,formForAttr:c,initValuesForAttr:x,dataSource:s,applicationTitle:p,addInitValues:{},tableId:C,cardActiveId:j,handleSearch:N,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),te({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=s.filter((function(e){return e.id!==t.id}));d(e),Array.isArray(e)&&e.length>0?t.id===j&&I({id:e[0].id,myDataSource:e}):v(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,a=ae.map((function(e){return e.orderIndex})),r=Math.max.apply(Math,a)+1,i=Object(X.a)(),c={id:i,dataIndex:"".concat(t.dataIndex,"-").concat(i),isColumn:!0,isModalField:!0,orderIndex:r};console.log(Object(n.a)(Object(n.a)({},t),c)),console.log(ae);var o=[].concat(Object(J.a)(ae),[Object(n.a)(Object(n.a)({},t),c)]);d(o),Array.isArray(o)&&o.length>0&&I({id:i,myDataSource:o})},handleSave:function(){console.log(s);var e=s.map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{orderIndex:t+1})}));console.log(e),$.a.light.fieldsEditAll({tableId:C,dataItem:e}).then((function(e){200===e.code&&Q.b.success(e.message)}))},handleCardActiveId:I,handleValuesChange:function(e,t){var a=c.getFieldsValue();console.log(a);var r=s.findIndex((function(e){return e.id===j})),i={rules:[t.rules],props:{placeholder:t.placeholder}};s[r]=Object(n.a)(Object(n.a)(Object(n.a)({},s[r]),t),i),d(Object(J.a)(s))},handleGetChildPayload:function(e){var t=e.type,a=e.index;if("tool"===t){var r=Object(X.a)(),i=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png"}],c=ae.map((function(e){return e.orderIndex})),o=Math.max.apply(Math,c)+1,l=i[a],d={id:r,dataIndex:"".concat(l.dataIndex,"-").concat(r),isColumn:!0,isModalField:!0,orderIndex:o};return Object(n.a)(Object(n.a)({},l),d)}if("content"===t)return s[a]},handleCardDrop:function(e){var t=e.type,a=e.dragResult;if("tool"===t);else if("content"===t){var n=function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return e;var i=Object(J.a)(e),c=r;return null!==a&&(c=i.splice(a,1)[0]),null!==n&&i.splice(n,0,c),i}(s,a);d(n),Array.isArray(n)&&n.length>0&&I({id:a.payload.id,myDataSource:n})}}}}var re=a(166),ie=K.Panel;t.default=Object(i.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=ne(e),a=t.applicationTitle,r=t.dataSource,i=t.form,c=t.formForAttr,o=t.initValues,l=t.initValuesForAttr,s=t.tableId,d=t.cardActiveId,u=t.handleFinish,m=t.handleFinishFailed,p=t.handleAdd,f=t.handleSave,h=t.handleCardActiveId,b=t.handleValuesChange,j=t.handleDelete,v=t.handleGetChildPayload,O=t.handleCardDrop;return Object(G.jsxs)("div",{className:"m-admin-content",children:[Object(G.jsx)(_,{applicationTitle:a,tableId:s,onSave:f}),Object(G.jsxs)("div",{className:"m-design-wrap",children:[Object(G.jsx)("div",{className:"m-design-sidebar",children:Object(G.jsxs)(K,{defaultActiveKey:["1","2","3"],children:[Object(G.jsx)(ie,{header:"\u901a\u7528\u5b57\u6bb5",children:Object(G.jsx)("div",{className:"m-design-sidebar-container",children:Object(G.jsx)(re.Container,{orientation:"horizontal",onDrop:function(e){return O({type:"tool",dragResult:e})},getChildPayload:function(e){return v({type:"tool",index:e})},behaviour:"copy",groupName:"col",children:[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png"}].map((function(e){return Object(G.jsx)(re.Draggable,{children:Object(G.jsxs)("div",{className:"m-component-item",onClick:function(){return p({fieldInfo:e})},children:[Object(G.jsx)("div",{children:Object(G.jsx)(Y.b,{name:e.icon})}),Object(G.jsx)("div",{children:e.title})]})},e.id)}))})})},"1"),Object(G.jsx)(ie,{header:"\u8054\u7cfb\u4fe1\u606f\u5b57\u6bb5",children:Object(G.jsx)(V,{gutter:[2,2],children:Object(G.jsx)(M.a,{span:8,children:Object(G.jsxs)("div",{className:"m-component-item",children:[Object(G.jsx)("div",{}),Object(G.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"2"),Object(G.jsx)(ie,{header:"\u5546\u54c1\u5b57\u6bb5",children:Object(G.jsx)(V,{gutter:[2,2],children:Object(G.jsx)(M.a,{span:8,children:Object(G.jsxs)("div",{className:"m-component-item",children:[Object(G.jsx)("div",{}),Object(G.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"3")]})}),Object(G.jsx)("div",{className:"m-design-content",children:Object(G.jsxs)(z.a,{form:i,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(n.a)({},o),onFinish:u,onFinishFailed:m,children:[Object(G.jsx)("div",{className:"m-design-card-wrap",children:Object(G.jsx)(re.Container,{orientation:"vertical",onDrop:function(e){return O({type:"content",dragResult:e})},getChildPayload:function(e){return v({type:"content",index:e})},groupName:"col",children:r.map((function(e){var t=Object(W.a)().find((function(t){return t.formComponentName===e.formComponentName}));return Object(G.jsx)(re.Draggable,{children:Object(G.jsxs)("div",{className:"m-design-card ".concat(d===e.id?"active":""),onClick:function(){return h({id:e.id})},children:[Object(G.jsxs)("div",{className:"m-design-card-info",children:["formItem"===e.type&&Object(G.jsx)(z.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,children:t?t.getComponent({props:e.props}):Object(G.jsx)(U.a,{})},e.id),"image"===e.type&&Object(G.jsx)(z.a.Item,{name:e.dataIndex,wrapperCol:24,children:t?t.getComponent({props:{src:e.src}}):Object(G.jsx)(U.a,{})},e.id)]}),Object(G.jsx)("div",{className:"m-design-card-action ".concat(d===e.id?"active":""),children:Object(G.jsx)(Y.b,{name:"delete",className:"m-design-card-delete",onClick:function(t){return j(t,e)}})})]})},e.id)}))})}),Object(G.jsxs)(z.a.Item,{wrapperCol:{offset:4,span:17},className:"m-design-footer",children:[Object(G.jsxs)(q.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(G.jsx)(Y.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(G.jsxs)(q.a,{className:"m-space",onClick:function(){i.resetFields()},children:[Object(G.jsx)(Y.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]})]})}),Object(G.jsx)("div",{className:"m-design-attr",children:Object(G.jsx)(z.a,{form:c,labelCol:{span:8},wrapperCol:{span:15},initialValues:Object(n.a)({},l),scrollToFirstError:!0,onValuesChange:b,onFinish:u,id:"m-set-application-modal-form",className:"m-set-application-modal-form",children:d?ee({initValuesForAttr:l}):Object(G.jsx)("div",{className:"m-empty-text",children:"\u8bf7\u9009\u62e9\u5b57\u6bb5"})})})]})]})})))}}]);
//# sourceMappingURL=8.12d7f16f.chunk.js.map