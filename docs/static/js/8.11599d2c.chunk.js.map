{"version":3,"sources":["components/light/Icon.js","components/light/MyTable.js","components/light/MyTableForEasy.js","components/light/FieldRequired.js","components/light/MyCheckbox.js","utils/config.js","api/lightUrls.js","api/urls.js","api/common.js","api/index.js","api/lightApi.js","utils/tools.js","views/light/admin/setApplication/Tool.js","views/light/admin/setApplication/config.js","views/light/admin/setApplication/Header.js","views/light/admin/setApplication/useList.js","views/light/admin/setApplication/Index.js"],"names":["Icon","props","name","className","onClick","MyTable","dataSource","total","current","pageSize","getColumns","columns","rowKey","scroll","scrollToFirstRowOnChange","x","rowSelection","onChange","selectedRowKeys","selectedRows","onRowSelect","pagination","page","onSearch","showSizeChanger","pageSizeOptions","onShowSizeChange","showTotal","MyTableForEasy","FieldRequired","value","useState","required","setRequired","message","setMessage","triggerChange","changedValue","checked","tempMessage","e","target","placeholder","MyCheckbox","children","setChecked","tempChecked","baseURL","urls","light","templateSearch","templateAdd","templateDelete","templateEdit","easyTemplateSearch","easyTemplateAdd","easyTemplateDelete","easyTemplateEdit","routerSearch","routerAdd","routerDelete","routerEdit","tableSearch","tableAdd","tableDelete","tableEdit","fieldsSearch","fieldsAdd","fieldsDelete","fieldsEdit","axios","defaults","interceptors","request","use","config","headers","token","localStorage","getItem","method","params","data","err","Promise","reject","response","res","code","warning","common","a","Api","url","getRouterSearchObj","arr","split","length","i","l","parseQueryString","location","search","getFormComponentArr","id","title","formComponentName","component","getRenderFunArr","renderFunName","render","text","moment","format","Tool","onAdd","type","Option","Select","dataIndex","result","Array","isArray","width","record","isSystem","size","danger","onDelete","onCheck","onEdit","getModalFields","initValues","Item","label","rules","validator","_","resolve","find","item","Error","allowClear","map","min","max","withRouter","applicationTitle","history","go","confirm","Modal","connect","state","dispatch","onSetState","key","onDispatch","action","setDataSource","Form","useForm","form","isModalVisible","setIsModalVisible","setInitValues","setType","setApplicationTitle","modalTitle","setModalTitle","tableId","addInitValues","handleSearch","then","fields","useEffect","resetFields","handleDelete","console","log","onOk","ids","handleAdd","handleEdit","handleCheck","handleFinish","values","dataItem","handleFinishFailed","errorInfo","useList","visible","onCancel","footer","forceRender","labelCol","span","wrapperCol","initialValues","onFinish","onFinishFailed","offset","htmlType"],"mappings":"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","file":"static/js/8.11599d2c.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nexport default function Icon(props) {\r\n  let { name, className } = props\r\n  return (\r\n    <span\r\n      className={`icon iconfont icon-${name} ${className ? className : \"\"}`}\r\n      onClick={props.onClick}\r\n    ></span>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Table } from 'antd'\r\n\r\nfunction MyTable(props) {\r\n  const { dataSource, total, current, pageSize, getColumns } = props\r\n\r\n  return (\r\n    <div className=\"m-content-table\">\r\n      <Table\r\n        className=\"m-my-table\"\r\n        columns={getColumns(props)}\r\n        dataSource={dataSource}\r\n        rowKey=\"id\"\r\n        scroll={{ scrollToFirstRowOnChange: true, x: true }}\r\n        rowSelection={{\r\n          onChange: (selectedRowKeys, selectedRows) =>\r\n            props.onRowSelect(selectedRowKeys, selectedRows),\r\n        }}\r\n        pagination={{\r\n          current,\r\n          total,\r\n          pageSize,\r\n          onChange: (page, pageSize) => props.onSearch({page, pageSize}),\r\n          showSizeChanger: true,\r\n          pageSizeOptions: [10, 20, 50],\r\n          onShowSizeChange: (page, pageSize) => props.onSearch({page, pageSize}),\r\n          showTotal: (total) => <span>共有数据： <span className=\"m-total-text\">{total}</span> 条</span>,\r\n        }}\r\n      ></Table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyTable\r\n","import React from 'react'\r\nimport { Table } from 'antd'\r\n\r\nfunction MyTableForEasy(props) {\r\n  const { dataSource, getColumns } = props\r\n\r\n  return (\r\n    <div className=\"m-content-table\">\r\n      <Table\r\n        className=\"m-my-table\"\r\n        columns={getColumns(props)}\r\n        dataSource={dataSource}\r\n        rowKey=\"id\"\r\n        scroll={{ scrollToFirstRowOnChange: true, x: true }}\r\n        pagination={{\r\n          showTotal: (total) => <span>共有数据： <span className=\"m-total-text\">{total}</span> 条</span>,\r\n        }}\r\n        //pagination={false}\r\n      ></Table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyTableForEasy\r\n","import React, { useState } from 'react'\r\nimport { Checkbox, Input } from 'antd'\r\n\r\nexport default function FieldRequired({ value = {}, onChange }) {\r\n  const [required, setRequired] = useState(false) \r\n  const [message, setMessage] = useState()\r\n\r\n  const triggerChange = (changedValue) => {\r\n    onChange({\r\n      required,\r\n      message,\r\n      ...value,\r\n      ...changedValue,\r\n    });\r\n  };\r\n\r\n\r\n  const handleCheckbox = (e) => {\r\n    setRequired(e.target.checked)\r\n    triggerChange({ required: e.target.checked })\r\n  }\r\n\r\n  const handleInput = (e) => {\r\n    setMessage(e.target.value)\r\n    triggerChange({ message: e.target.value })\r\n  }\r\n\r\n  let checked = false\r\n  let tempMessage = ''\r\n  if (typeof value.required === 'boolean') {\r\n    checked = value.required\r\n    tempMessage = value.message\r\n  } else {\r\n    checked = required\r\n    tempMessage = message\r\n  }\r\n  return (\r\n    <div>\r\n      <Checkbox checked={checked} onChange={handleCheckbox}>必填</Checkbox>\r\n      <Input className={`m-fields-required-input ${checked ? 'active' : ''}`} value={tempMessage} onChange={handleInput} placeholder=\"请输入必填提示语\"></Input>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Checkbox } from 'antd'\r\n\r\nexport default function MyCheckbox({ value, onChange, children }) {\r\n  const [checked, setChecked] = useState(false)\r\n\r\n  const handleChange = (e) => {\r\n    setChecked(e.target.checked)\r\n    onChange(e.target.checked)\r\n  }\r\n\r\n  let tempChecked = false\r\n  if (typeof value === 'boolean') {\r\n    tempChecked = value\r\n  } else {\r\n    tempChecked = checked\r\n  }\r\n\r\n  return <Checkbox checked={tempChecked} onChange={handleChange}>{children}</Checkbox>\r\n}\r\n","let baseURL = 'http://localhost:81'\r\nif (process.env.NODE_ENV === 'development') {\r\n  baseURL = 'http://localhost:81' //\"http://localhost:81\"\r\n} else {\r\n  baseURL = 'https://efficacious-tiny-infinity.glitch.me'\r\n}\r\n\r\nexport { baseURL }","import { baseURL  } from '../utils/config'\r\n\r\nconst urls = {\r\n  templateSearch: '/api/template/search',\r\n  templateAdd: '/api/template/add',\r\n  templateDelete: '/api/template/delete',\r\n  templateEdit: '/api/template/edit',\r\n  easyTemplateSearch: '/api/easyTemplate/search',\r\n  easyTemplateAdd: '/api/easyTemplate/add',\r\n  easyTemplateDelete: '/api/easyTemplate/delete',\r\n  easyTemplateEdit: '/api/easyTemplate/edit',  \r\n  routerSearch: '/api/router/search',\r\n  routerAdd: '/api/router/add',\r\n  routerDelete: '/api/router/delete',\r\n  routerEdit: '/api/router/edit',\r\n  tableSearch: '/api/table/search',\r\n  tableAdd: '/api/table/add',\r\n  tableDelete: '/api/table/delete',\r\n  tableEdit: '/api/table/edit',\r\n  fieldsSearch: '/api/fields/search',\r\n  fieldsAdd: '/api/fields/add',\r\n  fieldsDelete: '/api/fields/delete',\r\n  fieldsEdit: '/api/fields/edit',\r\n}\r\n\r\nexport default urls","import light from \"./lightUrls\"\r\n\r\nconst urls = {\r\n  light,\r\n}\r\n\r\nexport default urls\r\n","import axios from 'axios'\r\nimport { message } from 'antd'\r\nimport { baseURL  } from '../utils/config'\r\n\r\naxios.defaults.baseURL = baseURL\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.token = localStorage.getItem('token') || ''\r\n\r\n    // if (config.isNeedExtraData !== false) {\r\n    //   let extraData = { userId: 1 }\r\n    //   if (config.method === \"get\") {\r\n    //     config.params = { ...extraData, ...config.data }\r\n    //   } else {\r\n    //     config.data = { ...extraData, ...config.data }\r\n    //   }\r\n    // }\r\n    if (config.method === 'get') {\r\n      config.params = { ...config.data }\r\n    } else {\r\n      config.data = { ...config.data }\r\n    }\r\n    return config\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use((res) => {\r\n  if (res.data.code === 200) {\r\n    return res.data\r\n  } else if (res.data.code === 400) {\r\n    message.warning(res.data.message)\r\n    return res.data\r\n  } else {\r\n    return Promise.reject(res)\r\n  }\r\n})\r\n\r\nexport const common = async (config) => {\r\n  let res = await axios(config)\r\n  return res\r\n}\r\n","import light from './lightApi'\r\n\r\nconst Api = {\r\n  light\r\n}\r\n\r\nexport default Api\r\n\r\n\r\n\r\n","import urls from './urls'\r\nimport { common } from './common'\r\n\r\nconst Api = {\r\n  templateSearch: (data) => common({ url: urls.light.templateSearch, data, method: 'post' }),\r\n  templateAdd: (data) => common({ url: urls.light.templateAdd, data, method: 'post' }),\r\n  templateDelete: (data) => common({ url: urls.light.templateDelete, data, method: 'post' }),\r\n  templateEdit: (data) => common({ url: urls.light.templateEdit, data, method: 'post' }),\r\n  easyTemplateSearch: (data) => common({ url: urls.light.easyTemplateSearch, data, method: 'post' }),\r\n  easyTemplateAdd: (data) => common({ url: urls.light.easyTemplateAdd, data, method: 'post' }),\r\n  easyTemplateDelete: (data) => common({ url: urls.light.easyTemplateDelete, data, method: 'post' }),\r\n  easyTemplateEdit: (data) => common({ url: urls.light.easyTemplateEdit, data, method: 'post' }),\r\n  routerSearch: (data) => common({ url: urls.light.routerSearch, data, method: 'post' }),\r\n  routerAdd: (data) => common({ url: urls.light.routerAdd, data, method: 'post' }),\r\n  routerDelete: (data) => common({ url: urls.light.routerDelete, data, method: 'post' }),\r\n  routerEdit: (data) => common({ url: urls.light.routerEdit, data, method: 'post' }),\r\n  tableSearch: (data) => common({ url: urls.light.tableSearch, data, method: 'post' }),\r\n  tableAdd: (data) => common({ url: urls.light.tableAdd, data, method: 'post' }),\r\n  tableDelete: (data) => common({ url: urls.light.tableDelete, data, method: 'post' }),\r\n  tableEdit: (data) => common({ url: urls.light.tableEdit, data, method: 'post' }),\r\n  fieldsSearch: (data) => common({ url: urls.light.fieldsSearch, data, method: 'post' }),\r\n  fieldsAdd: (data) => common({ url: urls.light.fieldsAdd, data, method: 'post' }),\r\n  fieldsDelete: (data) => common({ url: urls.light.fieldsDelete, data, method: 'post' }),\r\n  fieldsEdit: (data) => common({ url: urls.light.fieldsEdit, data, method: 'post' }),\r\n}\r\n\r\nexport default Api","import store from '../store'\r\nimport { Input } from 'antd'\r\nimport moment from 'moment'\r\n\r\nlet timer\r\n\r\n//显示loading\r\nconst showLoading = (delay = 0) => {\r\n  timer = setTimeout(() => {\r\n    store.dispatch({\r\n      type: 'SET_LIGHT_STATE',\r\n      key: ['isLoading'],\r\n      value: true,\r\n    })\r\n  }, delay)\r\n}\r\n\r\n//隐藏loading\r\nconst hideLoading = () => {\r\n  clearTimeout(timer)\r\n  store.dispatch({\r\n    type: 'SET_LIGHT_STATE',\r\n    key: ['isLoading'],\r\n    value: false,\r\n  })\r\n}\r\n\r\n//把url里的查询字段转换成对象\r\nconst parseQueryString = (url) => {\r\n  let params = {}\r\n  let arr = url.split('?')\r\n  if (arr.length <= 1) {\r\n    return params\r\n  }\r\n  arr = arr[1].split('&')\r\n  for (let i = 0, l = arr.length; i < l; i++) {\r\n    let a = arr[i].split('=')\r\n    params[a[0]] = a[1]\r\n  }\r\n  return params\r\n}\r\n\r\n//包路由里的查询字段转换成对象\r\nconst getRouterSearchObj = (props) => {\r\n  const {\r\n    location: { search },\r\n  } = props\r\n  const routerSearchObj = parseQueryString(search)\r\n  return routerSearchObj\r\n}\r\n\r\n//获取主机名\r\nconst getHost = (url) => {\r\n  var reg = /http(s)?:\\/\\/([A-Za-z0123456789:.]+)\\/\\S+/\r\n  var result = reg.exec(url)\r\n  if (result) {\r\n    return 'http://' + result[2]\r\n  }\r\n}\r\n\r\n//获取表单组件\r\nconst getFormComponentArr = () => {\r\n  return [\r\n    {\r\n      id: 0,\r\n      title: '输入框(Input)',\r\n      formComponentName: 'Input',\r\n      component: <Input></Input>,\r\n    },\r\n  ]\r\n}\r\n\r\n//获取渲染函数\r\nconst getRenderFunArr = () => {\r\n  return [\r\n    {\r\n      id: 0,\r\n      title: 'span标签',\r\n      renderFunName: 'renderSpan',\r\n      render: (text) => {\r\n        return <span>{text}</span>\r\n      },\r\n    },\r\n    {\r\n      id: 1,\r\n      title: '日期',\r\n      renderFunName: 'renderDatetime',\r\n      render: (text) => {\r\n        return <span>{text ? moment(text).format('YYYY-MM-DD HH:mm:ss') : ''}</span>\r\n      },\r\n    },\r\n  ]\r\n}\r\n\r\nexport {\r\n  showLoading,\r\n  hideLoading,\r\n  parseQueryString,\r\n  getRouterSearchObj,\r\n  getHost,\r\n  getFormComponentArr,\r\n  getRenderFunArr,\r\n}\r\n","import React from 'react'\r\nimport { Button } from 'antd'\r\nimport { Icon } from '../../../../components/light'\r\n\r\nfunction Tool(props) {\r\n  const { onAdd } = props\r\n\r\n  return (\r\n    <div className=\"m-content-tool\">\r\n      <div className=\"m-content-tool-row\">\r\n        <Button className=\"m-space\" type=\"primary\" onClick={onAdd}>\r\n          <Icon name=\"add\" className=\"m-tool-btn-icon\"></Icon>\r\n          添加字段\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tool\r\n","import { Form, Input, Button, Select, InputNumber } from 'antd'\r\nimport { getFormComponentArr, getRenderFunArr } from '../../../../utils/tools'\r\nimport { FieldRequired, MyCheckbox } from '../../../../components/light'\r\n\r\nconst { Option } = Select\r\n\r\n//表格列字段\r\nconst getColumns = (props) => {\r\n  return [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n    },\r\n    {\r\n      title: '字段名称',\r\n      dataIndex: 'title',\r\n    },\r\n    {\r\n      title: '英文名称',\r\n      dataIndex: 'dataIndex',\r\n    },\r\n    {\r\n      title: '表单组件名',\r\n      dataIndex: 'formComponentName',\r\n      render: (text) => {\r\n        return text ? text : '无'\r\n      },\r\n    },\r\n    {\r\n      title: '渲染函数名',\r\n      dataIndex: 'renderFunName',\r\n      render: (text) => {\r\n        return text ? text : '无'\r\n      },\r\n    },\r\n    {\r\n      title: '字段必填',\r\n      dataIndex: 'rules',\r\n      render: (text) => {\r\n        const result = Array.isArray(text) && text.length > 0 && text[0]\r\n        return result ? (result.required ? '是' : '否') : '否'\r\n      },\r\n    },\r\n    {\r\n      title: '表格展示',\r\n      dataIndex: 'isColumn',\r\n      render: (text) => {\r\n        return text ? '是' : '否'\r\n      },\r\n    },\r\n    // {\r\n    //   title: '搜索',\r\n    //   dataIndex: 'isSearch',\r\n    //   render: (text) => {\r\n    //     return text ? '是' : '否'\r\n    //   },\r\n    // },\r\n    {\r\n      title: '添加/编辑',\r\n      dataIndex: 'isModalField',\r\n      render: (text) => {\r\n        return text ? '是' : '否'\r\n      },\r\n    },\r\n    {\r\n      title: '顺序号',\r\n      dataIndex: 'orderIndex',\r\n      render: (text) => {\r\n        return typeof text === 'number' ? text : '无'\r\n      },\r\n    },\r\n    {\r\n      title: '操作',\r\n      width: 220,\r\n      render: (record) => {\r\n        if(record.isSystem) {\r\n          return '系统字段'\r\n        } else {\r\n          return (\r\n            <div className=\"m-action\">\r\n              <Button\r\n                className=\"m-action-btn\"\r\n                size=\"small\"\r\n                danger\r\n                onClick={() => props.onDelete(record)}\r\n              >\r\n                删除\r\n              </Button>\r\n              <Button\r\n                className=\"m-action-btn\"\r\n                size=\"small\"\r\n                onClick={() => props.onCheck(record)}\r\n              >\r\n                查看\r\n              </Button>\r\n              <Button\r\n                className=\"m-action-btn\"\r\n                size=\"small\"\r\n                onClick={() => props.onEdit(record)}\r\n              >\r\n                编辑\r\n              </Button>\r\n            </div>\r\n          )\r\n        }\r\n      },\r\n    },\r\n  ]\r\n}\r\n\r\n//添加编辑查看对话框表单字段\r\nconst getModalFields = ({ dataSource, type, initValues }) => {\r\n  const checkTitle = (_, value) => {\r\n      if (type === 'edit') {\r\n        if (value === initValues.title) {\r\n          return Promise.resolve()\r\n        }\r\n      }\r\n      const result = dataSource.find((item) => item.title === value)\r\n      if (result) {\r\n        return Promise.reject(new Error('字段名称已存在!'))\r\n      } else {\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n\r\n  const checkDataIndex = (_, value) => {\r\n    if (type === 'edit') {\r\n      if (value === initValues.dataIndex) {\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n    const result = dataSource.find((item) => item.dataIndex === value)\r\n    if (result) {\r\n      return Promise.reject(new Error('英文字段名称已存在!'))\r\n    } else {\r\n      return Promise.resolve()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Form.Item\r\n        label=\"字段名称\"\r\n        name=\"title\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入字段名称！',\r\n          },\r\n          {\r\n            validator: checkTitle,\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"英文名称\"\r\n        name=\"dataIndex\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入字段名称！',\r\n          },\r\n          {\r\n            validator: checkDataIndex,\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"表单组件\"\r\n        name=\"formComponentName\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请选择表单组件！',\r\n          },\r\n        ]}\r\n      >\r\n        <Select placeholder=\"请选择\" allowClear>\r\n          {getFormComponentArr().map((item) => (\r\n            <Option key={item.id} value={item.formComponentName}>\r\n              {item.title}\r\n            </Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"渲染函数名\"\r\n        name=\"renderFunName\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请选择表渲染函数名！',\r\n          },\r\n        ]}\r\n      >\r\n        <Select placeholder=\"请选择\" allowClear>\r\n          {getRenderFunArr().map((item) => (\r\n            <Option key={item.id} value={item.renderFunName}>\r\n              {item.title}\r\n            </Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"字段必填\" name=\"rules\">\r\n        <FieldRequired></FieldRequired>\r\n      </Form.Item>\r\n      <Form.Item label=\"表格展示\" name=\"isColumn\">\r\n        <MyCheckbox>展示</MyCheckbox>\r\n      </Form.Item>\r\n      {/* <Form.Item\r\n        label=\"搜索\"\r\n        name=\"isSearch\"\r\n      >\r\n        <MyCheckbox>展示</MyCheckbox>\r\n      </Form.Item> */}\r\n      <Form.Item\r\n        label=\"添加/编辑\"\r\n        name=\"isModalField\"\r\n      >\r\n        <MyCheckbox>展示</MyCheckbox>\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"顺序号\"\r\n        name=\"orderIndex\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入顺序号！',\r\n          }\r\n        ]}\r\n      >\r\n        <InputNumber min={1} max={100} />\r\n      </Form.Item>\r\n    </>\r\n  )\r\n}\r\n\r\nexport { getColumns, getModalFields }\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {\r\n  Icon\r\n} from '../../../../components/light'\r\n\r\nfunction Header(props) {\r\n  const { applicationTitle } = props\r\n  return (\r\n    <div className=\"m-set-application-header\">\r\n      <Icon name=\"arrow\" className=\"m-set-application-header-icon\" onClick={() => props.history.go(-1)}></Icon>\r\n      {applicationTitle}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(Header)","import { useState, useEffect } from 'react'\r\nimport Api from '../../../../api'\r\nimport { Modal, Form } from 'antd'\r\nimport { getRouterSearchObj } from '../../../../utils/tools'\r\n\r\nconst { confirm } = Modal\r\n\r\nexport default function useList(props) {\r\n  const [dataSource, setDataSource] = useState([])\r\n  const [form] = Form.useForm()\r\n  //控制对话框显示和隐藏\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n  //添加表单默认值\r\n  const [initValues, setInitValues] = useState({})\r\n  const [type, setType] = useState('add')\r\n  const [applicationTitle, setApplicationTitle] = useState()\r\n  const [modalTitle, setModalTitle] = useState()\r\n\r\n  //获取路由参数\r\n  const routerSearchObj = getRouterSearchObj(props)\r\n  const tableId = routerSearchObj.id - 0\r\n\r\n  const addInitValues = {\r\n    // rules: {\r\n    //   required: true,\r\n    //   message: '',\r\n    // }\r\n  }\r\n\r\n  //搜索\r\n  const handleSearch = () => {\r\n    Api.light.fieldsSearch({ tableId }).then((res) => {\r\n      if (res.code === 200) {\r\n        setDataSource(res.data.fields)\r\n        setApplicationTitle(res.data.title)\r\n      }\r\n    })\r\n  }\r\n\r\n  //删除\r\n  const handleDelete = (record) => {\r\n    console.log('删除, id:', record.id)\r\n    confirm({\r\n      title: '确认要删除吗？',\r\n      onOk() {\r\n        Api.light.fieldsDelete({ tableId, ids: [record.id] }).then((res) => {\r\n          if (res.code === 200) {\r\n            handleSearch()\r\n          }\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  //显示添加对话框\r\n  const handleAdd = () => {\r\n    setType('add')\r\n    setInitValues(addInitValues)\r\n    console.log(addInitValues)\r\n    setModalTitle('添加字段')\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  //显示编辑对话框\r\n  const handleEdit = (record) => {\r\n    console.log('编辑, id:', record)\r\n    setType('edit')\r\n    record.rules = Array.isArray(record.rules) ? record.rules[0] : {}\r\n    setInitValues({ ...initValues, ...record })\r\n    setModalTitle('编辑字段')\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  //添加或编辑\r\n  const handleFinish = (values) => {\r\n    console.log('Success:', values)\r\n    values.rules = Array.isArray(values.rules) ? values.rules : [values.rules]\r\n    if (type === 'add') {\r\n      Api.light.fieldsAdd({ tableId, dataItem: values }).then((res) => {\r\n        if (res.code === 200) {\r\n          setIsModalVisible(false)\r\n          handleSearch()\r\n        }\r\n      })\r\n    } else if (type === 'edit') {\r\n      values.rules = Array.isArray(values.rules) ? values.rules : [values.rules]\r\n      Api.light\r\n        .fieldsEdit({\r\n          tableId,\r\n          id: initValues.id,\r\n          dataItem: { ...initValues, ...values },\r\n        })\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            setIsModalVisible(false)\r\n            handleSearch()\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  //校验失败\r\n  const handleFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo)\r\n  }\r\n\r\n  //查看\r\n  const handleCheck = (record) => {\r\n    setType('check')\r\n    setInitValues({ ...initValues, ...record })\r\n    setModalTitle('查看字段')\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  //挂载完\r\n  useEffect(() => {\r\n    handleSearch()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    form.resetFields()\r\n  }, [isModalVisible])\r\n\r\n  return {\r\n    dataSource,\r\n    isModalVisible,\r\n    initValues,\r\n    type,\r\n    form,\r\n    applicationTitle,\r\n    modalTitle,\r\n    handleSearch,\r\n    handleDelete,\r\n    handleAdd,\r\n    handleEdit,\r\n    handleCheck,\r\n    setIsModalVisible,\r\n    handleFinish,\r\n    handleFinishFailed,\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Modal, Button, Form } from 'antd'\r\nimport Tool from './Tool'\r\nimport { getColumns, getModalFields } from './config'\r\nimport { MyTableForEasy, Icon } from '../../../../components/light'\r\nimport Header from './Header'\r\nimport useList from './useList'\r\n\r\nfunction Index(props) {\r\n  const {\r\n    dataSource,\r\n    isModalVisible,\r\n    initValues,\r\n    type,\r\n    form,\r\n    applicationTitle,\r\n    modalTitle,\r\n    handleSearch,\r\n    handleDelete,\r\n    handleAdd,\r\n    handleEdit,\r\n    handleCheck,\r\n    setIsModalVisible,\r\n    handleFinish,\r\n    handleFinishFailed,\r\n  } = useList(props)\r\n\r\n\r\n  return (\r\n    <div className=\"m-admin-content\">\r\n      <Header applicationTitle={applicationTitle}></Header>\r\n      <Tool\r\n        onAdd={handleAdd}\r\n      ></Tool>\r\n      <MyTableForEasy\r\n        dataSource={dataSource}\r\n        onSearch={handleSearch}\r\n        onDelete={handleDelete}\r\n        onEdit={handleEdit}\r\n        onCheck={handleCheck}\r\n        getColumns={getColumns}\r\n      ></MyTableForEasy>\r\n      <Modal\r\n        title={modalTitle}\r\n        visible={isModalVisible}\r\n        onCancel={() => setIsModalVisible(false)}\r\n        footer={null}\r\n        width={900}\r\n        className=\"m-set-application-modal\"\r\n        forceRender\r\n      >\r\n        <Form\r\n          form={form}\r\n          labelCol={{ span: 4 }}\r\n          wrapperCol={{ span: 17 }}\r\n          initialValues={{ ...initValues }}\r\n          onFinish={handleFinish}\r\n          onFinishFailed={handleFinishFailed}\r\n        >\r\n          {getModalFields({dataSource, type, initValues})}\r\n          <Form.Item\r\n            wrapperCol={{ offset: 4, span: 17 }}\r\n            className=\"m-modal-footer\"\r\n          >\r\n            {(type === 'add' || type === 'edit') && (\r\n              <>\r\n                <Button type=\"primary\" htmlType=\"submit\" className=\"m-space\">\r\n                  <Icon name=\"submit\" className=\"m-tool-btn-icon\"></Icon>\r\n                  提交\r\n                </Button>\r\n                <Button\r\n                  className=\"m-space\"\r\n                  onClick={() => {\r\n                    form.resetFields()\r\n                  }}\r\n                >\r\n                  <Icon name=\"reset\" className=\"m-tool-btn-icon\"></Icon>\r\n                  重置\r\n                </Button>\r\n              </>\r\n            )}\r\n            <Button\r\n              className=\"m-space\"\r\n              onClick={() => setIsModalVisible(false)}\r\n            >\r\n              取消\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onSetState(key, value) {\r\n      dispatch({ type: 'SET_LIGHT_STATE', key, value })\r\n    },\r\n    onDispatch(action) {\r\n      dispatch(action)\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Index))\r\n"],"sourceRoot":""}