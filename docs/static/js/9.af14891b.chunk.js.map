{"version":3,"sources":["components/light/Icon.js","components/light/MyTable.js","components/light/MyTableForEasy.js","components/light/FieldRequired.js","api/lightUrls.js","api/urls.js","utils/config.js","api/common.js","api/index.js","api/lightApi.js","store/light/actionCreator.js","views/light/admin/application/useList.js","views/light/admin/application/Index.js","views/light/admin/application/config.js"],"names":["Icon","props","name","className","onClick","MyTable","dataSource","total","current","pageSize","getColumns","columns","rowKey","scroll","scrollToFirstRowOnChange","x","rowSelection","onChange","selectedRowKeys","selectedRows","onRowSelect","pagination","page","onSearch","showSizeChanger","pageSizeOptions","onShowSizeChange","showTotal","MyTableForEasy","FieldRequired","value","useState","required","setRequired","message","setMessage","triggerChange","changedValue","checked","tempMessage","e","target","placeholder","urls","light","templateSearch","templateAdd","templateDelete","templateEdit","easyTemplateSearch","easyTemplateAdd","easyTemplateDelete","easyTemplateEdit","routerSearch","routerAdd","routerDelete","routerEdit","tableSearch","tableAdd","tableDelete","tableEdit","fieldsSearch","fieldsAdd","fieldsDelete","fieldsEdit","baseURL","axios","defaults","interceptors","request","use","config","headers","token","localStorage","getItem","method","params","data","err","Promise","reject","response","res","code","warning","common","a","Api","url","getRouter","callback","dispatch","then","type","key","confirm","Modal","connect","state","router","getIn","toJS","onSetState","onDispatch","action","withRouter","Form","useForm","form","isModalVisible","setIsModalVisible","initValues","setInitValues","setType","modalTitle","setModalTitle","addInitValues","handleSearch","useEffect","resetFields","handleDelete","id","console","log","title","onOk","ids","handleAdd","handleEdit","record","find","item","handleFinish","values","path","dataItem","handleFinishFailed","errorInfo","handleJumpToSet","history","push","useList","map","overlay","domEvent","stopPropagation","Item","visible","onCancel","footer","forceRender","labelCol","span","wrapperCol","initialValues","onFinish","onFinishFailed","label","rules","offset","htmlType"],"mappings":"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","file":"static/js/9.af14891b.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nexport default function Icon(props) {\r\n  let { name, className } = props\r\n  return (\r\n    <span\r\n      className={`icon iconfont icon-${name} ${className ? className : \"\"}`}\r\n      onClick={props.onClick}\r\n    ></span>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Table } from 'antd'\r\n\r\nfunction MyTable(props) {\r\n  const { dataSource, total, current, pageSize, getColumns } = props\r\n\r\n  return (\r\n    <div className=\"m-content-table\">\r\n      <Table\r\n        className=\"m-my-table\"\r\n        columns={getColumns(props)}\r\n        dataSource={dataSource}\r\n        rowKey=\"id\"\r\n        scroll={{ scrollToFirstRowOnChange: true, x: true }}\r\n        rowSelection={{\r\n          onChange: (selectedRowKeys, selectedRows) =>\r\n            props.onRowSelect(selectedRowKeys, selectedRows),\r\n        }}\r\n        pagination={{\r\n          current,\r\n          total,\r\n          pageSize,\r\n          onChange: (page, pageSize) => props.onSearch({page, pageSize}),\r\n          showSizeChanger: true,\r\n          pageSizeOptions: [10, 20, 50],\r\n          onShowSizeChange: (page, pageSize) => props.onSearch({page, pageSize}),\r\n          showTotal: (total) => <span>共有数据： <span className=\"m-total-text\">{total}</span> 条</span>,\r\n        }}\r\n      ></Table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyTable\r\n","import React from 'react'\r\nimport { Table } from 'antd'\r\n\r\nfunction MyTableForEasy(props) {\r\n  const { dataSource, getColumns } = props\r\n\r\n  return (\r\n    <div className=\"m-content-table\">\r\n      <Table\r\n        className=\"m-my-table\"\r\n        columns={getColumns(props)}\r\n        dataSource={dataSource}\r\n        rowKey=\"id\"\r\n        scroll={{ scrollToFirstRowOnChange: true, x: true }}\r\n        pagination={{\r\n          showTotal: (total) => <span>共有数据： <span className=\"m-total-text\">{total}</span> 条</span>,\r\n        }}\r\n        //pagination={false}\r\n      ></Table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyTableForEasy\r\n","import React, { useState } from 'react'\r\nimport { Checkbox, Input } from 'antd'\r\n\r\nexport default function FieldRequired({ value = {}, onChange }) {\r\n  const [required, setRequired] = useState(false) \r\n  const [message, setMessage] = useState()\r\n\r\n  const triggerChange = (changedValue) => {\r\n    onChange({\r\n      required,\r\n      message,\r\n      ...value,\r\n      ...changedValue,\r\n    });\r\n  };\r\n\r\n\r\n  const handleCheckbox = (e) => {\r\n    setRequired(e.target.checked)\r\n    triggerChange({ required: e.target.checked })\r\n  }\r\n\r\n  const handleInput = (e) => {\r\n    setMessage(e.target.value)\r\n    triggerChange({ message: e.target.value })\r\n  }\r\n\r\n  let checked = false\r\n  let tempMessage = ''\r\n  if (typeof value.required === 'boolean') {\r\n    checked = value.required\r\n    tempMessage = value.message\r\n  } else {\r\n    checked = required\r\n    tempMessage = message\r\n  }\r\n  return (\r\n    <div>\r\n      <Checkbox checked={checked} onChange={handleCheckbox}>必填</Checkbox>\r\n      <Input className={`m-fields-required-input ${checked ? 'active' : ''}`} value={tempMessage} onChange={handleInput} placeholder=\"请输入必填提示语\"></Input>\r\n    </div>\r\n  )\r\n}\r\n","\r\nconst urls = {\r\n  templateSearch: '/api/template/search',\r\n  templateAdd: '/api/template/add',\r\n  templateDelete: '/api/template/delete',\r\n  templateEdit: '/api/template/edit',\r\n  easyTemplateSearch: '/api/easyTemplate/search',\r\n  easyTemplateAdd: '/api/easyTemplate/add',\r\n  easyTemplateDelete: '/api/easyTemplate/delete',\r\n  easyTemplateEdit: '/api/easyTemplate/edit',  \r\n  routerSearch: '/api/router/search',\r\n  routerAdd: '/api/router/add',\r\n  routerDelete: '/api/router/delete',\r\n  routerEdit: '/api/router/edit',\r\n  tableSearch: '/api/table/search',\r\n  tableAdd: '/api/table/add',\r\n  tableDelete: '/api/table/delete',\r\n  tableEdit: '/api/table/edit',\r\n  fieldsSearch: '/api/fields/search',\r\n  fieldsAdd: '/api/fields/add',\r\n  fieldsDelete: '/api/fields/delete',\r\n  fieldsEdit: '/api/fields/edit',\r\n}\r\n\r\nexport default urls","import light from \"./lightUrls\"\r\n\r\nconst urls = {\r\n  light,\r\n}\r\n\r\nexport default urls\r\n","let baseURL = 'http://localhost:81'\r\nif (process.env.NODE_ENV === 'development') {\r\n  baseURL = 'http://localhost:81' //\"http://localhost:81\"\r\n} else {\r\n  baseURL = 'https://efficacious-tiny-infinity.glitch.me'\r\n}\r\n\r\nexport { baseURL }","import axios from 'axios'\r\nimport { message } from 'antd'\r\nimport { baseURL  } from '../utils/config'\r\n\r\naxios.defaults.baseURL = baseURL\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.token = localStorage.getItem('token') || ''\r\n\r\n    // if (config.isNeedExtraData !== false) {\r\n    //   let extraData = { userId: 1 }\r\n    //   if (config.method === \"get\") {\r\n    //     config.params = { ...extraData, ...config.data }\r\n    //   } else {\r\n    //     config.data = { ...extraData, ...config.data }\r\n    //   }\r\n    // }\r\n    if (config.method === 'get') {\r\n      config.params = { ...config.data }\r\n    } else {\r\n      config.data = { ...config.data }\r\n    }\r\n    return config\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use((res) => {\r\n  if (res.data.code === 200) {\r\n    return res.data\r\n  } else if (res.data.code === 400) {\r\n    message.warning(res.data.message)\r\n    return res.data\r\n  } else {\r\n    return Promise.reject(res)\r\n  }\r\n})\r\n\r\nexport const common = async (config) => {\r\n  let res = await axios(config)\r\n  return res\r\n}\r\n","import light from './lightApi'\r\n\r\nconst Api = {\r\n  light\r\n}\r\n\r\nexport default Api\r\n\r\n\r\n\r\n","import urls from './urls'\r\nimport { common } from './common'\r\n\r\nconst Api = {\r\n  templateSearch: (data) => common({ url: urls.light.templateSearch, data, method: 'post' }),\r\n  templateAdd: (data) => common({ url: urls.light.templateAdd, data, method: 'post' }),\r\n  templateDelete: (data) => common({ url: urls.light.templateDelete, data, method: 'post' }),\r\n  templateEdit: (data) => common({ url: urls.light.templateEdit, data, method: 'post' }),\r\n  easyTemplateSearch: (data) => common({ url: urls.light.easyTemplateSearch, data, method: 'post' }),\r\n  easyTemplateAdd: (data) => common({ url: urls.light.easyTemplateAdd, data, method: 'post' }),\r\n  easyTemplateDelete: (data) => common({ url: urls.light.easyTemplateDelete, data, method: 'post' }),\r\n  easyTemplateEdit: (data) => common({ url: urls.light.easyTemplateEdit, data, method: 'post' }),\r\n  routerSearch: (data) => common({ url: urls.light.routerSearch, data, method: 'post' }),\r\n  routerAdd: (data) => common({ url: urls.light.routerAdd, data, method: 'post' }),\r\n  routerDelete: (data) => common({ url: urls.light.routerDelete, data, method: 'post' }),\r\n  routerEdit: (data) => common({ url: urls.light.routerEdit, data, method: 'post' }),\r\n  tableSearch: (data) => common({ url: urls.light.tableSearch, data, method: 'post' }),\r\n  tableAdd: (data) => common({ url: urls.light.tableAdd, data, method: 'post' }),\r\n  tableDelete: (data) => common({ url: urls.light.tableDelete, data, method: 'post' }),\r\n  tableEdit: (data) => common({ url: urls.light.tableEdit, data, method: 'post' }),\r\n  fieldsSearch: (data) => common({ url: urls.light.fieldsSearch, data, method: 'post' }),\r\n  fieldsAdd: (data) => common({ url: urls.light.fieldsAdd, data, method: 'post' }),\r\n  fieldsDelete: (data) => common({ url: urls.light.fieldsDelete, data, method: 'post' }),\r\n  fieldsEdit: (data) => common({ url: urls.light.fieldsEdit, data, method: 'post' }),\r\n}\r\n\r\nexport default Api","import Api from '../../api'\r\n\r\nconst getRouter = (callback) => (dispatch) => {\r\n  Api.light.routerSearch().then(res => {\r\n    if (res.code === 200) {\r\n      dispatch({ type: 'SET_LIGHT_STATE', key: ['router'], value: res.data })\r\n      callback && callback()\r\n    }\r\n  })\r\n}\r\n\r\nexport {\r\n  getRouter,\r\n}","import { useState, useEffect } from 'react'\r\nimport Api from '../../../../api'\r\nimport { Modal, Form } from 'antd'\r\nimport { getRouter } from '../../../../store/light/actionCreator'\r\n\r\n\r\nconst { confirm } = Modal\r\n\r\nexport default function useList(props) {\r\n  const [form] = Form.useForm()\r\n  //控制对话框显示和隐藏\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n  //添加表单默认值\r\n  const [initValues, setInitValues] = useState({})\r\n  const [type, setType] = useState('add')\r\n  const [modalTitle, setModalTitle] = useState()\r\n  const { router } = props\r\n\r\n  const addInitValues = {}\r\n\r\n  //搜索\r\n  const handleSearch = () => {\r\n    props.onDispatch(getRouter())\r\n  }\r\n\r\n  //删除\r\n  const handleDelete = (id) => {\r\n    console.log('删除, id:', id)\r\n    confirm({\r\n      title: '确认要删除吗？',\r\n      onOk() {\r\n        Api.light.routerDelete({ ids: [id] }).then((res) => {\r\n          if (res.code === 200) {\r\n            props.onDispatch(getRouter())\r\n          }\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  //显示添加对话框\r\n  const handleAdd = () => {\r\n    setType('add')\r\n    setModalTitle('添加应用')\r\n    setInitValues(addInitValues)\r\n    console.log(addInitValues)\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  //显示编辑对话框\r\n  const handleEdit = (id) => {\r\n    const record = router.find(item => item.id === id)\r\n    console.log('编辑, id:', record)\r\n    setType('edit')\r\n    setModalTitle('修改名称')\r\n    setInitValues({ ...initValues, ...record })\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  //添加或编辑\r\n  const handleFinish = (values) => {\r\n    console.log('Success:', values)\r\n    if (type === 'add') {\r\n      values.path = '/light/index/content'\r\n      Api.light.routerAdd({ dataItem: values }).then((res) => {\r\n        if (res.code === 200) {\r\n          setIsModalVisible(false)\r\n          handleSearch()\r\n        }\r\n      })\r\n    } else if (type === 'edit') {\r\n      Api.light\r\n        .routerEdit({\r\n          id: initValues.id,\r\n          dataItem: { ...initValues, ...values },\r\n        })\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            setIsModalVisible(false)\r\n            handleSearch()\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  //校验失败\r\n  const handleFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo)\r\n  }\r\n\r\n  //跳转到应用设置页面\r\n  const handleJumpToSet = (id) => {\r\n    props.history.push(`/light/admin/setApplication?id=${id}`)\r\n  }\r\n\r\n  //挂载完\r\n  useEffect(() => {\r\n    handleSearch()\r\n    // eslint-disable-next-line \r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    form.resetFields()\r\n  }, [isModalVisible, form])\r\n\r\n\r\n  return {\r\n    isModalVisible,\r\n    initValues,\r\n    type,\r\n    form,\r\n    modalTitle,\r\n    handleDelete,\r\n    handleAdd,\r\n    handleEdit,\r\n    setIsModalVisible,\r\n    handleFinish,\r\n    handleFinishFailed,\r\n    handleJumpToSet,\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Modal, Button, Form, Menu, Dropdown } from 'antd'\r\nimport { getModalFields } from './config'\r\nimport { Icon } from '../../../../components/light'\r\n\r\nimport useList from './useList'\r\n\r\nfunction Index(props) {\r\n  const {\r\n    isModalVisible,\r\n    initValues,\r\n    type,\r\n    form,\r\n    modalTitle,\r\n    handleDelete,\r\n    handleAdd,\r\n    handleEdit,\r\n    setIsModalVisible,\r\n    handleFinish,\r\n    handleFinishFailed,\r\n    handleJumpToSet,\r\n  } = useList(props)\r\n\r\n  const { router } = props\r\n\r\n  return (\r\n    <>\r\n      <div className=\"m-admin-content home\">\r\n        <div className=\"m-admin-row\">\r\n          <div className=\"m-adimn-row-title\">自定义应用</div>\r\n          <div className=\"m-app-wrap\">\r\n            {router.map((item) => (\r\n              <div\r\n                key={item.id}\r\n                className=\"m-app-item\"\r\n                onClick={() => handleJumpToSet(item.id)}\r\n              >\r\n                <Dropdown\r\n                  overlay={\r\n                    <Menu onClick={e => e.domEvent.stopPropagation()}>\r\n                      <Menu.Item key=\"0\" onClick={() => handleEdit(item.id)}>\r\n                        修改名称\r\n                      </Menu.Item>\r\n                      <Menu.Item key=\"1\" onClick={() => handleDelete(item.id)}>\r\n                        删除应用\r\n                      </Menu.Item>\r\n                    </Menu>\r\n                  }\r\n                >\r\n                  <span className=\"m-app-item-icon\">\r\n                    <Icon name=\"more\"></Icon>\r\n                  </span>\r\n                </Dropdown>\r\n                {item.title}\r\n              </div>\r\n            ))}\r\n            <div className=\"m-app-item\" onClick={handleAdd}>\r\n              <Icon name=\"add\" className=\"m-application-icon\"></Icon>\r\n              创建新应用\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Modal\r\n          title={modalTitle}\r\n          visible={isModalVisible}\r\n          onCancel={() => setIsModalVisible(false)}\r\n          footer={null}\r\n          forceRender\r\n        >\r\n          <Form\r\n            form={form}\r\n            labelCol={{ span: 4 }}\r\n            wrapperCol={{ span: 17 }}\r\n            initialValues={{ ...initValues }}\r\n            onFinish={handleFinish}\r\n            onFinishFailed={handleFinishFailed}\r\n          >\r\n            {getModalFields()}\r\n            <Form.Item\r\n              wrapperCol={{ offset: 4, span: 17 }}\r\n              className=\"m-modal-footer\"\r\n            >\r\n              {(type === 'add' || type === 'edit') && (\r\n                <>\r\n                  <Button type=\"primary\" htmlType=\"submit\" className=\"m-space\">\r\n                    <Icon name=\"submit\" className=\"m-tool-btn-icon\"></Icon>\r\n                    提交\r\n                  </Button>\r\n                  <Button\r\n                    className=\"m-space\"\r\n                    onClick={() => {\r\n                      form.resetFields()\r\n                    }}\r\n                  >\r\n                    <Icon name=\"reset\" className=\"m-tool-btn-icon\"></Icon>\r\n                    重置\r\n                  </Button>\r\n                </>\r\n              )}\r\n              <Button\r\n                className=\"m-space\"\r\n                onClick={() => setIsModalVisible(false)}\r\n              >\r\n                取消\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    router: state.getIn(['light', 'router']).toJS(),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onSetState(key, value) {\r\n      dispatch({ type: 'SET_LIGHT_STATE', key, value })\r\n    },\r\n    onDispatch(action) {\r\n      dispatch(action)\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Index))\r\n","import { Form, Input } from 'antd'\r\n\r\n//添加编辑查看对话框表单字段\r\nconst getModalFields = () => {\r\n  return (\r\n    <>\r\n      <Form.Item\r\n        label=\"应用名称\"\r\n        name=\"title\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请输入应用名称！',\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n    </>\r\n  )\r\n}\r\n\r\nexport { getModalFields }\r\n"],"sourceRoot":""}