(this.webpackJsonpair=this.webpackJsonpair||[]).push([[11],{115:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p}));var n=a(114),r=(a(65),a(368)),i=a(366),c=a(135),o=a.n(c),l=a(9),d=r.a.TextArea,s=function(e){return function(e){var t={},a=e.split("?");if(a.length<=1)return t;for(var n=0,r=(a=a[1].split("&")).length;n<r;n++){var i=a[n].split("=");t[i[0]]=i[1]}return t}(e.location.search)},u=function(e){var t=/http(s)?:\/\/([A-Za-z0123456789:.-]+)\/\S+/.exec(e);if(t)return"http://"+t[2]},m=function(){return[{id:1,title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",component:Object(l.jsx)(r.a,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(r.a,Object(n.a)({},t))}},{id:2,title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",component:Object(l.jsx)(d,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(d,Object(n.a)({},t))}},{id:3,title:"\u6570\u5b57",formComponentName:"InputNumber",component:Object(l.jsx)(i.a,{style:{width:"100%"}}),getComponent:function(e){var t=e.props;return Object(l.jsx)(i.a,Object(n.a)({style:{width:"100%"}},t))}},{id:4,title:"\u56fe\u7247",formComponentName:"Image",component:Object(l.jsx)("img",{style:{width:"100%"},alt:"\u56fe\u7247"}),getComponent:function(e){var t=e.props;return Object(l.jsx)("img",Object(n.a)(Object(n.a)({style:{width:"100%"}},t),{},{alt:"\u56fe\u7247"}))}}]},p=function(){return[{id:1,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input","TextArea"],render:function(e){return Object(l.jsx)("span",{children:e})}},{id:2,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(l.jsx)("span",{children:e?o()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{id:3,title:"\u56fe\u7247",renderFunName:"renderImage",formComponentNameArr:["Image"],render:function(e){return Object(l.jsx)("img",{alt:"\u56fe\u7247",src:e})}}]}},116:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return g}));var n=a(0),r=a(9);function i(e){var t=e.name,a=e.className,n=e.title;return Object(r.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(a||""),title:n,onClick:e.onClick})}var c=a(361);var o=function(e){var t=e.dataSource,a=e.total,n=e.current,i=e.pageSize,o=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:o(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,a){return e.onRowSelect(t,a)}},pagination:{current:n,total:a,pageSize:i,onChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var l=function(e){var t=e.dataSource,a=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:a(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},d=a(114),s=a(117),u=a(222),m=a(368);function p(e){var t=e.value,a=void 0===t?{}:t,i=e.onChange,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=o[0],p=o[1],f=Object(n.useState)(),j=Object(s.a)(f,2),h=j[0],b=j[1],O=function(e){i(Object(d.a)(Object(d.a)({required:l,message:h},a),e))},g=!1,x="";return a&&"boolean"===typeof a.required?(g=a.required,x=a.message):(g=l,x=h),Object(r.jsxs)("div",{children:[Object(r.jsx)(u.a,{checked:g,onChange:function(e){p(e.target.checked),O({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(r.jsx)(m.a,{className:"m-fields-required-input ".concat(g?"active":""),value:x,onChange:function(e){b(e.target.value),O({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}var f=a(89),j=a(362),h=a(123),b=a(122),O=a(115);function g(e){var t=e.value,a=void 0===t?"":t,n=e.msg,i=e.onChange,c=e.accept,o=void 0===c?".jpg":c,l={uid:"-1",name:a,status:"done",url:a},s=[];a&&s.push(l);var u={name:"file",action:b.a.light.testUpload,maxCount:1,listType:"picture",defaultFileList:[].concat(s),accept:o,onChange:function(e){if("done"===e.file.status){if(f.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),1===e.file.response.state){var t=Object(O.b)("https://efficacious-tiny-infinity.glitch.me/api/upload");console.log(t);var a="".concat(Object(O.b)(e.file.xhr.responseURL),"/").concat(e.file.response.data.filename);console.log(a),i(a)}}else"error"===e.file.status&&f.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return Object(r.jsx)("span",{children:Object(r.jsxs)(j.a,Object(d.a)(Object(d.a)({},u),{},{children:[Object(r.jsx)(h.a,{children:"\u4e0a\u4f20\u56fe\u7247"}),Object(r.jsx)("span",{className:"m-upload-text",children:n})]}))})}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="https://efficacious-tiny-infinity.glitch.me"},121:function(e,t,a){"use strict";var n=a(122),r=a(137),i=a.n(r),c=a(138),o=a(114),l=a(139),d=a.n(l),s=a(89),u=a(119);d.a.defaults.baseURL=u.a,d.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(o.a)({},e.data):e.data=Object(o.a)({},e.data),e}),(function(e){return Promise.reject(e)})),d.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(s.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(c.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={light:{templateSearch:function(e){return m({url:n.a.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:n.a.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:n.a.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:n.a.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:n.a.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:n.a.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:n.a.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:n.a.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:n.a.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:n.a.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:n.a.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:n.a.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:n.a.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:n.a.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:n.a.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:n.a.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:n.a.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:n.a.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:n.a.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:n.a.light.fieldsEdit,data:e,method:"post"})},fieldsEditAll:function(e){return m({url:n.a.light.fieldsEditAll,data:e,method:"post"})}}};t.a=p},122:function(e,t,a){"use strict";var n={light:{testUpload:a(119).a+"/api/upload",templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit",fieldsEditAll:"/api/fields/editAll"}};t.a=n},365:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(61),i=a(114),c=a(6),o=a(369),l=a(360),d=a(345),s=a(363),u=a(368),m=a(123),p=a(117),f=a(373),j=a(49),h=a(116),b=a(9),O=f.a.Step;var g=Object(c.g)((function(e){var t=e.applicationTitle,a=e.routerSearchObj,r=e.onSave,i=Object(n.useState)(0),c=Object(p.a)(i,2),o=c[0],l=c[1],d=[{id:0,title:"\u7f16\u8f91",type:"edit",path:"/light/admin/setApplicationPlus?id=".concat(a.id,"&type=edit")},{id:1,title:"\u76ae\u80a4",type:"skin",path:"/light/admin/setApplicationPlus?id=".concat(a.id,"&type=skin")},{id:2,title:"\u8bbe\u7f6e",type:"set",path:"/light/admin/setApplicationPlus?id=".concat(a.id,"&type=set")},{id:3,title:"\u53d1\u5e03",type:"publish",path:"/light/admin/setApplicationPlus?id=".concat(a.id,"&type=publish")}];return Object(n.useEffect)((function(){var e=d.find((function(e){return e.type===a.type}));l(e.id)}),[]),Object(b.jsxs)("div",{className:"m-design-header",children:[Object(b.jsxs)("div",{className:"m-design-header-title",children:[Object(b.jsx)(h.b,{name:"goback",title:"\u8fd4\u56de",className:"m-set-application-header-icon",onClick:function(){return e.history.go(-1)}}),Object(b.jsx)("span",{title:t,children:t})]}),Object(b.jsx)("div",{className:"m-design-header-middle",children:Object(b.jsx)(f.a,{current:o,onChange:function(t){var a=d.find((function(e){return e.id===t}));e.history.replace(a.path)},children:d.map((function(e){return Object(b.jsx)(O,{title:e.title},e.id)}))})}),Object(b.jsxs)("div",{className:"m-design-header-action",children:[Object(b.jsx)(m.a,{type:"primary",onClick:r,children:"\u4fdd\u5b58"}),Object(b.jsx)(j.b,{to:"/light/formview?id=".concat(a.id),target:"_blank",style:{display:"inherit"},children:Object(b.jsx)(m.a,{children:"\u9884\u89c8"})})]})]})})),x=a(130),y=a(121),v=a(162),S=a(89),I=a(115),A=a(349),C=function(e){var t=e.initValuesForAttr;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(s.a.Item,{label:"\u5b57\u6bb5\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(b.jsx)(u.a,{})}),t.isHasPlaceHolder&&Object(b.jsx)(s.a.Item,{label:"placeholder",name:"placeholder",children:Object(b.jsx)(u.a,{})}),Object(b.jsx)(s.a.Item,{label:"\u82f1\u6587\u540d\u79f0",name:"dataIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(b.jsx)(u.a,{})}),t.isHasRules&&Object(b.jsx)(s.a.Item,{label:"\u5b57\u6bb5\u5fc5\u586b",name:"rules",children:Object(b.jsx)(h.a,{})}),"image"===t.type&&Object(b.jsx)(s.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247",name:"src",children:Object(b.jsx)(h.e,{})})]})},N=v.a.confirm,F=[];function H(e){var t=s.a.useForm(),a=Object(p.a)(t,1)[0],r=s.a.useForm(),c=Object(p.a)(r,1)[0],o=Object(n.useState)([]),l=Object(p.a)(o,2),d=l[0],u=l[1],m=Object(n.useState)(),f=Object(p.a)(m,2),j=f[0],h=f[1],b=Object(n.useState)(),O=Object(p.a)(b,2),g=O[0],v=O[1],C=Object(n.useState)({}),H=Object(p.a)(C,2),T=H[0],D=H[1],E=Object(I.d)(e),w=E.id,P=function(){y.a.light.fieldsSearch({tableId:w}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));u(t),h(e.data.title),Array.isArray(t)&&t.length>0&&R({id:t[0].id,myDataSource:t})}}))},R=function(e){var t=e.id,a=e.myDataSource,n=void 0===a?d:a;v(t);var r=n.find((function(e){return e.id===t})),c=Array.isArray(r.rules)&&r.rules.length>0?r.rules[0]:{message:"".concat(r.title,"\u4e0d\u80fd\u4e3a\u7a7a")};D(Object(i.a)(Object(i.a)({},r),{},{rules:c}))};return Object(n.useEffect)((function(){c.resetFields()}),[T]),Object(n.useEffect)((function(){P()}),[]),Object(n.useEffect)((function(){F=d}),[d]),{form:a,formForAttr:c,initValuesForAttr:T,dataSource:d,applicationTitle:j,addInitValues:{},routerSearchObj:E,cardActiveId:g,handleSearch:P,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),N({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=d.filter((function(e){return e.id!==t.id}));u(e),Array.isArray(e)&&e.length>0?t.id===g&&R({id:e[0].id,myDataSource:e}):v(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,a=F.map((function(e){return e.orderIndex})),n=Math.max.apply(Math,a)+1,r=Object(A.a)(),c={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:n};console.log(Object(i.a)(Object(i.a)({},t),c)),console.log(F);var o=[].concat(Object(x.a)(F),[Object(i.a)(Object(i.a)({},t),c)]);u(o),Array.isArray(o)&&o.length>0&&R({id:r,myDataSource:o})},handleSave:function(){console.log(d);var e=d.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{orderIndex:t+1})}));console.log(e),y.a.light.fieldsEditAll({tableId:w,dataItem:e}).then((function(e){200===e.code&&S.b.success(e.message)}))},handleCardActiveId:R,handleValuesChange:function(e,t){var a=c.getFieldsValue();console.log(a);var n=d.findIndex((function(e){return e.id===g})),r={rules:[t.rules],props:{placeholder:t.placeholder}};d[n]=Object(i.a)(Object(i.a)(Object(i.a)({},d[n]),t),r),u(Object(x.a)(d))},handleGetChildPayload:function(e){var t=e.type,a=e.index;if("tool"===t){var n=Object(A.a)(),r=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],c=F.map((function(e){return e.orderIndex})),o=Math.max.apply(Math,c)+1,l=r[a],s={id:n,dataIndex:"".concat(l.dataIndex,"-").concat(n),isModalField:!0,orderIndex:o};return Object(i.a)(Object(i.a)({},l),s)}if("content"===t)return d[a]},handleCardDrop:function(e){var t=e.type,a=e.dragResult;if("tool"===t);else if("content"===t){var n=function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return e;var i=Object(x.a)(e),c=r;return null!==a&&(c=i.splice(a,1)[0]),null!==n&&i.splice(n,0,c),i}(d,a);u(n),Array.isArray(n)&&n.length>0&&R({id:a.payload.id,myDataSource:n})}}}}var T=a(178),D=o.a.Panel;var E=Object(r.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=H(e),a=t.applicationTitle,n=t.dataSource,r=t.form,c=t.formForAttr,p=t.initValues,f=t.initValuesForAttr,j=t.routerSearchObj,O=t.cardActiveId,x=t.handleFinish,y=t.handleFinishFailed,v=t.handleAdd,S=t.handleSave,A=t.handleCardActiveId,N=t.handleValuesChange,F=t.handleDelete,E=t.handleGetChildPayload,w=t.handleCardDrop;return Object(b.jsxs)("div",{className:"m-admin-content",children:[Object(b.jsx)(g,{applicationTitle:a,routerSearchObj:j,onSave:S}),Object(b.jsxs)("div",{className:"m-design-wrap",children:[Object(b.jsx)("div",{className:"m-design-sidebar",children:Object(b.jsxs)(o.a,{defaultActiveKey:["1","2","3"],children:[Object(b.jsx)(D,{header:"\u901a\u7528\u5b57\u6bb5",children:Object(b.jsx)("div",{className:"m-design-sidebar-container",children:Object(b.jsx)(T.Container,{orientation:"horizontal",onDrop:function(e){return w({type:"tool",dragResult:e})},getChildPayload:function(e){return E({type:"tool",index:e})},behaviour:"copy",groupName:"col",children:[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}].map((function(e){return Object(b.jsx)(T.Draggable,{children:Object(b.jsxs)("div",{className:"m-component-item",onClick:function(){return v({fieldInfo:e})},children:[Object(b.jsx)("div",{children:Object(b.jsx)(h.b,{name:e.icon})}),Object(b.jsx)("div",{children:e.title})]})},e.id)}))})})},"1"),Object(b.jsx)(D,{header:"\u8054\u7cfb\u4fe1\u606f\u5b57\u6bb5",children:Object(b.jsx)(l.a,{gutter:[2,2],children:Object(b.jsx)(d.a,{span:8,children:Object(b.jsxs)("div",{className:"m-component-item",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"2"),Object(b.jsx)(D,{header:"\u5546\u54c1\u5b57\u6bb5",children:Object(b.jsx)(l.a,{gutter:[2,2],children:Object(b.jsx)(d.a,{span:8,children:Object(b.jsxs)("div",{className:"m-component-item",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"3")]})}),Object(b.jsx)("div",{className:"m-design-content",children:Object(b.jsxs)(s.a,{form:r,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(i.a)({},p),onFinish:x,onFinishFailed:y,children:[Object(b.jsx)("div",{className:"m-design-card-wrap",children:Object(b.jsx)(T.Container,{orientation:"vertical",onDrop:function(e){return w({type:"content",dragResult:e})},getChildPayload:function(e){return E({type:"content",index:e})},groupName:"col",children:n.map((function(e){var t=Object(I.a)().find((function(t){return t.formComponentName===e.formComponentName}));return Object(b.jsx)(T.Draggable,{children:Object(b.jsxs)("div",{className:"m-design-card ".concat(O===e.id?"active":""),onClick:function(){return A({id:e.id})},children:[Object(b.jsxs)("div",{className:"m-design-card-info",children:["formItem"===e.type&&Object(b.jsx)(s.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,children:t?t.getComponent({props:e.props}):Object(b.jsx)(u.a,{})},e.id),"image"===e.type&&Object(b.jsx)(s.a.Item,{name:e.dataIndex,wrapperCol:24,children:t?t.getComponent({props:{src:e.src}}):Object(b.jsx)(u.a,{})},e.id)]}),Object(b.jsx)("div",{className:"m-design-card-action ".concat(O===e.id?"active":""),children:Object(b.jsx)(h.b,{name:"delete",className:"m-design-card-delete",onClick:function(t){return F(t,e)}})})]})},e.id)}))})}),Object(b.jsxs)(s.a.Item,{wrapperCol:{offset:4,span:17},className:"m-design-footer",children:[Object(b.jsxs)(m.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(b.jsx)(h.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(b.jsxs)(m.a,{className:"m-space",onClick:function(){r.resetFields()},children:[Object(b.jsx)(h.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]})]})}),Object(b.jsx)("div",{className:"m-design-attr",children:Object(b.jsx)(s.a,{form:c,labelCol:{span:8},wrapperCol:{span:15},initialValues:Object(i.a)({},f),scrollToFirstError:!0,onValuesChange:N,onFinish:x,id:"m-set-application-modal-form",className:"m-set-application-modal-form",children:O?C({initValuesForAttr:f}):Object(b.jsx)("div",{className:"m-empty-text",children:"\u8bf7\u9009\u62e9\u5b57\u6bb5"})})})]})]})}))),w=v.a.confirm,P=[];function R(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),l=Object(p.a)(o,2),d=l[0],s=l[1],u=Object(n.useState)(),m=Object(p.a)(u,2),f=m[0],j=m[1],h=Object(n.useState)({}),b=Object(p.a)(h,2),O=b[0],g=b[1],v=Object(I.d)(e),C=v.id,N=function(){y.a.light.fieldsSearch({tableId:C}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),s(e.data.title),Array.isArray(t)&&t.length>0&&F({id:t[0].id,myDataSource:t})}}))},F=function(e){var t=e.id,a=e.myDataSource,n=void 0===a?r:a;j(t);var c=n.find((function(e){return e.id===t})),o=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(i.a)(Object(i.a)({},c),{},{rules:o}))};return Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){P=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:d,addInitValues:{},routerSearchObj:v,cardActiveId:f,handleSearch:N,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),w({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&F({id:e[0].id,myDataSource:e}):j(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,a=P.map((function(e){return e.orderIndex})),n=Math.max.apply(Math,a)+1,r=Object(A.a)(),o={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:n};console.log(Object(i.a)(Object(i.a)({},t),o)),console.log(P);var l=[].concat(Object(x.a)(P),[Object(i.a)(Object(i.a)({},t),o)]);c(l),Array.isArray(l)&&l.length>0&&F({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{orderIndex:t+1})}));console.log(e),y.a.light.fieldsEditAll({tableId:C,dataItem:e}).then((function(e){200===e.code&&S.b.success(e.message)}))},handleCardActiveId:F,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,a=e.index;if("tool"===t){var n=Object(A.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],o=P.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,o)+1,d=c[a],s={id:n,dataIndex:"".concat(d.dataIndex,"-").concat(n),isModalField:!0,orderIndex:l};return Object(i.a)(Object(i.a)({},d),s)}if("content"===t)return r[a]},handleCardDrop:function(e){var t=e.type,a=e.dragResult;if("tool"===t);else if("content"===t){var n=function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return e;var i=Object(x.a)(e),c=r;return null!==a&&(c=i.splice(a,1)[0]),null!==n&&i.splice(n,0,c),i}(r,a);c(n),Array.isArray(n)&&n.length>0&&F({id:a.payload.id,myDataSource:n})}}}}var k=Object(r.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=R(e),a=t.applicationTitle,n=t.routerSearchObj,r=t.handleSave;return Object(b.jsxs)("div",{className:"m-admin-content",children:[Object(b.jsx)(g,{applicationTitle:a,routerSearchObj:n,onSave:r}),Object(b.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})}))),M=v.a.confirm,V=[];function _(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),l=Object(p.a)(o,2),d=l[0],s=l[1],u=Object(n.useState)(),m=Object(p.a)(u,2),f=m[0],j=m[1],h=Object(n.useState)({}),b=Object(p.a)(h,2),O=b[0],g=b[1],v=Object(I.d)(e),C=v.id,N=function(){y.a.light.fieldsSearch({tableId:C}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),s(e.data.title),Array.isArray(t)&&t.length>0&&F({id:t[0].id,myDataSource:t})}}))},F=function(e){var t=e.id,a=e.myDataSource,n=void 0===a?r:a;j(t);var c=n.find((function(e){return e.id===t})),o=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(i.a)(Object(i.a)({},c),{},{rules:o}))};return Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){V=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:d,addInitValues:{},routerSearchObj:v,cardActiveId:f,handleSearch:N,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),M({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&F({id:e[0].id,myDataSource:e}):j(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,a=V.map((function(e){return e.orderIndex})),n=Math.max.apply(Math,a)+1,r=Object(A.a)(),o={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:n};console.log(Object(i.a)(Object(i.a)({},t),o)),console.log(V);var l=[].concat(Object(x.a)(V),[Object(i.a)(Object(i.a)({},t),o)]);c(l),Array.isArray(l)&&l.length>0&&F({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{orderIndex:t+1})}));console.log(e),y.a.light.fieldsEditAll({tableId:C,dataItem:e}).then((function(e){200===e.code&&S.b.success(e.message)}))},handleCardActiveId:F,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,a=e.index;if("tool"===t){var n=Object(A.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],o=V.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,o)+1,d=c[a],s={id:n,dataIndex:"".concat(d.dataIndex,"-").concat(n),isModalField:!0,orderIndex:l};return Object(i.a)(Object(i.a)({},d),s)}if("content"===t)return r[a]},handleCardDrop:function(e){var t=e.type,a=e.dragResult;if("tool"===t);else if("content"===t){var n=function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return e;var i=Object(x.a)(e),c=r;return null!==a&&(c=i.splice(a,1)[0]),null!==n&&i.splice(n,0,c),i}(r,a);c(n),Array.isArray(n)&&n.length>0&&F({id:a.payload.id,myDataSource:n})}}}}var G=Object(r.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=_(e),a=t.applicationTitle,n=t.routerSearchObj,r=t.handleSave;return Object(b.jsxs)("div",{className:"m-admin-content",children:[Object(b.jsx)(g,{applicationTitle:a,routerSearchObj:n,onSave:r}),Object(b.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})}))),z=v.a.confirm,q=[];function L(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),l=Object(p.a)(o,2),d=l[0],s=l[1],u=Object(n.useState)(),m=Object(p.a)(u,2),f=m[0],j=m[1],h=Object(n.useState)({}),b=Object(p.a)(h,2),O=b[0],g=b[1],v=Object(I.d)(e),C=v.id,N=function(){y.a.light.fieldsSearch({tableId:C}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),s(e.data.title),Array.isArray(t)&&t.length>0&&F({id:t[0].id,myDataSource:t})}}))},F=function(e){var t=e.id,a=e.myDataSource,n=void 0===a?r:a;j(t);var c=n.find((function(e){return e.id===t})),o=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(i.a)(Object(i.a)({},c),{},{rules:o}))};return Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){q=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:d,addInitValues:{},routerSearchObj:v,cardActiveId:f,handleSearch:N,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),z({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&F({id:e[0].id,myDataSource:e}):j(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,a=q.map((function(e){return e.orderIndex})),n=Math.max.apply(Math,a)+1,r=Object(A.a)(),o={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:n};console.log(Object(i.a)(Object(i.a)({},t),o)),console.log(q);var l=[].concat(Object(x.a)(q),[Object(i.a)(Object(i.a)({},t),o)]);c(l),Array.isArray(l)&&l.length>0&&F({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{orderIndex:t+1})}));console.log(e),y.a.light.fieldsEditAll({tableId:C,dataItem:e}).then((function(e){200===e.code&&S.b.success(e.message)}))},handleCardActiveId:F,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,a=e.index;if("tool"===t){var n=Object(A.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],o=q.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,o)+1,d=c[a],s={id:n,dataIndex:"".concat(d.dataIndex,"-").concat(n),isModalField:!0,orderIndex:l};return Object(i.a)(Object(i.a)({},d),s)}if("content"===t)return r[a]},handleCardDrop:function(e){var t=e.type,a=e.dragResult;if("tool"===t);else if("content"===t){var n=function(e,t){var a=t.removedIndex,n=t.addedIndex,r=t.payload;if(null===a&&null===n)return e;var i=Object(x.a)(e),c=r;return null!==a&&(c=i.splice(a,1)[0]),null!==n&&i.splice(n,0,c),i}(r,a);c(n),Array.isArray(n)&&n.length>0&&F({id:a.payload.id,myDataSource:n})}}}}var U=Object(r.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=L(e),a=t.applicationTitle,n=t.routerSearchObj,r=t.handleSave;return Object(b.jsxs)("div",{className:"m-admin-content",children:[Object(b.jsx)(g,{applicationTitle:a,routerSearchObj:n,onSave:r}),Object(b.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})})));t.default=Object(r.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))((function(e){var t=Object(I.d)(e),a=function(){var e={edit:{component:Object(b.jsx)(E,{})},skin:{component:Object(b.jsx)(k,{})},set:{component:Object(b.jsx)(G,{})},publish:{component:Object(b.jsx)(U,{})}};return t.type?e[t.type]?e[t.type].component:null:Object(b.jsx)(E,{})};return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(b.Fragment,{children:a()})})}))}}]);