(this.webpackJsonpair=this.webpackJsonpair||[]).push([[9,4],{116:function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return j}));var a=n(114),r=(n(66),n(374)),c=n(371),o=n(370),i=n(160),l=n.n(i),s=n(33),d=n(7),u=r.a.TextArea,m=function(e){return function(e){var t={},n=e.split("?");if(n.length<=1)return t;for(var a=0,r=(n=n[1].split("&")).length;a<r;a++){var c=n[a].split("=");t[c[0]]=c[1]}return t}(e.location.search)},f=function(e){var t=/http(s)?:\/\/([A-Za-z0123456789:.-]+)\/\S+/.exec(e);if(t)return"http://"+t[2]},p=function(){return[{id:1,title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",component:Object(d.jsx)(r.a,{}),getComponent:function(e){var t=e.props;return Object(d.jsx)(r.a,Object(a.a)({},t))}},{id:2,title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",component:Object(d.jsx)(u,{}),getComponent:function(e){var t=e.props;return Object(d.jsx)(u,Object(a.a)({},t))}},{id:3,title:"\u6570\u5b57",formComponentName:"InputNumber",component:Object(d.jsx)(c.a,{style:{width:"100%"}}),getComponent:function(e){var t=e.props;return Object(d.jsx)(c.a,Object(a.a)({style:{width:"100%"}},t))}},{id:4,title:"\u56fe\u7247",formComponentName:"Image",component:Object(d.jsx)("img",{style:{width:"100%"},alt:"\u56fe\u7247"}),getComponent:function(e){var t=e.props;return Object(d.jsx)("img",Object(a.a)(Object(a.a)({style:{width:"100%"}},t),{},{alt:"\u56fe\u7247"}))}}]},b=function(){return[{id:1,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input","TextArea"],render:function(e){return Object(d.jsx)("span",{children:e})}},{id:2,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(d.jsx)("span",{children:e?l()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{id:3,title:"\u56fe\u7247",renderFunName:"renderImage",formComponentNameArr:["Image"],render:function(e){return Object(d.jsx)("img",{alt:"\u56fe\u7247",src:e})}}]},h=function(e){var t=[];return e.forEach((function(e){if(e.isModalField){var n=p().find((function(t){return t.formComponentName===e.formComponentName}));"formItem"===e.type?t.push(Object(d.jsx)(o.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,className:"m-formview-formitem",children:n?n.getComponent({props:e.props}):Object(d.jsx)(r.a,{})},e.id)):"image"===e.type&&t.push(Object(d.jsx)(o.a.Item,{name:e.dataIndex,wrapperCol:24,children:n?n.getComponent({props:{src:e.src}}):Object(d.jsx)(r.a,{})},e.id))}})),t},j=function(e){var t=e.router,n=e.authData,r=void 0===n?[]:n,c=e.isForTable,o=void 0!==c&&c;t=v(t);var i=[];return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=function(c){var s=r.find((function(e){return e.path===t[c].path||e.path===t[c].key}));if(s){var d=Array.isArray(s.auth)&&s.auth.find((function(e){return"check"===e.name}));t[c].isVisible=!!d&&d.isVisible}if(Array.isArray(t[c].auth)){t[c].auth.forEach((function(e){if(s&&Array.isArray(s.auth)){var t=s.auth.find((function(t){return t.name===e.name}));e.isVisible=!!t&&t.isVisible}else"check"===e.name?e.isVisible=!0:e.isVisible=!1}));var u="";t[c].path?u=t[c].path:t[c].key&&(u=t[c].key),i.push({path:u,auth:v(t[c].auth)})}if(t[c].dataRange){s&&s.dataRange&&s.dataRange.value?t[c].dataRange.value=s.dataRange.value:t[c].dataRange.value=1;var m=i.findIndex((function(e){return e.path===t[c].path}));m>=0&&(i[m]=Object(a.a)(Object(a.a)({},i[m]),{},{dataRange:v(t[c].dataRange)}))}Array.isArray(t[c].children)&&t[c].children.length>0?(t[c].id="".concat(n).concat(c+1),e(t[c].children,"".concat(n).concat(c+1))):(t[c].id="".concat(n).concat(c+1),!0===t[c].isDevMenu&&o&&(t.splice(c,1),c-=1)),l=c},l=0;l<t.length;l++)c(l)}(t),{newRouter:t,newRouterAuthDataArr:i}},v=function(e){return Object(s.fromJS)(e).toJS()}},119:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return g}));var a=n(120),r=n(0),c=n(365),o=n(7);var i=function(e){var t=e.dataSource,n=e.total,a=e.current,r=e.pageSize,i=e.getColumns;return Object(o.jsx)("div",{className:"m-content-table",children:Object(o.jsx)(c.a,{className:"m-my-table",columns:i(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,n){return e.onRowSelect(t,n)}},pagination:{current:a,total:n,pageSize:r,onChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showSizeChanger:!0,pageSizeOptions:[10,20,50,300],onShowSizeChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showTotal:function(e){return Object(o.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(o.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var l=n(114),s=n(117),d=n(226),u=n(374);function m(e){var t=e.value,n=void 0===t?{}:t,a=e.onChange,c=Object(r.useState)(!1),i=Object(s.a)(c,2),m=i[0],f=i[1],p=Object(r.useState)(),b=Object(s.a)(p,2),h=b[0],j=b[1],v=function(e){a(Object(l.a)(Object(l.a)({required:m,message:h},n),e))},O=!1,g="";return n&&"boolean"===typeof n.required?(O=n.required,g=n.message):(O=m,g=h),Object(o.jsxs)("div",{children:[Object(o.jsx)(d.a,{checked:O,onChange:function(e){f(e.target.checked),v({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(o.jsx)(u.a,{className:"m-fields-required-input ".concat(O?"active":""),value:g,onChange:function(e){j(e.target.value),v({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}var f=n(89),p=n(368),b=n(132),h=n(126),j=n(116);function v(e){var t=e.value,n=void 0===t?"":t,a=e.msg,r=e.onChange,c=e.accept,i=void 0===c?".jpg":c,s={uid:"-1",name:n,status:"done",url:n},d=[];n&&d.push(s);var u={name:"file",action:h.a.light.testUpload,maxCount:1,listType:"picture",defaultFileList:[].concat(d),accept:i,onChange:function(e){if("done"===e.file.status){if(f.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),1===e.file.response.state){var t=Object(j.d)("https://efficacious-tiny-infinity.glitch.me/api/upload");console.log(t);var n="".concat(Object(j.d)(e.file.xhr.responseURL),"/").concat(e.file.response.data.filename);console.log(n),r(n)}}else"error"===e.file.status&&f.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return Object(o.jsx)("span",{children:Object(o.jsxs)(p.a,Object(l.a)(Object(l.a)({},u),{},{children:[Object(o.jsx)(b.a,{children:"\u4e0a\u4f20\u56fe\u7247"}),Object(o.jsx)("span",{className:"m-upload-text",children:a})]}))})}var O=n(375);function g(){return Object(o.jsx)(O.a,{className:"m-back-top",target:function(){var e=document.getElementById("m-content-wrap");return e||window}})}},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(0);var a=n(7);function r(e){var t=e.name,n=e.className,r=e.title;return Object(a.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(n||""),title:r,onClick:e.onClick})}},122:function(e,t,n){"use strict";var a=n(126),r=n(161),c=n.n(r),o=n(162),i=n(114),l=n(163),s=n.n(l),d=n(89),u=n(125);s.a.defaults.baseURL=u.a,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(i.a)({},e.data):e.data=Object(i.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(d.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={light:{templateSearch:function(e){return m({url:a.a.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:a.a.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:a.a.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:a.a.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:a.a.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:a.a.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:a.a.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:a.a.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:a.a.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:a.a.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:a.a.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:a.a.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:a.a.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:a.a.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:a.a.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:a.a.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:a.a.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:a.a.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:a.a.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:a.a.light.fieldsEdit,data:e,method:"post"})},fieldsEditAll:function(e){return m({url:a.a.light.fieldsEditAll,data:e,method:"post"})}}};t.a=f},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="https://efficacious-tiny-infinity.glitch.me"},126:function(e,t,n){"use strict";var a={light:{testUpload:n(125).a+"/api/upload",templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit",fieldsEditAll:"/api/fields/editAll"}};t.a=a},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var a=n(114),r=n(122),c=(n(116),function(e){return function(t){r.a.light.routerSearch().then((function(n){200===n.code&&(t({type:"SET_LIGHT_STATE",key:["routerForApp"],value:n.data}),e&&e())}))}}),o=function(){return function(e){var t=localStorage.getItem("userInfoAdmin")?JSON.parse(localStorage.getItem("userInfoAdmin")):{};e({type:"SET_LIGHT_STATE",key:["userInfo"],value:Object(a.a)({},t)})}}},165:function(e,t,n){"use strict";var a=n(2),r=n(5),c=n(0),o=n(185),i=n(1),l=n(12),s=n.n(l),d=n(127),u=n(151),m=n(60);function f(e){var t=e.prefixCls,n=e.style,r=e.visible,o=e.maskProps,l=e.motionName;return c.createElement(m.b,{key:"mask",visible:r,motionName:l,leavedClassName:"".concat(t,"-mask-hidden")},(function(e){var r=e.className,l=e.style;return c.createElement("div",Object(a.a)({style:Object(i.a)(Object(i.a)({},l),n),className:s()("".concat(t,"-mask"),r)},o))}))}function p(e,t,n){var a=t;return!a&&n&&(a="".concat(e,"-").concat(n)),a}var b=-1;function h(e,t){var n=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var r=e.document;"number"!==typeof(n=r.documentElement[a])&&(n=r.body[a])}return n}var j=c.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),v={width:0,height:0,overflow:"hidden",outline:"none"},O=c.forwardRef((function(e,t){var n=e.closable,o=e.prefixCls,l=e.width,d=e.height,u=e.footer,f=e.title,p=e.closeIcon,b=e.style,O=e.className,g=e.visible,y=e.forceRender,x=e.bodyStyle,C=e.bodyProps,N=e.children,I=e.destroyOnClose,S=e.modalRender,k=e.motionName,E=e.ariaId,A=e.onClose,T=e.onVisibleChanged,w=e.onMouseDown,P=e.onMouseUp,F=e.mousePosition,R=Object(c.useRef)(),D=Object(c.useRef)(),H=Object(c.useRef)();c.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=R.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===D.current?R.current.focus():e||t!==R.current||D.current.focus()}}}));var M,V,L,z=c.useState(),K=Object(r.a)(z,2),_=K[0],U=K[1],G={};function q(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},a=e.ownerDocument,r=a.defaultView||a.parentWindow;return n.left+=h(r),n.top+=h(r,!0),n}(H.current);U(F?"".concat(F.x-e.left,"px ").concat(F.y-e.top,"px"):"")}void 0!==l&&(G.width=l),void 0!==d&&(G.height=d),_&&(G.transformOrigin=_),u&&(M=c.createElement("div",{className:"".concat(o,"-footer")},u)),f&&(V=c.createElement("div",{className:"".concat(o,"-header")},c.createElement("div",{className:"".concat(o,"-title"),id:E},f))),n&&(L=c.createElement("button",{type:"button",onClick:A,"aria-label":"Close",className:"".concat(o,"-close")},p||c.createElement("span",{className:"".concat(o,"-close-x")})));var W=c.createElement("div",{className:"".concat(o,"-content")},L,V,c.createElement("div",Object(a.a)({className:"".concat(o,"-body"),style:x},C),N),M);return c.createElement(m.b,{visible:g,onVisibleChanged:T,onAppearPrepare:q,onEnterPrepare:q,forceRender:y,motionName:k,removeOnLeave:I,ref:H},(function(e,t){var n=e.className,a=e.style;return c.createElement("div",{key:"dialog-element",role:"document",ref:t,style:Object(i.a)(Object(i.a)(Object(i.a)({},a),b),G),className:s()(o,O,n),onMouseDown:w,onMouseUp:P},c.createElement("div",{tabIndex:0,ref:R,style:v,"aria-hidden":"true"}),c.createElement(j,{shouldUpdate:g||y},S?S(W):W),c.createElement("div",{tabIndex:0,ref:D,style:v,"aria-hidden":"true"}))}))}));O.displayName="Content";var g=O;function y(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,o=e.zIndex,l=e.visible,m=void 0!==l&&l,h=e.keyboard,j=void 0===h||h,v=e.focusTriggerAfterClose,O=void 0===v||v,y=e.scrollLocker,x=e.title,C=e.wrapStyle,N=e.wrapClassName,I=e.wrapProps,S=e.onClose,k=e.afterClose,E=e.transitionName,A=e.animation,T=e.closable,w=void 0===T||T,P=e.mask,F=void 0===P||P,R=e.maskTransitionName,D=e.maskAnimation,H=e.maskClosable,M=void 0===H||H,V=e.maskStyle,L=e.maskProps,z=Object(c.useRef)(),K=Object(c.useRef)(),_=Object(c.useRef)(),U=c.useState(m),G=Object(r.a)(U,2),q=G[0],W=G[1],B=Object(c.useRef)();function J(e){null===S||void 0===S||S(e)}B.current||(B.current="rcDialogTitle".concat(b+=1));var Y=Object(c.useRef)(!1),X=Object(c.useRef)(),Z=null;return M&&(Z=function(e){Y.current?Y.current=!1:K.current===e.target&&J(e)}),Object(c.useEffect)((function(){return m&&W(!0),function(){}}),[m]),Object(c.useEffect)((function(){return function(){clearTimeout(X.current)}}),[]),Object(c.useEffect)((function(){return q?(null===y||void 0===y||y.lock(),null===y||void 0===y?void 0:y.unLock):function(){}}),[q,y]),c.createElement("div",{className:"".concat(n,"-root")},c.createElement(f,{prefixCls:n,visible:F&&m,motionName:p(n,R,D),style:Object(i.a)({zIndex:o},V),maskProps:L}),c.createElement("div",Object(a.a)({tabIndex:-1,onKeyDown:function(e){if(j&&e.keyCode===d.a.ESC)return e.stopPropagation(),void J(e);m&&e.keyCode===d.a.TAB&&_.current.changeActive(!e.shiftKey)},className:s()("".concat(n,"-wrap"),N),ref:K,onClick:Z,role:"dialog","aria-labelledby":x?B.current:null,style:Object(i.a)(Object(i.a)({zIndex:o},C),{},{display:q?null:"none"})},I),c.createElement(g,Object(a.a)({},e,{onMouseDown:function(){clearTimeout(X.current),Y.current=!0},onMouseUp:function(){X.current=setTimeout((function(){Y.current=!1}))},ref:_,closable:w,ariaId:B.current,prefixCls:n,visible:m,onClose:J,onVisibleChanged:function(e){if(e){var t;if(!Object(u.a)(K.current,document.activeElement))z.current=document.activeElement,null===(t=_.current)||void 0===t||t.focus()}else{if(W(!1),F&&z.current&&O){try{z.current.focus({preventScroll:!0})}catch(n){}z.current=null}q&&(null===k||void 0===k||k())}},motionName:p(n,E,A)}))))}var x=function(e){var t=e.visible,n=e.getContainer,i=e.forceRender,l=e.destroyOnClose,s=void 0!==l&&l,d=e.afterClose,u=c.useState(t),m=Object(r.a)(u,2),f=m[0],p=m[1];return c.useEffect((function(){t&&p(!0)}),[t]),!1===n?c.createElement(y,Object(a.a)({},e,{getOpenCount:function(){return 2}})):i||!s||f?c.createElement(o.a,{visible:t,forceRender:i,getContainer:n},(function(t){return c.createElement(y,Object(a.a)({},e,{destroyOnClose:s,afterClose:function(){null===d||void 0===d||d(),p(!1)}},t))})):null};x.displayName="Dialog";var C=x;t.a=C},170:function(e,t,n){"use strict";var a=n(194);t.a=a.a},185:function(e,t,n){"use strict";var a=n(10),r=n(13),c=n(16),o=n(71),i=n(54),l=n(9),s=n(0),d=n(50),u=n(171),m=n(26),f=n(138);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};var n=t.element,a=void 0===n?document.body:n,r={},c=Object.keys(e);return c.forEach((function(e){r[e]=a.style[e]})),c.forEach((function(t){a.style[t]=e[t]})),r};var b={},h=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),a=document.body.className;if(e){if(!n.test(a))return;return p(b),b={},void(document.body.className=a.replace(n,"").trim())}var r=Object(f.a)();if(r&&(b=p({position:"relative",width:"calc(100% - ".concat(r,"px)")}),!n.test(a))){var c="".concat(a," ").concat(t);document.body.className=c.trim()}}},j=n(3),v=[],O="ant-scrolling-effect",g=new RegExp("".concat(O),"g"),y=0,x=new Map,C=function e(t){var n=this;Object(a.a)(this,e),this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=v.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!v.some((function(e){return e.target===n.lockTarget})))if(v.some((function(e){var t,a=e.options;return(null===a||void 0===a?void 0:a.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))v=[].concat(Object(j.a)(v),[{target:n.lockTarget,options:n.options}]);else{var t=0,a=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(a===document.body&&window.innerWidth-document.documentElement.clientWidth>0||a.scrollHeight>a.clientHeight)&&(t=Object(f.a)());var r=a.className;if(0===v.filter((function(e){var t,a=e.options;return(null===a||void 0===a?void 0:a.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&x.set(a,p({width:"calc(100% - ".concat(t,"px)"),overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:a})),!g.test(r)){var c="".concat(r," ").concat(O);a.className=c.trim()}v=[].concat(Object(j.a)(v),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=v.find((function(e){return e.target===n.lockTarget}));if(v=v.filter((function(e){return e.target!==n.lockTarget})),t&&!v.some((function(e){var n,a=e.options;return(null===a||void 0===a?void 0:a.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var a=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,r=a.className;g.test(r)&&(p(x.get(a),{element:a}),x.delete(a),a.className=a.className.replace(g,"").trim())}},this.lockTarget=y++,this.options=t};function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.a)(e);if(t){var r=Object(i.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var I=0,S=Object(m.a)();var k={},E=function(e){if(!S)return null;if(e){if("string"===typeof e)return document.querySelectorAll(e)[0];if("function"===typeof e)return e();if("object"===Object(l.a)(e)&&e instanceof window.HTMLElement)return e}return document.body},A=function(e){Object(c.a)(n,e);var t=N(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).componentRef=s.createRef(),r.updateScrollLocker=function(e){var t=(e||{}).visible,n=r.props,a=n.getContainer,c=n.visible;c&&c!==t&&S&&E(a)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:E(a)})},r.updateOpenCount=function(e){var t=e||{},n=t.visible,a=t.getContainer,c=r.props,o=c.visible,i=c.getContainer;o!==n&&S&&E(i)===document.body&&(o&&!n?I+=1:e&&(I-=1)),("function"===typeof i&&"function"===typeof a?i.toString()!==a.toString():i!==a)&&r.removeCurrentContainer()},r.attachToParent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||r.container&&!r.container.parentNode){var t=E(r.props.getContainer);return!!t&&(t.appendChild(r.container),!0)}return!0},r.getContainer=function(){return S?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null},r.setWrapperClassName=function(){var e=r.props.wrapperClassName;r.container&&e&&e!==r.container.className&&(r.container.className=e)},r.removeCurrentContainer=function(){var e,t;null===(e=r.container)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(r.container)},r.switchScrollingEffect=function(){1!==I||Object.keys(k).length?I||(p(k),k={},h(!0)):(h(),k=p({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},r.scrollLocker=new C({container:E(e.getContainer)}),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Object(d.a)((function(){e.forceUpdate()})))}},{key:"componentDidUpdate",value:function(e){this.updateOpenCount(e),this.updateScrollLocker(e),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visible,n=e.getContainer;S&&E(n)===document.body&&(I=t&&I?I-1:I),this.removeCurrentContainer(),d.a.cancel(this.rafId)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.forceRender,a=e.visible,r=null,c={getOpenCount:function(){return I},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(n||a||this.componentRef.current)&&(r=s.createElement(u.a,{getContainer:this.getContainer,ref:this.componentRef},t(c))),r}}]),n}(s.Component);t.a=A},190:function(e,t,n){"use strict";var a=n(231);t.a=a.a},354:function(e,t,n){"use strict";var a=n(4),r=n(2),c=n(0),o=n(165),i=n(12),l=n.n(i),s=n(63),d=n(3),u=n(5);var m=n(132),f=n(146),p=function(e){var t=c.useRef(!1),n=c.useRef(),a=c.useState(!1),o=Object(u.a)(a,2),i=o[0],l=o[1];c.useEffect((function(){var t;if(e.autoFocus){var a=n.current;t=setTimeout((function(){return a.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var s=e.type,d=e.children,p=e.prefixCls,b=e.buttonProps;return c.createElement(m.a,Object(r.a)({},Object(f.a)(s),{onClick:function(){var n=e.actionFn,a=e.closeModal;if(!t.current)if(t.current=!0,n){var r;if(n.length)r=n(a),t.current=!1;else if(!(r=n()))return void a();!function(n){var a=e.closeModal;n&&n.then&&(l(!0),n.then((function(){a.apply(void 0,arguments)}),(function(e){console.error(e),l(!1),t.current=!1})))}(r)}else a()},loading:i,prefixCls:p},b,{ref:n}),d)},b=n(58),h=n(25),j=n(124),v=function(e){var t=e.icon,n=e.onCancel,r=e.onOk,o=e.close,i=e.zIndex,s=e.afterClose,d=e.visible,u=e.keyboard,m=e.centered,f=e.getContainer,v=e.maskStyle,O=e.okText,g=e.okButtonProps,y=e.cancelText,x=e.cancelButtonProps,C=e.direction,N=e.prefixCls,I=e.rootPrefixCls,S=e.bodyStyle,k=e.closable,E=void 0!==k&&k,A=e.closeIcon,T=e.modalRender,w=e.focusTriggerAfterClose;Object(b.a)(!("string"===typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var P=e.okType||"primary",F="".concat(N,"-confirm"),R=!("okCancel"in e)||e.okCancel,D=e.width||416,H=e.style||{},M=void 0===e.mask||e.mask,V=void 0!==e.maskClosable&&e.maskClosable,L=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),z=l()(F,"".concat(F,"-").concat(e.type),Object(a.a)({},"".concat(F,"-rtl"),"rtl"===C),e.className),K=R&&c.createElement(p,{actionFn:n,closeModal:o,autoFocus:"cancel"===L,buttonProps:x,prefixCls:"".concat(I,"-btn")},y);return c.createElement(q,{prefixCls:N,className:z,wrapClassName:l()(Object(a.a)({},"".concat(F,"-centered"),!!e.centered)),onCancel:function(){return o({triggerCancel:!0})},visible:d,title:"",footer:"",transitionName:Object(j.b)(I,"zoom",e.transitionName),maskTransitionName:Object(j.b)(I,"fade",e.maskTransitionName),mask:M,maskClosable:V,maskStyle:v,style:H,width:D,zIndex:i,afterClose:s,keyboard:u,centered:m,getContainer:f,closable:E,closeIcon:A,modalRender:T,focusTriggerAfterClose:w},c.createElement("div",{className:"".concat(F,"-body-wrapper")},c.createElement(h.a,{prefixCls:I},c.createElement("div",{className:"".concat(F,"-body"),style:S},t,void 0===e.title?null:c.createElement("span",{className:"".concat(F,"-title")},e.title),c.createElement("div",{className:"".concat(F,"-content")},e.content))),c.createElement("div",{className:"".concat(F,"-btns")},K,c.createElement(p,{type:P,actionFn:r,closeModal:o,autoFocus:"ok"===L,buttonProps:g,prefixCls:"".concat(I,"-btn")},O))))},O=n(34),g=n(40),y=n(28),x=function(e,t){var n=e.afterClose,a=e.config,o=c.useState(!0),i=Object(u.a)(o,2),l=i[0],s=i[1],d=c.useState(a),m=Object(u.a)(d,2),f=m[0],p=m[1],b=c.useContext(y.b),h=b.direction,j=b.getPrefixCls,x=j("modal"),C=j();function N(){s(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.some((function(e){return e&&e.triggerCancel}));f.onCancel&&a&&f.onCancel()}return c.useImperativeHandle(t,(function(){return{destroy:N,update:function(e){p((function(t){return Object(r.a)(Object(r.a)({},t),e)}))}}})),c.createElement(g.a,{componentName:"Modal",defaultLocale:O.a.Modal},(function(e){return c.createElement(v,Object(r.a)({prefixCls:x,rootPrefixCls:C},f,{close:N,visible:l,afterClose:n,okText:f.okText||(f.okCancel?e.okText:e.justOkText),direction:h,cancelText:f.cancelText||e.cancelText}))}))},C=c.forwardRef(x),N=n(23),I=n(76),S=n(75),k=n(77),E=n(78),A=n(35),T=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},w="";function P(e){var t=document.createElement("div");document.body.appendChild(t);var n=Object(r.a)(Object(r.a)({},e),{close:i,visible:!0});function a(){var n=N.unmountComponentAtNode(t);n&&t.parentNode&&t.parentNode.removeChild(t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];var o=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&o&&e.onCancel.apply(e,r);for(var l=0;l<U.length;l++){var s=U[l];if(s===i){U.splice(l,1);break}}}function o(e){var n=e.okText,a=e.cancelText,o=e.prefixCls,i=T(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=Object(A.b)(),l=(0,Object(h.b)().getPrefixCls)(void 0,w),s=o||"".concat(l,"-modal");N.render(c.createElement(v,Object(r.a)({},i,{prefixCls:s,rootPrefixCls:l,okText:n||(i.okCancel?e.okText:e.justOkText),cancelText:a||e.cancelText})),t)}))}function i(){for(var t=this,c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];o(n=Object(r.a)(Object(r.a)({},n),{visible:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),a.apply(t,i)}}))}return o(n),U.push(i),{destroy:i,update:function(e){o(n="function"===typeof e?e(n):Object(r.a)(Object(r.a)({},n),e))}}}function F(e){return Object(r.a)(Object(r.a)({icon:c.createElement(E.a,null),okCancel:!1},e),{type:"warning"})}function R(e){return Object(r.a)(Object(r.a)({icon:c.createElement(I.a,null),okCancel:!1},e),{type:"info"})}function D(e){return Object(r.a)(Object(r.a)({icon:c.createElement(S.a,null),okCancel:!1},e),{type:"success"})}function H(e){return Object(r.a)(Object(r.a)({icon:c.createElement(k.a,null),okCancel:!1},e),{type:"error"})}function M(e){return Object(r.a)(Object(r.a)({icon:c.createElement(E.a,null),okCancel:!0},e),{type:"confirm"})}var V=0,L=c.memo(c.forwardRef((function(e,t){var n=function(){var e=c.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return[n,c.useCallback((function(e){return a((function(t){return[].concat(Object(d.a)(t),[e])})),function(){a((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),a=Object(u.a)(n,2),r=a[0],o=a[1];return c.useImperativeHandle(t,(function(){return{patchElement:o}}),[]),c.createElement(c.Fragment,null,r)})));var z,K=n(169),_=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},U=[];Object(K.a)()&&document.documentElement.addEventListener("click",(function(e){z={x:e.pageX,y:e.pageY},setTimeout((function(){z=null}),100)}),!0);var G=function(e){var t,n=c.useContext(y.b),i=n.getPopupContainer,d=n.getPrefixCls,u=n.direction,p=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},b=function(t){var n=e.onOk;null===n||void 0===n||n(t)},h=function(t){var n=e.okText,a=e.okType,o=e.cancelText,i=e.confirmLoading;return c.createElement(c.Fragment,null,c.createElement(m.a,Object(r.a)({onClick:p},e.cancelButtonProps),o||t.cancelText),c.createElement(m.a,Object(r.a)({},Object(f.a)(a),{loading:i,onClick:b},e.okButtonProps),n||t.okText))},v=e.prefixCls,O=e.footer,x=e.visible,C=e.wrapClassName,N=e.centered,I=e.getContainer,S=e.closeIcon,k=e.focusTriggerAfterClose,E=void 0===k||k,T=_(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),w=d("modal",v),P=d(),F=c.createElement(g.a,{componentName:"Modal",defaultLocale:Object(A.b)()},h),R=c.createElement("span",{className:"".concat(w,"-close-x")},S||c.createElement(s.a,{className:"".concat(w,"-close-icon")})),D=l()(C,(t={},Object(a.a)(t,"".concat(w,"-centered"),!!N),Object(a.a)(t,"".concat(w,"-wrap-rtl"),"rtl"===u),t));return c.createElement(o.a,Object(r.a)({},T,{getContainer:void 0===I?i:I,prefixCls:w,wrapClassName:D,footer:void 0===O?F:O,visible:x,mousePosition:z,onClose:p,closeIcon:R,focusTriggerAfterClose:E,transitionName:Object(j.b)(P,"zoom",e.transitionName),maskTransitionName:Object(j.b)(P,"fade",e.maskTransitionName)}))};G.useModal=function(){var e=c.useRef(null),t=c.useState([]),n=Object(u.a)(t,2),a=n[0],r=n[1];c.useEffect((function(){a.length&&(Object(d.a)(a).forEach((function(e){e()})),r([]))}),[a]);var o=c.useCallback((function(t){return function(n){var a;V+=1;var o,i=c.createRef(),l=c.createElement(C,{key:"modal-".concat(V),config:t(n),ref:i,afterClose:function(){o()}});return o=null===(a=e.current)||void 0===a?void 0:a.patchElement(l),{destroy:function(){function e(){var e;null===(e=i.current)||void 0===e||e.destroy()}i.current?e():r((function(t){return[].concat(Object(d.a)(t),[e])}))},update:function(e){function t(){var t;null===(t=i.current)||void 0===t||t.update(e)}i.current?t():r((function(e){return[].concat(Object(d.a)(e),[t])}))}}}}),[]);return[c.useMemo((function(){return{info:o(R),success:o(D),error:o(H),warning:o(F),confirm:o(M)}}),[]),c.createElement(L,{ref:e})]},G.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var q=G;function W(e){return P(F(e))}var B=q;B.info=function(e){return P(R(e))},B.success=function(e){return P(D(e))},B.error=function(e){return P(H(e))},B.warning=W,B.warn=W,B.confirm=function(e){return P(M(e))},B.destroyAll=function(){for(;U.length;){var e=U.pop();e&&e()}},B.config=function(e){var t=e.rootPrefixCls;Object(b.a)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),w=t};t.a=B},356:function(e,t,n){"use strict";var a,r=new Uint8Array(16);function c(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(e){return"string"===typeof e&&o.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!i(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var a=(e=e||{}).random||(e.rng||c)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return d(a)}},366:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(59),o=n(114),i=n(6),l=n(210),s=n(184),d=n(354),u=n(370),m=n(132),f=n(374),p=n(7),b=n(119),h=n(117),j=n(122),v=n(144),O=d.a.confirm;var g=Object(c.b)((function(e){return{routerForApp:e.getIn(["light","routerForApp"]).toJS()}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=function(e){var t=u.a.useForm(),n=Object(h.a)(t,1)[0],r=Object(a.useState)(!1),c=Object(h.a)(r,2),i=c[0],l=c[1],s=Object(a.useState)({}),d=Object(h.a)(s,2),m=d[0],f=d[1],p=Object(a.useState)("add"),b=Object(h.a)(p,2),g=b[0],y=b[1],x=Object(a.useState)(),C=Object(h.a)(x,2),N=C[0],I=C[1],S=e.routerForApp,k={},E=function(){e.onDispatch(Object(v.a)())};return Object(a.useEffect)((function(){E()}),[]),Object(a.useEffect)((function(){n.resetFields()}),[i,n]),{isModalVisible:i,initValues:m,type:g,form:n,modalTitle:N,handleDelete:function(t){console.log("\u5220\u9664, id:",t),O({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){j.a.light.routerDelete({ids:[t]}).then((function(t){200===t.code&&e.onDispatch(Object(v.a)())}))}})},handleAdd:function(){y("add"),I("\u6dfb\u52a0\u5e94\u7528"),f(k),console.log(k),l(!0)},handleEdit:function(e){var t=S.find((function(t){return t.id===e}));console.log("\u7f16\u8f91, id:",t),y("edit"),I("\u4fee\u6539\u540d\u79f0"),f(Object(o.a)(Object(o.a)({},m),t)),l(!0)},setIsModalVisible:l,handleFinish:function(e){console.log("Success:",e),"add"===g?(e.path="/light/index/content",j.a.light.routerAdd({dataItem:e}).then((function(e){200===e.code&&(l(!1),E())}))):"edit"===g&&j.a.light.routerEdit({id:m.id,dataItem:Object(o.a)(Object(o.a)({},m),e)}).then((function(e){200===e.code&&(l(!1),E())}))},handleFinishFailed:function(e){console.log("Failed:",e)},handleJumpToSet:function(t){e.history.push("/light/admin/applicationPlus?type=detail&id=".concat(t,"&progress=edit"))}}}(e),n=t.isModalVisible,r=t.initValues,c=t.type,i=t.form,g=t.modalTitle,y=t.handleDelete,x=t.handleAdd,C=t.handleEdit,N=t.setIsModalVisible,I=t.handleFinish,S=t.handleFinishFailed,k=t.handleJumpToSet,E=e.routerForApp;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"m-admin-content home",children:[Object(p.jsxs)("div",{className:"m-admin-row",children:[Object(p.jsx)("div",{className:"m-adimn-row-title",children:"\u81ea\u5b9a\u4e49\u5e94\u7528"}),Object(p.jsxs)("div",{className:"m-app-wrap",children:[E.map((function(e){return Object(p.jsxs)("div",{className:"m-app-item",title:e.title,onClick:function(){return k(e.id)},children:[Object(p.jsx)(l.a,{overlay:Object(p.jsxs)(s.a,{onClick:function(e){return e.domEvent.stopPropagation()},children:[Object(p.jsx)(s.a.Item,{onClick:function(){return C(e.id)},children:"\u4fee\u6539\u540d\u79f0"},"0"),Object(p.jsx)(s.a.Item,{onClick:function(){return y(e.id)},children:"\u5220\u9664\u5e94\u7528"},"1")]}),children:Object(p.jsx)("span",{className:"m-app-item-icon",children:Object(p.jsx)(b.b,{name:"more"})})}),e.title]},e.id)})),Object(p.jsxs)("div",{className:"m-app-item",onClick:x,children:[Object(p.jsx)(b.b,{name:"add",className:"m-application-icon"}),"\u521b\u5efa\u65b0\u5e94\u7528"]})]})]}),Object(p.jsx)(d.a,{title:g,visible:n,onCancel:function(){return N(!1)},footer:null,forceRender:!0,children:Object(p.jsxs)(u.a,{form:i,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(o.a)({},r),onFinish:I,onFinishFailed:S,children:[Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(u.a.Item,{label:"\u5e94\u7528\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0\uff01"}],children:Object(p.jsx)(f.a,{})})}),Object(p.jsxs)(u.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===c||"edit"===c)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(m.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(p.jsx)(b.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(p.jsxs)(m.a,{className:"m-space",onClick:function(){i.resetFields()},children:[Object(p.jsx)(b.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(p.jsx)(m.a,{className:"m-space",onClick:function(){return N(!1)},children:"\u53d6\u6d88"})]})]})})]})})}))),y=n(2),x=n(4),C=n(3),N=n(10),I=n(13),S=n(16),k=n(17),E=n(9),A=n(12),T=n.n(A),w=n(140),P=n.n(w),F=n(61),R=n(60),D=n(5),H=a.forwardRef((function(e,t){var n,r=e.prefixCls,c=e.forceRender,o=e.className,i=e.style,l=e.children,s=e.isActive,d=e.role,u=a.useState(s||c),m=Object(D.a)(u,2),f=m[0],p=m[1];return a.useEffect((function(){(c||s)&&p(!0)}),[c,s]),f?a.createElement("div",{ref:t,className:T()("".concat(r,"-content"),(n={},Object(x.a)(n,"".concat(r,"-content-active"),s),Object(x.a)(n,"".concat(r,"-content-inactive"),!s),n),o),style:i,role:d},a.createElement("div",{className:"".concat(r,"-content-box")},l)):null}));H.displayName="PanelContent";var M=H,V=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.apply(this,arguments)).handleItemClick=function(){var t=e.props,n=t.onItemClick,a=t.panelKey;"function"===typeof n&&n(a)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.handleItemClick()},e}return Object(I.a)(n,[{key:"shouldComponentUpdate",value:function(e){return!P()(this.props,e)}},{key:"render",value:function(){var e,t,n=this,r=this.props,c=r.className,o=r.id,i=r.style,l=r.prefixCls,s=r.header,d=r.headerClass,u=r.children,m=r.isActive,f=r.showArrow,p=r.destroyInactivePanel,b=r.accordion,h=r.forceRender,j=r.openMotion,v=r.expandIcon,O=r.extra,g=r.collapsible,C="disabled"===g,N=T()("".concat(l,"-header"),(e={},Object(x.a)(e,d,d),Object(x.a)(e,"".concat(l,"-header-collapsible-only"),"header"===g),e)),I=T()((t={},Object(x.a)(t,"".concat(l,"-item"),!0),Object(x.a)(t,"".concat(l,"-item-active"),m),Object(x.a)(t,"".concat(l,"-item-disabled"),C),t),c),S=a.createElement("i",{className:"arrow"});return f&&"function"===typeof v&&(S=v(this.props)),a.createElement("div",{className:I,style:i,id:o},a.createElement("div",{className:N,onClick:function(){return"header"!==g&&n.handleItemClick()},role:b?"tab":"button",tabIndex:C?-1:0,"aria-expanded":m,onKeyPress:this.handleKeyPress},f&&S,"header"===g?a.createElement("span",{onClick:this.handleItemClick,className:"".concat(l,"-header-text")},s):s,O&&a.createElement("div",{className:"".concat(l,"-extra")},O)),a.createElement(R.b,Object(y.a)({visible:m,leavedClassName:"".concat(l,"-content-hidden")},j,{forceRender:h,removeOnLeave:p}),(function(e,t){var n=e.className,r=e.style;return a.createElement(M,{ref:t,prefixCls:l,className:n,style:r,isActive:m,forceRender:h,role:b?"tabpanel":null},u)})))}}]),n}(a.Component);V.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var L=V;function z(e){var t=e;if(!Array.isArray(t)){var n=Object(E.a)(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var K=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var r;Object(N.a)(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=r.state.activeKey;if(r.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=Object(C.a)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}r.setActiveKey(t)},r.getNewChild=function(e,t){if(!e)return null;var n=r.state.activeKey,c=r.props,o=c.prefixCls,i=c.openMotion,l=c.accordion,s=c.destroyInactivePanel,d=c.expandIcon,u=c.collapsible,m=e.key||String(t),f=e.props,p=f.header,b=f.headerClass,h=f.destroyInactivePanel,j=f.collapsible,v=null!==j&&void 0!==j?j:u,O={key:m,panelKey:m,header:p,headerClass:b,isActive:l?n[0]===m:n.indexOf(m)>-1,prefixCls:o,destroyInactivePanel:null!==h&&void 0!==h?h:s,openMotion:i,accordion:l,children:e.props.children,onItemClick:"disabled"===v?null:r.onClickItem,expandIcon:d,collapsible:v};return"string"===typeof e.type?e:a.cloneElement(e,O)},r.getItems=function(){var e=r.props.children;return Object(F.a)(e).map(r.getNewChild)},r.setActiveKey=function(e){"activeKey"in r.props||r.setState({activeKey:e}),r.props.onChange(r.props.accordion?e[0]:e)};var c=e.activeKey,o=e.defaultActiveKey;return"activeKey"in e&&(o=c),r.state={activeKey:z(o)},r}return Object(I.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!P()(this.props,e)||!P()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,c=t.style,o=t.accordion,i=T()((e={},Object(x.a)(e,n,!0),Object(x.a)(e,r,!!r),e));return a.createElement("div",{className:i,style:c,role:o?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=z(e.activeKey)),t}}]),n}(a.Component);K.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},K.Panel=L;var _=K,U=(K.Panel,n(147)),G=n(115),q=n(28),W=n(58),B=function(e){Object(W.a)(!("disabled"in e),"Collapse.Panel",'`disabled` is deprecated. Please use `collapsible="disabled"` instead.');var t=a.useContext(q.b).getPrefixCls,n=e.prefixCls,r=e.className,c=void 0===r?"":r,o=e.showArrow,i=void 0===o||o,l=t("collapse",n),s=T()(Object(x.a)({},"".concat(l,"-no-arrow"),!i),c);return a.createElement(_.Panel,Object(y.a)({},e,{prefixCls:l,className:s}))},J=n(124),Y=n(118),X=function(e){var t,n=a.useContext(q.b),r=n.getPrefixCls,c=n.direction,o=e.prefixCls,i=e.className,l=void 0===i?"":i,s=e.bordered,d=void 0===s||s,u=e.ghost,m=r("collapse",o),f=function(){var t=e.expandIconPosition;return void 0!==t?t:"rtl"===c?"right":"left"}(),p=T()((t={},Object(x.a)(t,"".concat(m,"-borderless"),!d),Object(x.a)(t,"".concat(m,"-icon-position-").concat(f),!0),Object(x.a)(t,"".concat(m,"-rtl"),"rtl"===c),Object(x.a)(t,"".concat(m,"-ghost"),!!u),t),l),b=Object(y.a)(Object(y.a)({},J.a),{motionAppear:!1,leavedClassName:"".concat(m,"-content-hidden")});return a.createElement(_,Object(y.a)({openMotion:b},e,{bordered:d,expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,r=n?n(t):a.createElement(U.a,{rotate:t.isActive?90:void 0});return Object(Y.a)(r,(function(){return{className:T()(r.props.className,"".concat(m,"-arrow"))}}))},prefixCls:m,className:p}),function(){var t=e.children;return Object(F.a)(t).map((function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var a=e.key||String(t),r=e.props,c=r.disabled,o=r.collapsible,i=Object(y.a)(Object(y.a)({},Object(G.a)(e.props,["disabled"])),{key:a,collapsible:null!==o&&void 0!==o?o:c?"disabled":void 0});return Object(Y.a)(e,i)}return e}))}())};X.Panel=B;var Z=X,$=n(190),Q=n(170),ee=n(1),te=n(15);function ne(e){return"string"===typeof e}var ae=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.apply(this,arguments)).onClick=function(){var t=e.props,n=t.onClick,a=t.onStepClick,r=t.stepIndex;n&&n.apply(void 0,arguments),a(r)},e}return Object(I.a)(n,[{key:"renderIconNode",value:function(){var e,t,n=this.props,a=n.prefixCls,c=n.progressDot,o=n.stepIcon,i=n.stepNumber,l=n.status,s=n.title,d=n.description,u=n.icon,m=n.iconPrefix,f=n.icons,p=T()("".concat(a,"-icon"),"".concat(m,"icon"),(e={},Object(x.a)(e,"".concat(m,"icon-").concat(u),u&&ne(u)),Object(x.a)(e,"".concat(m,"icon-check"),!u&&"finish"===l&&(f&&!f.finish||!f)),Object(x.a)(e,"".concat(m,"icon-cross"),!u&&"error"===l&&(f&&!f.error||!f)),e)),b=r.a.createElement("span",{className:"".concat(a,"-icon-dot")});return t=c?"function"===typeof c?r.a.createElement("span",{className:"".concat(a,"-icon")},c(b,{index:i-1,status:l,title:s,description:d})):r.a.createElement("span",{className:"".concat(a,"-icon")},b):u&&!ne(u)?r.a.createElement("span",{className:"".concat(a,"-icon")},u):f&&f.finish&&"finish"===l?r.a.createElement("span",{className:"".concat(a,"-icon")},f.finish):f&&f.error&&"error"===l?r.a.createElement("span",{className:"".concat(a,"-icon")},f.error):u||"finish"===l||"error"===l?r.a.createElement("span",{className:p}):r.a.createElement("span",{className:"".concat(a,"-icon")},i),o&&(t=o({index:i-1,status:l,title:s,description:d,node:t})),t}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.prefixCls,c=t.style,o=t.active,i=t.status,l=void 0===i?"wait":i,s=(t.iconPrefix,t.icon),d=(t.wrapperStyle,t.stepNumber,t.disabled),u=t.description,m=t.title,f=t.subTitle,p=(t.progressDot,t.stepIcon,t.tailContent),b=(t.icons,t.stepIndex,t.onStepClick),h=t.onClick,j=Object(te.a)(t,["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick"]),v=T()("".concat(a,"-item"),"".concat(a,"-item-").concat(l),n,(e={},Object(x.a)(e,"".concat(a,"-item-custom"),s),Object(x.a)(e,"".concat(a,"-item-active"),o),Object(x.a)(e,"".concat(a,"-item-disabled"),!0===d),e)),O=Object(ee.a)({},c),g={};return b&&!d&&(g.role="button",g.tabIndex=0,g.onClick=this.onClick),r.a.createElement("div",Object.assign({},j,{className:v,style:O}),r.a.createElement("div",Object.assign({onClick:h},g,{className:"".concat(a,"-item-container")}),r.a.createElement("div",{className:"".concat(a,"-item-tail")},p),r.a.createElement("div",{className:"".concat(a,"-item-icon")},this.renderIconNode()),r.a.createElement("div",{className:"".concat(a,"-item-content")},r.a.createElement("div",{className:"".concat(a,"-item-title")},m,f&&r.a.createElement("div",{title:"string"===typeof f?f:void 0,className:"".concat(a,"-item-subtitle")},f)),u&&r.a.createElement("div",{className:"".concat(a,"-item-description")},u))))}}]),n}(r.a.Component),re=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.apply(this,arguments)).onStepClick=function(t){var n=e.props,a=n.onChange,r=n.current;a&&r!==t&&a(t)},e}return Object(I.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,c=n.prefixCls,o=n.style,i=void 0===o?{}:o,l=n.className,s=n.children,d=n.direction,u=n.type,m=n.labelPlacement,f=n.iconPrefix,p=n.status,b=n.size,h=n.current,j=n.progressDot,v=n.stepIcon,O=n.initial,g=n.icons,y=n.onChange,C=Object(te.a)(n,["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange"]),N="navigation"===u,I=j?"vertical":m,S=T()(c,"".concat(c,"-").concat(d),l,(e={},Object(x.a)(e,"".concat(c,"-").concat(b),b),Object(x.a)(e,"".concat(c,"-label-").concat(I),"horizontal"===d),Object(x.a)(e,"".concat(c,"-dot"),!!j),Object(x.a)(e,"".concat(c,"-navigation"),N),e));return r.a.createElement("div",Object.assign({className:S,style:i},C),Object(F.a)(s).map((function(e,n){var r=O+n,o=Object(ee.a)({stepNumber:"".concat(r+1),stepIndex:r,key:r,prefixCls:c,iconPrefix:f,wrapperStyle:i,progressDot:j,stepIcon:v,icons:g,onStepClick:y&&t.onStepClick},e.props);return"error"===p&&n===h-1&&(o.className="".concat(c,"-next-error")),e.props.status||(o.status=r===h?p:r<h?"finish":"wait"),o.active=r===h,Object(a.cloneElement)(e,o)})))}}]),n}(r.a.Component);re.Step=ae,re.defaultProps={type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1};var ce=re,oe=n(189),ie=n(63),le=n(225),se=n(178),de=function(e){var t,n=e.percent,r=e.size,c=e.className,o=e.direction,i=e.responsive,l=Object(se.a)().xs,s=a.useContext(q.b),d=s.getPrefixCls,u=s.direction,m=a.useCallback((function(){return i&&l?"vertical":o}),[l,o]),f=d("steps",e.prefixCls),p=d("",e.iconPrefix),b=T()((t={},Object(x.a)(t,"".concat(f,"-rtl"),"rtl"===u),Object(x.a)(t,"".concat(f,"-with-progress"),void 0!==n),t),c),h={finish:a.createElement(oe.a,{className:"".concat(f,"-finish-icon")}),error:a.createElement(ie.a,{className:"".concat(f,"-error-icon")})};return a.createElement(ce,Object(y.a)({icons:h},Object(G.a)(e,["percent","responsive"]),{direction:m(),stepIcon:function(e){var t=e.node;if("process"===e.status&&void 0!==n){var c="small"===r?32:40;return a.createElement("div",{className:"".concat(f,"-progress-icon")},a.createElement(le.a,{type:"circle",percent:n,width:c,strokeWidth:4,format:function(){return null}}),t)}return t},prefixCls:f,iconPrefix:p,className:b}))};de.Step=ce.Step,de.defaultProps={current:0};var ue=de,me=n(49),fe=ue.Step;var pe=Object(i.g)((function(e){var t=e.applicationTitle,n=e.routerSearchObj,r=e.onSave,c=Object(a.useState)(0),o=Object(h.a)(c,2),i=o[0],l=o[1],s=[{id:0,title:"\u7f16\u8f91",type:"edit",path:"/light/admin/applicationPlus?type=detail&id=".concat(n.id,"&progress=edit")},{id:1,title:"\u76ae\u80a4",type:"skin",path:"/light/admin/applicationPlus?type=detail&id=".concat(n.id,"&progress=skin")},{id:2,title:"\u8bbe\u7f6e",type:"set",path:"/light/admin/applicationPlus?type=detail&id=".concat(n.id,"&progress=set")},{id:3,title:"\u53d1\u5e03",type:"publish",path:"/light/admin/applicationPlus?type=detail&id=".concat(n.id,"&progress=publish")}];return Object(a.useEffect)((function(){var e=s.find((function(e){return e.type===n.progress}));l(e.id)}),[]),Object(p.jsxs)("div",{className:"m-design-header",children:[Object(p.jsxs)("div",{className:"m-design-header-title",children:[Object(p.jsx)(b.b,{name:"goback",title:"\u8fd4\u56de",className:"m-set-application-header-icon",onClick:function(){return e.history.go(-1)}}),Object(p.jsx)("span",{title:t,children:t})]}),Object(p.jsx)("div",{className:"m-design-header-middle",children:Object(p.jsx)("div",{className:"m-design-header-middle-inner",children:Object(p.jsx)(ue,{current:i,onChange:function(t){var n=s.find((function(e){return e.id===t}));e.history.replace(n.path)},children:s.map((function(e){return Object(p.jsx)(fe,{title:e.title},e.id)}))})})}),Object(p.jsxs)("div",{className:"m-design-header-action",children:[Object(p.jsx)(m.a,{type:"primary",onClick:r,children:"\u4fdd\u5b58"}),Object(p.jsx)(me.b,{to:"/light/formview?id=".concat(n.id),target:"_blank",style:{display:"inherit"},children:Object(p.jsx)(m.a,{children:"\u9884\u89c8"})})]})]})})),be=n(133),he=n(89),je=n(116),ve=n(356),Oe=function(e){var t=e.initValuesForAttr;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a.Item,{label:"\u5b57\u6bb5\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(p.jsx)(f.a,{})}),t.isHasPlaceHolder&&Object(p.jsx)(u.a.Item,{label:"placeholder",name:"placeholder",children:Object(p.jsx)(f.a,{})}),Object(p.jsx)(u.a.Item,{label:"\u82f1\u6587\u540d\u79f0",name:"dataIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"}],children:Object(p.jsx)(f.a,{})}),t.isHasRules&&Object(p.jsx)(u.a.Item,{label:"\u5b57\u6bb5\u5fc5\u586b",name:"rules",children:Object(p.jsx)(b.a,{})}),"image"===t.type&&Object(p.jsx)(u.a.Item,{label:"\u4e0a\u4f20\u56fe\u7247",name:"src",children:Object(p.jsx)(b.e,{})})]})},ge=d.a.confirm,ye=[];function xe(e){var t=u.a.useForm(),n=Object(h.a)(t,1)[0],r=u.a.useForm(),c=Object(h.a)(r,1)[0],i=Object(a.useState)([]),l=Object(h.a)(i,2),s=l[0],d=l[1],m=Object(a.useState)(),f=Object(h.a)(m,2),p=f[0],b=f[1],v=Object(a.useState)(),O=Object(h.a)(v,2),g=O[0],y=O[1],x=Object(a.useState)({}),C=Object(h.a)(x,2),N=C[0],I=C[1],S=Object(je.f)(e),k=S.id,E=function(){j.a.light.fieldsSearch({tableId:k}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));d(t),b(e.data.title),Array.isArray(t)&&t.length>0&&A({id:t[0].id,myDataSource:t})}}))},A=function(e){var t=e.id,n=e.myDataSource,a=void 0===n?s:n;y(t);var r=a.find((function(e){return e.id===t})),c=Array.isArray(r.rules)&&r.rules.length>0?r.rules[0]:{message:"".concat(r.title,"\u4e0d\u80fd\u4e3a\u7a7a")};I(Object(o.a)(Object(o.a)({},r),{},{rules:c}))};return Object(a.useEffect)((function(){c.resetFields()}),[N]),Object(a.useEffect)((function(){E()}),[]),Object(a.useEffect)((function(){ye=s}),[s]),{form:n,formForAttr:c,initValuesForAttr:N,dataSource:s,applicationTitle:p,addInitValues:{},routerSearchObj:S,cardActiveId:g,handleSearch:E,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),ge({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=s.filter((function(e){return e.id!==t.id}));d(e),Array.isArray(e)&&e.length>0?t.id===g&&A({id:e[0].id,myDataSource:e}):y(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,n=ye.map((function(e){return e.orderIndex})),a=Math.max.apply(Math,n)+1,r=Object(ve.a)(),c={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:a};console.log(Object(o.a)(Object(o.a)({},t),c)),console.log(ye);var i=[].concat(Object(be.a)(ye),[Object(o.a)(Object(o.a)({},t),c)]);d(i),Array.isArray(i)&&i.length>0&&A({id:r,myDataSource:i})},handleSave:function(){console.log(s);var e=s.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{orderIndex:t+1})}));console.log(e),j.a.light.fieldsEditAll({tableId:k,dataItem:e}).then((function(e){200===e.code&&he.b.success(e.message)}))},handleCardActiveId:A,handleValuesChange:function(e,t){var n=c.getFieldsValue();console.log(n);var a=s.findIndex((function(e){return e.id===g})),r={rules:[t.rules],props:{placeholder:t.placeholder}};s[a]=Object(o.a)(Object(o.a)(Object(o.a)({},s[a]),t),r),d(Object(be.a)(s))},handleGetChildPayload:function(e){var t=e.type,n=e.index;if("tool"===t){var a=Object(ve.a)(),r=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],c=ye.map((function(e){return e.orderIndex})),i=Math.max.apply(Math,c)+1,l=r[n],d={id:a,dataIndex:"".concat(l.dataIndex,"-").concat(a),isModalField:!0,orderIndex:i};return Object(o.a)(Object(o.a)({},l),d)}if("content"===t)return s[n]},handleCardDrop:function(e){var t=e.type,n=e.dragResult;if("tool"===t);else if("content"===t){var a=function(e,t){var n=t.removedIndex,a=t.addedIndex,r=t.payload;if(null===n&&null===a)return e;var c=Object(be.a)(e),o=r;return null!==n&&(o=c.splice(n,1)[0]),null!==a&&c.splice(a,0,o),c}(s,n);d(a),Array.isArray(a)&&a.length>0&&A({id:n.payload.id,myDataSource:a})}}}}var Ce=n(181),Ne=Z.Panel;var Ie=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=xe(e),n=t.applicationTitle,a=t.dataSource,r=t.form,c=t.formForAttr,i=t.initValues,l=t.initValuesForAttr,s=t.routerSearchObj,d=t.cardActiveId,h=t.handleFinish,j=t.handleFinishFailed,v=t.handleAdd,O=t.handleSave,g=t.handleCardActiveId,y=t.handleValuesChange,x=t.handleDelete,C=t.handleGetChildPayload,N=t.handleCardDrop;return Object(p.jsxs)("div",{className:"m-admin-content",children:[Object(p.jsx)(pe,{applicationTitle:n,routerSearchObj:s,onSave:O}),Object(p.jsxs)("div",{className:"m-design-wrap",children:[Object(p.jsx)("div",{className:"m-design-sidebar",children:Object(p.jsxs)(Z,{defaultActiveKey:["1","2","3"],children:[Object(p.jsx)(Ne,{header:"\u901a\u7528\u5b57\u6bb5",children:Object(p.jsx)("div",{className:"m-design-sidebar-container",children:Object(p.jsx)(Ce.Container,{orientation:"horizontal",onDrop:function(e){return N({type:"tool",dragResult:e})},getChildPayload:function(e){return C({type:"tool",index:e})},behaviour:"copy",groupName:"col",children:[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}].map((function(e){return Object(p.jsx)(Ce.Draggable,{children:Object(p.jsxs)("div",{className:"m-component-item",onClick:function(){return v({fieldInfo:e})},children:[Object(p.jsx)("div",{children:Object(p.jsx)(b.b,{name:e.icon})}),Object(p.jsx)("div",{children:e.title})]})},e.id)}))})})},"1"),Object(p.jsx)(Ne,{header:"\u8054\u7cfb\u4fe1\u606f\u5b57\u6bb5",children:Object(p.jsx)($.a,{gutter:[2,2],children:Object(p.jsx)(Q.a,{span:8,children:Object(p.jsxs)("div",{className:"m-component-item",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"2"),Object(p.jsx)(Ne,{header:"\u5546\u54c1\u5b57\u6bb5",children:Object(p.jsx)($.a,{gutter:[2,2],children:Object(p.jsx)(Q.a,{span:8,children:Object(p.jsxs)("div",{className:"m-component-item",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"\u656c\u8bf7\u671f\u5f85"})]})})})},"3")]})}),Object(p.jsx)("div",{className:"m-design-content",children:Object(p.jsxs)(u.a,{form:r,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(o.a)({},i),onFinish:h,onFinishFailed:j,children:[Object(p.jsx)("div",{className:"m-design-card-wrap",children:Object(p.jsx)(Ce.Container,{orientation:"vertical",onDrop:function(e){return N({type:"content",dragResult:e})},getChildPayload:function(e){return C({type:"content",index:e})},groupName:"col",children:a.map((function(e){var t=Object(je.c)().find((function(t){return t.formComponentName===e.formComponentName}));return Object(p.jsx)(Ce.Draggable,{children:Object(p.jsxs)("div",{className:"m-design-card ".concat(d===e.id?"active":""),onClick:function(){return g({id:e.id})},children:[Object(p.jsxs)("div",{className:"m-design-card-info",children:["formItem"===e.type&&Object(p.jsx)(u.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,children:t?t.getComponent({props:e.props}):Object(p.jsx)(f.a,{})},e.id),"image"===e.type&&Object(p.jsx)(u.a.Item,{name:e.dataIndex,wrapperCol:24,children:t?t.getComponent({props:{src:e.src}}):Object(p.jsx)(f.a,{})},e.id)]}),Object(p.jsx)("div",{className:"m-design-card-action ".concat(d===e.id?"active":""),children:Object(p.jsx)(b.b,{name:"delete",className:"m-design-card-delete",onClick:function(t){return x(t,e)}})})]})},e.id)}))})}),Object(p.jsxs)(u.a.Item,{wrapperCol:{offset:4,span:17},className:"m-design-footer",children:[Object(p.jsxs)(m.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(p.jsx)(b.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(p.jsxs)(m.a,{className:"m-space",onClick:function(){r.resetFields()},children:[Object(p.jsx)(b.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]})]})}),Object(p.jsx)("div",{className:"m-design-attr",children:Object(p.jsx)(u.a,{form:c,labelCol:{span:8},wrapperCol:{span:15},initialValues:Object(o.a)({},l),scrollToFirstError:!0,onValuesChange:y,onFinish:h,id:"m-set-application-modal-form",className:"m-set-application-modal-form",children:d?Oe({initValuesForAttr:l}):Object(p.jsx)("div",{className:"m-empty-text",children:"\u8bf7\u9009\u62e9\u5b57\u6bb5"})})})]})]})}))),Se=d.a.confirm,ke=[];function Ee(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(),l=Object(h.a)(i,2),s=l[0],d=l[1],u=Object(a.useState)(),m=Object(h.a)(u,2),f=m[0],p=m[1],b=Object(a.useState)({}),v=Object(h.a)(b,2),O=v[0],g=v[1],y=Object(je.f)(e),x=y.id,C=function(){j.a.light.fieldsSearch({tableId:x}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),d(e.data.title),Array.isArray(t)&&t.length>0&&N({id:t[0].id,myDataSource:t})}}))},N=function(e){var t=e.id,n=e.myDataSource,a=void 0===n?r:n;p(t);var c=a.find((function(e){return e.id===t})),i=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(o.a)(Object(o.a)({},c),{},{rules:i}))};return Object(a.useEffect)((function(){C()}),[]),Object(a.useEffect)((function(){ke=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:s,addInitValues:{},routerSearchObj:y,cardActiveId:f,handleSearch:C,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),Se({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&N({id:e[0].id,myDataSource:e}):p(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,n=ke.map((function(e){return e.orderIndex})),a=Math.max.apply(Math,n)+1,r=Object(ve.a)(),i={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:a};console.log(Object(o.a)(Object(o.a)({},t),i)),console.log(ke);var l=[].concat(Object(be.a)(ke),[Object(o.a)(Object(o.a)({},t),i)]);c(l),Array.isArray(l)&&l.length>0&&N({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{orderIndex:t+1})}));console.log(e),j.a.light.fieldsEditAll({tableId:x,dataItem:e}).then((function(e){200===e.code&&he.b.success(e.message)}))},handleCardActiveId:N,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,n=e.index;if("tool"===t){var a=Object(ve.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],i=ke.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,i)+1,s=c[n],d={id:a,dataIndex:"".concat(s.dataIndex,"-").concat(a),isModalField:!0,orderIndex:l};return Object(o.a)(Object(o.a)({},s),d)}if("content"===t)return r[n]},handleCardDrop:function(e){var t=e.type,n=e.dragResult;if("tool"===t);else if("content"===t){var a=function(e,t){var n=t.removedIndex,a=t.addedIndex,r=t.payload;if(null===n&&null===a)return e;var c=Object(be.a)(e),o=r;return null!==n&&(o=c.splice(n,1)[0]),null!==a&&c.splice(a,0,o),c}(r,n);c(a),Array.isArray(a)&&a.length>0&&N({id:n.payload.id,myDataSource:a})}}}}var Ae=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=Ee(e),n=t.applicationTitle,a=t.routerSearchObj,r=t.handleSave;return Object(p.jsxs)("div",{className:"m-admin-content",children:[Object(p.jsx)(pe,{applicationTitle:n,routerSearchObj:a,onSave:r}),Object(p.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})}))),Te=d.a.confirm,we=[];function Pe(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(),l=Object(h.a)(i,2),s=l[0],d=l[1],u=Object(a.useState)(),m=Object(h.a)(u,2),f=m[0],p=m[1],b=Object(a.useState)({}),v=Object(h.a)(b,2),O=v[0],g=v[1],y=Object(je.f)(e),x=y.id,C=function(){j.a.light.fieldsSearch({tableId:x}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),d(e.data.title),Array.isArray(t)&&t.length>0&&N({id:t[0].id,myDataSource:t})}}))},N=function(e){var t=e.id,n=e.myDataSource,a=void 0===n?r:n;p(t);var c=a.find((function(e){return e.id===t})),i=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(o.a)(Object(o.a)({},c),{},{rules:i}))};return Object(a.useEffect)((function(){C()}),[]),Object(a.useEffect)((function(){we=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:s,addInitValues:{},routerSearchObj:y,cardActiveId:f,handleSearch:C,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),Te({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&N({id:e[0].id,myDataSource:e}):p(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,n=we.map((function(e){return e.orderIndex})),a=Math.max.apply(Math,n)+1,r=Object(ve.a)(),i={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:a};console.log(Object(o.a)(Object(o.a)({},t),i)),console.log(we);var l=[].concat(Object(be.a)(we),[Object(o.a)(Object(o.a)({},t),i)]);c(l),Array.isArray(l)&&l.length>0&&N({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{orderIndex:t+1})}));console.log(e),j.a.light.fieldsEditAll({tableId:x,dataItem:e}).then((function(e){200===e.code&&he.b.success(e.message)}))},handleCardActiveId:N,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,n=e.index;if("tool"===t){var a=Object(ve.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],i=we.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,i)+1,s=c[n],d={id:a,dataIndex:"".concat(s.dataIndex,"-").concat(a),isModalField:!0,orderIndex:l};return Object(o.a)(Object(o.a)({},s),d)}if("content"===t)return r[n]},handleCardDrop:function(e){var t=e.type,n=e.dragResult;if("tool"===t);else if("content"===t){var a=function(e,t){var n=t.removedIndex,a=t.addedIndex,r=t.payload;if(null===n&&null===a)return e;var c=Object(be.a)(e),o=r;return null!==n&&(o=c.splice(n,1)[0]),null!==a&&c.splice(a,0,o),c}(r,n);c(a),Array.isArray(a)&&a.length>0&&N({id:n.payload.id,myDataSource:a})}}}}var Fe=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=Pe(e),n=t.applicationTitle,a=t.routerSearchObj,r=t.handleSave;return Object(p.jsxs)("div",{className:"m-admin-content",children:[Object(p.jsx)(pe,{applicationTitle:n,routerSearchObj:a,onSave:r}),Object(p.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})}))),Re=d.a.confirm,De=[];function He(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(),l=Object(h.a)(i,2),s=l[0],d=l[1],u=Object(a.useState)(),m=Object(h.a)(u,2),f=m[0],p=m[1],b=Object(a.useState)({}),v=Object(h.a)(b,2),O=v[0],g=v[1],y=Object(je.f)(e),x=y.id,C=function(){j.a.light.fieldsSearch({tableId:x}).then((function(e){if(200===e.code){var t=e.data.fields.filter((function(e){return!e.isSystem}));c(t),d(e.data.title),Array.isArray(t)&&t.length>0&&N({id:t[0].id,myDataSource:t})}}))},N=function(e){var t=e.id,n=e.myDataSource,a=void 0===n?r:n;p(t);var c=a.find((function(e){return e.id===t})),i=Array.isArray(c.rules)&&c.rules.length>0?c.rules[0]:{message:"".concat(c.title,"\u4e0d\u80fd\u4e3a\u7a7a")};g(Object(o.a)(Object(o.a)({},c),{},{rules:i}))};return Object(a.useEffect)((function(){C()}),[]),Object(a.useEffect)((function(){De=r}),[r]),{initValuesForAttr:O,dataSource:r,applicationTitle:s,addInitValues:{},routerSearchObj:y,cardActiveId:f,handleSearch:C,handleDelete:function(e,t){e.stopPropagation(),console.log("\u5220\u9664, id:",t.id),Re({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){var e=r.filter((function(e){return e.id!==t.id}));c(e),Array.isArray(e)&&e.length>0?t.id===f&&N({id:e[0].id,myDataSource:e}):p(!1)}})},handleFinish:function(e){console.log("Success:",e)},handleFinishFailed:function(e){console.log("Failed:",e)},handleAdd:function(e){var t=e.fieldInfo,n=De.map((function(e){return e.orderIndex})),a=Math.max.apply(Math,n)+1,r=Object(ve.a)(),i={id:r,dataIndex:"".concat(t.dataIndex,"-").concat(r),isModalField:!0,orderIndex:a};console.log(Object(o.a)(Object(o.a)({},t),i)),console.log(De);var l=[].concat(Object(be.a)(De),[Object(o.a)(Object(o.a)({},t),i)]);c(l),Array.isArray(l)&&l.length>0&&N({id:r,myDataSource:l})},handleSave:function(){console.log(r);var e=r.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{orderIndex:t+1})}));console.log(e),j.a.light.fieldsEditAll({tableId:x,dataItem:e}).then((function(e){200===e.code&&he.b.success(e.message)}))},handleCardActiveId:N,handleValuesChange:function(e,t){},handleGetChildPayload:function(e){var t=e.type,n=e.index;if("tool"===t){var a=Object(ve.a)(),c=[{id:1,icon:"input",title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",dataIndex:"input",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:2,icon:"textarea",title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",dataIndex:"textArea",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:3,icon:"number-input",title:"\u6570\u5b57",formComponentName:"InputNumber",dataIndex:"inputNumber",renderFunName:"renderSpan",type:"formItem",isHasRules:!0,isHasPlaceHolder:!0,isColumn:!0},{id:4,icon:"image",title:"\u56fe\u7247",formComponentName:"Image",dataIndex:"image",renderFunName:"renderImage",type:"image",isHasRules:!1,isHasPlaceHolder:!1,src:"https://www.jsform.com/rs/images/defaultimg.png",isColumn:!1}],i=De.map((function(e){return e.orderIndex})),l=Math.max.apply(Math,i)+1,s=c[n],d={id:a,dataIndex:"".concat(s.dataIndex,"-").concat(a),isModalField:!0,orderIndex:l};return Object(o.a)(Object(o.a)({},s),d)}if("content"===t)return r[n]},handleCardDrop:function(e){var t=e.type,n=e.dragResult;if("tool"===t);else if("content"===t){var a=function(e,t){var n=t.removedIndex,a=t.addedIndex,r=t.payload;if(null===n&&null===a)return e;var c=Object(be.a)(e),o=r;return null!==n&&(o=c.splice(n,1)[0]),null!==a&&c.splice(a,0,o),c}(r,n);c(a),Array.isArray(a)&&a.length>0&&N({id:n.payload.id,myDataSource:a})}}}}var Me=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=He(e),n=t.applicationTitle,a=t.routerSearchObj,r=t.handleSave;return Object(p.jsxs)("div",{className:"m-admin-content",children:[Object(p.jsx)(pe,{applicationTitle:n,routerSearchObj:a,onSave:r}),Object(p.jsx)("div",{className:"m-empty-page",children:"\u5360\u4f4d\u7a7a\u9875\u9762"})]})})));var Ve=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(i.g)((function(e){var t=Object(je.f)(e),n=function(){var e={edit:{component:Object(p.jsx)(Ie,{})},skin:{component:Object(p.jsx)(Ae,{})},set:{component:Object(p.jsx)(Fe,{})},publish:{component:Object(p.jsx)(Me,{})}};return t.progress?e[t.progress]?e[t.progress].component:null:Object(p.jsx)(Ie,{})};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(p.Fragment,{children:n()})})})));t.default=Object(c.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))((function(e){var t=Object(je.f)(e),n=function(){var e={list:{component:Object(p.jsx)(g,{})}};return t.type?e[t.type]?e[t.type].component:null:Object(p.jsx)(g,{})};return Object(p.jsx)(p.Fragment,{children:"detail"===t.type?Object(p.jsx)(Ve,{}):Object(p.jsx)(p.Fragment,{children:n()})})}))}}]);