(this.webpackJsonpair=this.webpackJsonpair||[]).push([[11],{343:function(e,t,n){"use strict";var a=n(1),c=n(2),o=n(0),r=n(338),i=n(4),l=n.n(i),s=n(78),u=n(6),d=n(5);var f=n(44),m=n(152),b=function(e){var t=o.useRef(!1),n=o.useRef(),a=o.useState(!1),r=Object(d.a)(a,2),i=r[0],l=r[1];o.useEffect((function(){var t;if(e.autoFocus){var a=n.current;t=setTimeout((function(){return a.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var s=e.type,u=e.children,b=e.prefixCls,j=e.buttonProps;return o.createElement(f.a,Object(c.a)({},Object(m.a)(s),{onClick:function(){var n=e.actionFn,a=e.closeModal;if(!t.current)if(t.current=!0,n){var c;if(n.length)c=n(a),t.current=!1;else if(!(c=n()))return void a();!function(n){var a=e.closeModal;n&&n.then&&(l(!0),n.then((function(){a.apply(void 0,arguments)}),(function(e){console.error(e),l(!1),t.current=!1})))}(c)}else a()},loading:i,prefixCls:b},j,{ref:n}),u)},j=n(18),p=n(19),O=n(61),h=function(e){var t=e.icon,n=e.onCancel,c=e.onOk,r=e.close,i=e.zIndex,s=e.afterClose,u=e.visible,d=e.keyboard,f=e.centered,m=e.getContainer,h=e.maskStyle,v=e.okText,g=e.okButtonProps,C=e.cancelText,x=e.cancelButtonProps,y=e.direction,k=e.prefixCls,N=e.rootPrefixCls,S=e.bodyStyle,E=e.closable,T=void 0!==E&&E,w=e.closeIcon,F=e.modalRender,A=e.focusTriggerAfterClose;Object(j.a)(!("string"===typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var P=e.okType||"primary",I="".concat(k,"-confirm"),z=!("okCancel"in e)||e.okCancel,M=e.width||416,R=e.style||{},V=void 0===e.mask||e.mask,B=void 0!==e.maskClosable&&e.maskClosable,D=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),L=l()(I,"".concat(I,"-").concat(e.type),Object(a.a)({},"".concat(I,"-rtl"),"rtl"===y),e.className),U=z&&o.createElement(b,{actionFn:n,closeModal:r,autoFocus:"cancel"===D,buttonProps:x,prefixCls:"".concat(N,"-btn")},C);return o.createElement(q,{prefixCls:k,className:L,wrapClassName:l()(Object(a.a)({},"".concat(I,"-centered"),!!e.centered)),onCancel:function(){return r({triggerCancel:!0})},visible:u,title:"",footer:"",transitionName:Object(O.b)(N,"zoom",e.transitionName),maskTransitionName:Object(O.b)(N,"fade",e.maskTransitionName),mask:V,maskClosable:B,maskStyle:h,style:R,width:M,zIndex:i,afterClose:s,keyboard:d,centered:f,getContainer:m,closable:T,closeIcon:w,modalRender:F,focusTriggerAfterClose:A},o.createElement("div",{className:"".concat(I,"-body-wrapper")},o.createElement(p.a,{prefixCls:N},o.createElement("div",{className:"".concat(I,"-body"),style:S},t,void 0===e.title?null:o.createElement("span",{className:"".concat(I,"-title")},e.title),o.createElement("div",{className:"".concat(I,"-content")},e.content))),o.createElement("div",{className:"".concat(I,"-btns")},U,o.createElement(b,{type:P,actionFn:c,closeModal:r,autoFocus:"ok"===D,buttonProps:g,prefixCls:"".concat(N,"-btn")},v))))},v=n(49),g=n(51),C=n(38),x=function(e,t){var n=e.afterClose,a=e.config,r=o.useState(!0),i=Object(d.a)(r,2),l=i[0],s=i[1],u=o.useState(a),f=Object(d.a)(u,2),m=f[0],b=f[1],j=o.useContext(C.b),p=j.direction,O=j.getPrefixCls,x=O("modal"),y=O();function k(){s(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.some((function(e){return e&&e.triggerCancel}));m.onCancel&&a&&m.onCancel()}return o.useImperativeHandle(t,(function(){return{destroy:k,update:function(e){b((function(t){return Object(c.a)(Object(c.a)({},t),e)}))}}})),o.createElement(g.a,{componentName:"Modal",defaultLocale:v.a.Modal},(function(e){return o.createElement(h,Object(c.a)({prefixCls:x,rootPrefixCls:y},m,{close:k,visible:l,afterClose:n,okText:m.okText||(m.okCancel?e.okText:e.justOkText),direction:p,cancelText:m.cancelText||e.cancelText}))}))},y=o.forwardRef(x),k=n(30),N=n(155),S=n(154),E=n(156),T=n(157),w=n(91),F=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},A="";function P(e){var t=document.createElement("div");document.body.appendChild(t);var n=Object(c.a)(Object(c.a)({},e),{close:i,visible:!0});function a(){var n=k.unmountComponentAtNode(t);n&&t.parentNode&&t.parentNode.removeChild(t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];var r=c.some((function(e){return e&&e.triggerCancel}));e.onCancel&&r&&e.onCancel.apply(e,c);for(var l=0;l<J.length;l++){var s=J[l];if(s===i){J.splice(l,1);break}}}function r(e){var n=e.okText,a=e.cancelText,r=e.prefixCls,i=F(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=Object(w.b)(),l=(0,Object(p.b)().getPrefixCls)(void 0,A),s=r||"".concat(l,"-modal");k.render(o.createElement(h,Object(c.a)({},i,{prefixCls:s,rootPrefixCls:l,okText:n||(i.okCancel?e.okText:e.justOkText),cancelText:a||e.cancelText})),t)}))}function i(){for(var t=this,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];r(n=Object(c.a)(Object(c.a)({},n),{visible:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),a.apply(t,i)}}))}return r(n),J.push(i),{destroy:i,update:function(e){r(n="function"===typeof e?e(n):Object(c.a)(Object(c.a)({},n),e))}}}function I(e){return Object(c.a)(Object(c.a)({icon:o.createElement(T.a,null),okCancel:!1},e),{type:"warning"})}function z(e){return Object(c.a)(Object(c.a)({icon:o.createElement(N.a,null),okCancel:!1},e),{type:"info"})}function M(e){return Object(c.a)(Object(c.a)({icon:o.createElement(S.a,null),okCancel:!1},e),{type:"success"})}function R(e){return Object(c.a)(Object(c.a)({icon:o.createElement(E.a,null),okCancel:!1},e),{type:"error"})}function V(e){return Object(c.a)(Object(c.a)({icon:o.createElement(T.a,null),okCancel:!0},e),{type:"confirm"})}var B=0,D=o.memo(o.forwardRef((function(e,t){var n=function(){var e=o.useState([]),t=Object(d.a)(e,2),n=t[0],a=t[1];return[n,o.useCallback((function(e){return a((function(t){return[].concat(Object(u.a)(t),[e])})),function(){a((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),a=Object(d.a)(n,2),c=a[0],r=a[1];return o.useImperativeHandle(t,(function(){return{patchElement:r}}),[]),o.createElement(o.Fragment,null,c)})));var L,U=n(153),H=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},J=[];Object(U.a)()&&document.documentElement.addEventListener("click",(function(e){L={x:e.pageX,y:e.pageY},setTimeout((function(){L=null}),100)}),!0);var _=function(e){var t,n=o.useContext(C.b),i=n.getPopupContainer,u=n.getPrefixCls,d=n.direction,b=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},j=function(t){var n=e.onOk;null===n||void 0===n||n(t)},p=function(t){var n=e.okText,a=e.okType,r=e.cancelText,i=e.confirmLoading;return o.createElement(o.Fragment,null,o.createElement(f.a,Object(c.a)({onClick:b},e.cancelButtonProps),r||t.cancelText),o.createElement(f.a,Object(c.a)({},Object(m.a)(a),{loading:i,onClick:j},e.okButtonProps),n||t.okText))},h=e.prefixCls,v=e.footer,x=e.visible,y=e.wrapClassName,k=e.centered,N=e.getContainer,S=e.closeIcon,E=e.focusTriggerAfterClose,T=void 0===E||E,F=H(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),A=u("modal",h),P=u(),I=o.createElement(g.a,{componentName:"Modal",defaultLocale:Object(w.b)()},p),z=o.createElement("span",{className:"".concat(A,"-close-x")},S||o.createElement(s.a,{className:"".concat(A,"-close-icon")})),M=l()(y,(t={},Object(a.a)(t,"".concat(A,"-centered"),!!k),Object(a.a)(t,"".concat(A,"-wrap-rtl"),"rtl"===d),t));return o.createElement(r.a,Object(c.a)({},F,{getContainer:void 0===N?i:N,prefixCls:A,wrapClassName:M,footer:void 0===v?I:v,visible:x,mousePosition:L,onClose:b,closeIcon:z,focusTriggerAfterClose:T,transitionName:Object(O.b)(P,"zoom",e.transitionName),maskTransitionName:Object(O.b)(P,"fade",e.maskTransitionName)}))};_.useModal=function(){var e=o.useRef(null),t=o.useState([]),n=Object(d.a)(t,2),a=n[0],c=n[1];o.useEffect((function(){a.length&&(Object(u.a)(a).forEach((function(e){e()})),c([]))}),[a]);var r=o.useCallback((function(t){return function(n){var a;B+=1;var r,i=o.createRef(),l=o.createElement(y,{key:"modal-".concat(B),config:t(n),ref:i,afterClose:function(){r()}});return r=null===(a=e.current)||void 0===a?void 0:a.patchElement(l),{destroy:function(){function e(){var e;null===(e=i.current)||void 0===e||e.destroy()}i.current?e():c((function(t){return[].concat(Object(u.a)(t),[e])}))},update:function(e){function t(){var t;null===(t=i.current)||void 0===t||t.update(e)}i.current?t():c((function(e){return[].concat(Object(u.a)(e),[t])}))}}}}),[]);return[o.useMemo((function(){return{info:r(z),success:r(M),error:r(R),warning:r(I),confirm:r(V)}}),[]),o.createElement(D,{ref:e})]},_.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var q=_;function G(e){return P(I(e))}var X=q;X.info=function(e){return P(z(e))},X.success=function(e){return P(M(e))},X.error=function(e){return P(R(e))},X.warning=G,X.warn=G,X.confirm=function(e){return P(V(e))},X.destroyAll=function(){for(;J.length;){var e=J.pop();e&&e()}},X.config=function(e){var t=e.rootPrefixCls;Object(j.a)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),A=t};t.a=X},390:function(e,t,n){"use strict";n.r(t);var a=n(31),c=n(0),o=n(104),r=n(25),i=n(343),l=n(213),s=n(44),u=n(134),d=n(7);var f=function(e){var t=e.onAdd;return Object(d.jsx)("div",{className:"m-content-tool",children:Object(d.jsx)("div",{className:"m-content-tool-row",children:Object(d.jsxs)(s.a,{className:"m-space",type:"primary",onClick:t,children:[Object(d.jsx)(u.c,{name:"add",className:"m-tool-btn-icon"}),"\u6dfb\u52a0"]})})})},m=n(326),b=n(103),j=n(50),p=function(e){return[{title:"ID",dataIndex:"id"},{title:"\u540d\u79f0",dataIndex:"name"},{title:"\u6dfb\u52a0/\u66f4\u65b0\u65f6\u95f4",dataIndex:"addtime",render:j.i},{title:"\u72b6\u6001",dataIndex:"isUp",render:function(e){var t={0:{title:"\u4e0b\u67b6",className:"no-pass"},1:{title:"\u4e0a\u67b6",className:"pass"}};return Object(d.jsx)("span",{className:"m-check-status ".concat(t[e]&&t[e].className),children:t[e]&&t[e].title})}},{title:"\u64cd\u4f5c",render:function(t){return Object(d.jsxs)("div",{className:"m-action",children:[Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",danger:!0,onClick:function(){return e.onDelete(t)},children:"\u5220\u9664"}),Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onCheck(t)},children:"\u67e5\u770b"}),Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onEdit(t)},children:"\u7f16\u8f91"}),t.isUp?Object(d.jsx)(s.a,{className:"m-action-btn forbidden",size:"small",onClick:function(){return e.onAction({type:"up",record:t})},children:"\u4e0b\u67b6"}):Object(d.jsx)(s.a,{className:"m-action-btn open",size:"small",onClick:function(){return e.onAction({type:"up",record:t})},children:"\u4e0a\u67b6"}),0===t.bdAuditStatus&&Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onAction({type:"check",record:t})},children:"\u767e\u5ea6\u5ba1\u6838"}),0!==t.bdAuditStatus&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onAction({type:"reset",record:t})},children:"\u767e\u5ea6\u66f4\u65b0"}),Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onAction({type:"view",record:t})},children:"\u767e\u5ea6\u67e5\u770b"})]})]})}}]},O=function(e){"m-table-serach ".concat(e?"active":"");return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(m.a,{span:6,children:Object(d.jsx)(l.a.Item,{name:"searchName",label:"\u540d\u79f0",children:Object(d.jsx)(b.a,{placeholder:"\u540d\u79f0"})})})})},h=function(e){var t=e.onOperate,n=e.myAuthObj;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"m-content-tool-row",children:n.btn&&Object(d.jsxs)(s.a,{className:"m-space",type:"primary",onClick:function(){return t({type:0})},children:[Object(d.jsx)(u.c,{name:"correct",className:"m-tool-btn-icon"}),"\u6309\u94ae"]})})})},v=n(77),g=n(151),C=i.a.confirm;var x=n(209),y=i.a.confirm;t.default=Object(o.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(r.g)((function(e){var t=function(e){var t=Object(c.useState)(),n=Object(v.a)(t,2),o=n[0],r=n[1],i=Object(c.useState)(1),s=Object(v.a)(i,2),u=s[0],d=s[1],f=Object(c.useState)({dataSource:[],pageSize:10}),m=Object(v.a)(f,2),b=m[0],j=m[1],p=l.a.useForm(),O=Object(v.a)(p,1)[0],h=l.a.useForm(),x=Object(v.a)(h,1)[0],y=Object(c.useState)(!1),k=Object(v.a)(y,2),N=k[0],S=k[1],E=Object(c.useState)({}),T=Object(v.a)(E,2),w=T[0],F=T[1],A=Object(c.useState)("add"),P=Object(v.a)(A,2),I=P[0],z=P[1],M=Object(c.useState)(),R=Object(v.a)(M,2),V=R[0],B=R[1],D=e.location.search,L={};L={};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?u:t,c=e.pageSize,o=void 0===c?b.pageSize:c,i=Object(a.a)({},x.getFieldsValue());i.name=i.searchName,delete i.searchName,g.a.light.templateSearch(Object(a.a)({pageNum:n,pageSize:o},i)).then((function(e){1===e.state&&(j({dataSource:e.data.list,pageSize:e.data.pageSize}),r(e.data.totalCount),d(e.data.pageNum))}))};return Object(c.useEffect)((function(){U()}),[e.location.search]),Object(c.useEffect)((function(){O.resetFields()}),[N,O]),Object(c.useEffect)((function(){x.resetFields()}),[D,x]),Object(c.useEffect)((function(){document.title="\u7ba1\u7406\u7cfb\u7edf"}),[]),{dataSource:b.dataSource,total:o,current:u,pageSize:b.pageSize,isModalVisible:N,initValues:w,type:I,form:O,searchForm:x,modalTitle:V,handleSearch:U,handleDelete:function(e){console.log("\u5220\u9664, id:",e.id),C({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){g.a.light.templateDelete({ids:[e.id]}).then((function(e){1===e.state&&U({page:u})}))}})},handleAdd:function(){z("add"),F(L),console.log(L),B("\u6dfb\u52a0"),S(!0)},handleEdit:function(e){console.log("\u7f16\u8f91, id:",e),z("edit"),F(Object(a.a)(Object(a.a)(Object(a.a)({},w),e),{})),B("\u7f16\u8f91"),S(!0)},handleCheck:function(e){z("check"),F(Object(a.a)(Object(a.a)(Object(a.a)({},w),e),{})),B("\u67e5\u770b"),S(!0)},setIsModalVisible:S,handleFinish:function(e){console.log("Success:",e),"add"===I?g.a.light.templateAdd({dataItem:e}).then((function(e){1===e.state&&(S(!1),U())})):"edit"===I&&g.a.light.templateEdit({id:w.id,dataItem:Object(a.a)(Object(a.a)({},w),e)}).then((function(e){1===e.state&&(S(!1),U({page:u}))}))},handleFinishFailed:function(e){console.log("Failed:",e)},handleAction:function(e){var t=e.type,n=e.record;"up"===t&&C({title:"\u786e\u8ba4\u8981".concat(1===n.isUp?"\u4e0b\u67b6":"\u4e0a\u67b6","\u5417\uff1f"),onOk:function(){g.a.light.templateUp({id:n.id,isUp:1===n.isUp?0:1}).then((function(e){1===e.state&&U({page:u})}))}})}}}(e),n=t.dataSource,o=t.total,r=t.current,m=t.pageSize,j=t.isModalVisible,k=t.initValues,N=t.type,S=t.form,E=t.searchForm,T=t.modalTitle,w=t.handleSearch,F=t.handleDelete,A=t.handleAdd,P=t.handleEdit,I=t.handleCheck,z=t.setIsModalVisible,M=t.handleFinish,R=t.handleFinishFailed,V=t.handleAction,B=function(){var e=Object(c.useState)([]),t=Object(v.a)(e,2),n=t[0],a=t[1];return{handleRowSelect:function(e,t){console.log(e,t),a(e)},handleOperate:function(e){var t=e.type;0===n.length?x.b.warning("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879"):0===t&&y({title:"\u786e\u8ba4\u8981\u6279\u91cf\u63d0\u4ea4\u767e\u5ea6\u5ba1\u6838\u5417?",onOk:function(){console.log(n)}})}}}(),D=B.handleRowSelect,L=B.handleOperate;return Object(d.jsx)("div",{className:"m-list-wrap",children:Object(d.jsxs)("div",{className:"m-content-list-wrap",id:"m-content-wrap",children:[Object(d.jsx)("div",{className:"m-template-page",children:"\u7ba1\u7406\u7cfb\u7edf"}),Object(d.jsx)(u.g,{searchForm:E,onSearch:w,getSearchFields:O,isReset:!0}),Object(d.jsx)(f,{onAdd:A,onOperate:L,getToolBtnList:h}),Object(d.jsx)(u.f,{dataSource:n,total:o,current:r,pageSize:m,onSearch:w,onDelete:F,onEdit:P,onCheck:I,onRowSelect:D,onAction:V,getColumns:p}),Object(d.jsx)(i.a,{title:T,visible:j,onCancel:function(){return z(!1)},footer:null,width:800,forceRender:!0,children:Object(d.jsxs)(l.a,{form:S,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(a.a)({},k),scrollToFirstError:!0,onFinish:M,onFinishFailed:R,children:[Object(d.jsx)("div",{id:"m-modal-form-info",className:"m-modal-form-info",children:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(l.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01"}],children:Object(d.jsx)(b.a,{})})})}),Object(d.jsxs)(l.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===N||"edit"===N)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(s.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(d.jsx)(u.c,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(d.jsxs)(s.a,{className:"m-space",onClick:function(){S.resetFields()},children:[Object(d.jsx)(u.c,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(d.jsx)(s.a,{className:"m-space",onClick:function(){return z(!1)},children:"\u53d6\u6d88"})]})]})})]})})})))}}]);