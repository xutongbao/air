(this.webpackJsonpair=this.webpackJsonpair||[]).push([[12],{115:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p}));var n=a(114),r=(a(65),a(365)),i=a(363),o=a(134),c=a.n(o),l=a(9),s=r.a.TextArea,u=function(e){return function(e){var t={},a=e.split("?");if(a.length<=1)return t;for(var n=0,r=(a=a[1].split("&")).length;n<r;n++){var i=a[n].split("=");t[i[0]]=i[1]}return t}(e.location.search)},d=function(e){var t=/http(s)?:\/\/([A-Za-z0123456789:.-]+)\/\S+/.exec(e);if(t)return"http://"+t[2]},m=function(){return[{id:1,title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",component:Object(l.jsx)(r.a,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(r.a,Object(n.a)({},t))}},{id:2,title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",component:Object(l.jsx)(s,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(s,Object(n.a)({},t))}},{id:3,title:"\u6570\u5b57",formComponentName:"InputNumber",component:Object(l.jsx)(i.a,{style:{width:"100%"}}),getComponent:function(e){var t=e.props;return Object(l.jsx)(i.a,Object(n.a)({style:{width:"100%"}},t))}},{id:4,title:"\u56fe\u7247",formComponentName:"Image",component:Object(l.jsx)("img",{style:{width:"100%"},alt:"\u56fe\u7247"}),getComponent:function(e){var t=e.props;return Object(l.jsx)("img",Object(n.a)(Object(n.a)({style:{width:"100%"}},t),{},{alt:"\u56fe\u7247"}))}}]},p=function(){return[{id:1,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input","TextArea"],render:function(e){return Object(l.jsx)("span",{children:e})}},{id:2,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(l.jsx)("span",{children:e?c()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{id:3,title:"\u56fe\u7247",renderFunName:"renderImage",formComponentNameArr:["Image"],render:function(e){return Object(l.jsx)("img",{alt:"\u56fe\u7247",src:e})}}]}},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="https://efficacious-tiny-infinity.glitch.me";console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/air",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MODE:"test"})),console.log(n)},119:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return g}));var n=a(0),r=a(9);function i(e){var t=e.name,a=e.className,n=e.title;return Object(r.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(a||""),title:n,onClick:e.onClick})}var o=a(359);var c=function(e){var t=e.dataSource,a=e.total,n=e.current,i=e.pageSize,c=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(o.a,{className:"m-my-table",columns:c(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,a){return e.onRowSelect(t,a)}},pagination:{current:n,total:a,pageSize:i,onChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var l=function(e){var t=e.dataSource,a=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(o.a,{className:"m-my-table",columns:a(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=a(114),u=a(121),d=a(218),m=a(365);function p(e){var t=e.value,a=void 0===t?{}:t,i=e.onChange,o=Object(n.useState)(!1),c=Object(u.a)(o,2),l=c[0],p=c[1],f=Object(n.useState)(),h=Object(u.a)(f,2),A=h[0],j=h[1],b=function(e){i(Object(s.a)(Object(s.a)({required:l,message:A},a),e))},g=!1,O="";return a&&"boolean"===typeof a.required?(g=a.required,O=a.message):(g=l,O=A),Object(r.jsxs)("div",{children:[Object(r.jsx)(d.a,{checked:g,onChange:function(e){p(e.target.checked),b({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(r.jsx)(m.a,{className:"m-fields-required-input ".concat(g?"active":""),value:O,onChange:function(e){j(e.target.value),b({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}var f=a(89),h=a(360),A=a(122),j=a(120),b=a(115);function g(e){var t=e.value,a=void 0===t?"":t,n=e.msg,i=e.onChange,o=e.accept,c=void 0===o?".jpg":o,l={uid:"-1",name:a,status:"done",url:a},u=[];a&&u.push(l);var d={name:"file",action:j.a.light.testUpload,maxCount:1,listType:"picture",defaultFileList:[].concat(u),accept:c,onChange:function(e){if("done"===e.file.status){if(f.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),1===e.file.response.state){var t=Object(b.b)("https://efficacious-tiny-infinity.glitch.me/api/upload");console.log(t);var a="".concat(Object(b.b)(e.file.xhr.responseURL),"/").concat(e.file.response.data.filename);console.log(a),i(a)}}else"error"===e.file.status&&f.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return Object(r.jsx)("span",{children:Object(r.jsxs)(h.a,Object(s.a)(Object(s.a)({},d),{},{children:[Object(r.jsx)(A.a,{children:"\u4e0a\u4f20\u56fe\u7247"}),Object(r.jsx)("span",{className:"m-upload-text",children:n})]}))})}},120:function(e,t,a){"use strict";var n={light:{testUpload:a(117).a+"/api/upload",templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit",fieldsEditAll:"/api/fields/editAll"}};t.a=n},123:function(e,t,a){"use strict";var n=a(120),r=a(136),i=a.n(r),o=a(137),c=a(114),l=a(138),s=a.n(l),u=a(89),d=a(117);s.a.defaults.baseURL=d.a,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(c.a)({},e.data):e.data=Object(c.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(u.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={light:{templateSearch:function(e){return m({url:n.a.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:n.a.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:n.a.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:n.a.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:n.a.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:n.a.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:n.a.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:n.a.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:n.a.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:n.a.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:n.a.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:n.a.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:n.a.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:n.a.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:n.a.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:n.a.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:n.a.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:n.a.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:n.a.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:n.a.light.fieldsEdit,data:e,method:"post"})},fieldsEditAll:function(e){return m({url:n.a.light.fieldsEditAll,data:e,method:"post"})}}};t.a=p},369:function(e,t,a){"use strict";a.r(t);var n=a(114),r=a(0),i=a(63),o=a(6),c=a(367),l=a(374),s=a(362),u=a(361),d=a(122),m=a(119),p=a(121),f=a(123),h=a(115),A=a(365),j=a(9);a(211);var b=a(341);function g(e){var t=u.a.useForm(),a=Object(p.a)(t,1)[0],n=Object(r.useState)([]),i=Object(p.a)(n,2),o=i[0],c=i[1],l={getColumns:function(e){return e.filter((function(e){return e.isColumn})).map((function(e){return{title:e.title,dataIndex:e.dataIndex,render:function(t,a){var n=Object(h.c)().find((function(t){return t.renderFunName===e.renderFunName}));return n?n.render(t,a):t}}}))},getModalFields:function(e){var t=[];return e.forEach((function(e){if(e.isModalField){var a=Object(h.a)().find((function(t){return t.formComponentName===e.formComponentName}));"formItem"===e.type?t.push(Object(j.jsx)(u.a.Item,{label:e.title,name:e.dataIndex,rules:e.rules,className:"m-formview-formitem",children:a?a.getComponent({props:e.props}):Object(j.jsx)(A.a,{})},e.id)):"image"===e.type&&t.push(Object(j.jsx)(u.a.Item,{name:e.dataIndex,wrapperCol:24,children:a?a.getComponent({props:{src:e.src}}):Object(j.jsx)(A.a,{})},e.id))}})),t}}.getModalFields,s=Object(r.useState)({}),d=Object(p.a)(s,2),m=d[0],g=(d[1],Object(r.useState)(!1)),O=Object(p.a)(g,2),x=O[0],v=O[1],y=Object(r.useState)(""),S=Object(p.a)(y,2),w=S[0],C=S[1],E=Object(r.useState)(!1),D=Object(p.a)(E,2),F=D[0],B=D[1],T=Object(r.useState)(),N=Object(p.a)(T,2),I=N[0],R=N[1],Q=Object(h.d)(e).id,M=function(){f.a.light.fieldsSearch({tableId:Q}).then((function(e){if(200===e.code){var t=e.data.fields;c(l(e.data.fields)),C(e.data.title);var a=t.filter((function(e){return e.isModalField}));Array.isArray(a)&&a.length>0&&"image"===a[0].type&&B(!0)}}))};return Object(r.useEffect)((function(){M()}),[e.location.search]),Object(r.useEffect)((function(){var e=new Image;b.a.toImage({image:e,content:document.location.href,logo:{src:"data:image/png;base64,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"}}),e.id="m-img",e.style="display:none;",document.body.appendChild(e);var t=document.getElementById("m-img");setTimeout((function(){R(t.src)}))}),[]),{form:a,initValues:m,modalFields:o,isShowResult:x,title:w,isImageFirst:F,qrCodeImageUrl:I,handleSearch:M,handleFinish:function(e){console.log("Success:",e),f.a.light.tableAdd({tableId:Q,dataItem:e}).then((function(e){200===e.code&&v(!0)}))},handleFinishFailed:function(e){console.log("Failed:",e)}}}t.default=Object(i.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(o.g)((function(e){var t=g(e),a=t.initValues,r=t.form,i=t.modalFields,o=t.isShowResult,p=t.title,f=t.isImageFirst,h=t.qrCodeImageUrl,A=t.handleFinish,b=t.handleFinishFailed;return Object(j.jsx)("div",{className:"m-formview-wrap",children:Object(j.jsxs)("div",{className:"m-formview-inner",children:[Object(j.jsx)("div",{className:"m-formview-color-header"}),o?Object(j.jsx)(c.a,{status:"success",title:"\u63d0\u4ea4\u6210\u529f",subTitle:"\u611f\u8c22\u60a8\u7684\u53c2\u4e0e"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"m-formview-header ".concat(f?"image-first":""),children:Object(j.jsxs)(l.b,{children:[Object(j.jsx)("span",{children:p}),h&&Object(j.jsx)(s.a,{className:"m-qrcode-img",src:h,alt:"\u56fe\u7247",preview:{mask:""}})]})}),Object(j.jsxs)(u.a,{form:r,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(n.a)({},a),onFinish:A,onFinishFailed:b,children:[i,Object(j.jsxs)(u.a.Item,{wrapperCol:{offset:4,span:17},className:"m-formview-formitem m-formview-formitem-footer-mobile",children:[Object(j.jsxs)(d.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(j.jsx)(m.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(j.jsxs)(d.a,{className:"m-space",onClick:function(){r.resetFields()},children:[Object(j.jsx)(m.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]})]})]})]})})})))}}]);