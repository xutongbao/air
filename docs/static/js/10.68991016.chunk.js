(this.webpackJsonpair=this.webpackJsonpair||[]).push([[10],{115:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var a=n(114),r=(n(65),n(368)),o=n(366),c=n(135),i=n.n(c),l=n(9),s=r.a.TextArea,u=function(e){return function(e){var t={},n=e.split("?");if(n.length<=1)return t;for(var a=0,r=(n=n[1].split("&")).length;a<r;a++){var o=n[a].split("=");t[o[0]]=o[1]}return t}(e.location.search)},d=function(e){var t=/http(s)?:\/\/([A-Za-z0123456789:.-]+)\/\S+/.exec(e);if(t)return"http://"+t[2]},m=function(){return[{id:1,title:"\u5355\u884c\u6587\u672c",formComponentName:"Input",component:Object(l.jsx)(r.a,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(r.a,Object(a.a)({},t))}},{id:2,title:"\u591a\u884c\u6587\u672c",formComponentName:"TextArea",component:Object(l.jsx)(s,{}),getComponent:function(e){var t=e.props;return Object(l.jsx)(s,Object(a.a)({},t))}},{id:3,title:"\u6570\u5b57",formComponentName:"InputNumber",component:Object(l.jsx)(o.a,{style:{width:"100%"}}),getComponent:function(e){var t=e.props;return Object(l.jsx)(o.a,Object(a.a)({style:{width:"100%"}},t))}},{id:4,title:"\u56fe\u7247",formComponentName:"Image",component:Object(l.jsx)("img",{style:{width:"100%"},alt:"\u56fe\u7247"}),getComponent:function(e){var t=e.props;return Object(l.jsx)("img",Object(a.a)(Object(a.a)({style:{width:"100%"}},t),{},{alt:"\u56fe\u7247"}))}}]},f=function(){return[{id:1,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input","TextArea"],render:function(e){return Object(l.jsx)("span",{children:e})}},{id:2,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(l.jsx)("span",{children:e?i()(e).format("YYYY-MM-DD HH:mm:ss"):""})}},{id:3,title:"\u56fe\u7247",renderFunName:"renderImage",formComponentNameArr:["Image"],render:function(e){return Object(l.jsx)("img",{alt:"\u56fe\u7247",src:e})}}]}},116:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return g}));var a=n(0),r=n(9);function o(e){var t=e.name,n=e.className,a=e.title;return Object(r.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(n||""),title:a,onClick:e.onClick})}var c=n(361);var i=function(e){var t=e.dataSource,n=e.total,a=e.current,o=e.pageSize,i=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:i(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,n){return e.onRowSelect(t,n)}},pagination:{current:a,total:n,pageSize:o,onChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,n){return e.onSearch({page:t,pageSize:n})},showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var l=function(e){var t=e.dataSource,n=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(c.a,{className:"m-my-table",columns:n(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=n(114),u=n(117),d=n(222),m=n(368);function f(e){var t=e.value,n=void 0===t?{}:t,o=e.onChange,c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],f=i[1],p=Object(a.useState)(),b=Object(u.a)(p,2),j=b[0],h=b[1],O=function(e){o(Object(s.a)(Object(s.a)({required:l,message:j},n),e))},g=!1,v="";return n&&"boolean"===typeof n.required?(g=n.required,v=n.message):(g=l,v=j),Object(r.jsxs)("div",{children:[Object(r.jsx)(d.a,{checked:g,onChange:function(e){f(e.target.checked),O({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(r.jsx)(m.a,{className:"m-fields-required-input ".concat(g?"active":""),value:v,onChange:function(e){h(e.target.value),O({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}var p=n(89),b=n(362),j=n(123),h=n(122),O=n(115);function g(e){var t=e.value,n=void 0===t?"":t,a=e.msg,o=e.onChange,c=e.accept,i=void 0===c?".jpg":c,l={uid:"-1",name:n,status:"done",url:n},u=[];n&&u.push(l);var d={name:"file",action:h.a.light.testUpload,maxCount:1,listType:"picture",defaultFileList:[].concat(u),accept:i,onChange:function(e){if("done"===e.file.status){if(p.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")),1===e.file.response.state){var t=Object(O.b)("https://efficacious-tiny-infinity.glitch.me/api/upload");console.log(t);var n="".concat(Object(O.b)(e.file.xhr.responseURL),"/").concat(e.file.response.data.filename);console.log(n),o(n)}}else"error"===e.file.status&&p.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25"))}};return Object(r.jsx)("span",{children:Object(r.jsxs)(b.a,Object(s.a)(Object(s.a)({},d),{},{children:[Object(r.jsx)(j.a,{children:"\u4e0a\u4f20\u56fe\u7247"}),Object(r.jsx)("span",{className:"m-upload-text",children:a})]}))})}},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="https://efficacious-tiny-infinity.glitch.me"},121:function(e,t,n){"use strict";var a=n(122),r=n(137),o=n.n(r),c=n(138),i=n(114),l=n(139),s=n.n(l),u=n(89),d=n(119);s.a.defaults.baseURL=d.a,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(i.a)({},e.data):e.data=Object(i.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(u.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={light:{templateSearch:function(e){return m({url:a.a.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:a.a.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:a.a.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:a.a.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:a.a.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:a.a.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:a.a.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:a.a.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:a.a.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:a.a.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:a.a.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:a.a.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:a.a.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:a.a.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:a.a.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:a.a.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:a.a.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:a.a.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:a.a.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:a.a.light.fieldsEdit,data:e,method:"post"})},fieldsEditAll:function(e){return m({url:a.a.light.fieldsEditAll,data:e,method:"post"})}}};t.a=f},122:function(e,t,n){"use strict";var a={light:{testUpload:n(119).a+"/api/upload",templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit",fieldsEditAll:"/api/fields/editAll"}};t.a=a},162:function(e,t,n){"use strict";var a=n(4),r=n(2),o=n(0),c=n(144),i=n(12),l=n.n(i),s=n(63),u=n(3),d=n(5);var m=n(123),f=n(126),p=function(e){var t=o.useRef(!1),n=o.useRef(),a=o.useState(!1),c=Object(d.a)(a,2),i=c[0],l=c[1];o.useEffect((function(){var t;if(e.autoFocus){var a=n.current;t=setTimeout((function(){return a.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var s=e.type,u=e.children,p=e.prefixCls,b=e.buttonProps;return o.createElement(m.a,Object(r.a)({},Object(f.a)(s),{onClick:function(){var n=e.actionFn,a=e.closeModal;if(!t.current)if(t.current=!0,n){var r;if(n.length)r=n(a),t.current=!1;else if(!(r=n()))return void a();!function(n){var a=e.closeModal;n&&n.then&&(l(!0),n.then((function(){a.apply(void 0,arguments)}),(function(e){console.error(e),l(!1),t.current=!1})))}(r)}else a()},loading:i,prefixCls:p},b,{ref:n}),u)},b=n(58),j=n(25),h=n(120),O=function(e){var t=e.icon,n=e.onCancel,r=e.onOk,c=e.close,i=e.zIndex,s=e.afterClose,u=e.visible,d=e.keyboard,m=e.centered,f=e.getContainer,O=e.maskStyle,g=e.okText,v=e.okButtonProps,x=e.cancelText,C=e.cancelButtonProps,y=e.direction,N=e.prefixCls,k=e.rootPrefixCls,T=e.bodyStyle,E=e.closable,S=void 0!==E&&E,I=e.closeIcon,A=e.modalRender,w=e.focusTriggerAfterClose;Object(b.a)(!("string"===typeof t&&t.length>2),"Modal","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(t,"` at https://ant.design/components/icon"));var P=e.okType||"primary",F="".concat(N,"-confirm"),D=!("okCancel"in e)||e.okCancel,M=e.width||416,z=e.style||{},R=void 0===e.mask||e.mask,q=void 0!==e.maskClosable&&e.maskClosable,V=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),L=l()(F,"".concat(F,"-").concat(e.type),Object(a.a)({},"".concat(F,"-rtl"),"rtl"===y),e.className),B=D&&o.createElement(p,{actionFn:n,closeModal:c,autoFocus:"cancel"===V,buttonProps:C,prefixCls:"".concat(k,"-btn")},x);return o.createElement(J,{prefixCls:N,className:L,wrapClassName:l()(Object(a.a)({},"".concat(F,"-centered"),!!e.centered)),onCancel:function(){return c({triggerCancel:!0})},visible:u,title:"",footer:"",transitionName:Object(h.b)(k,"zoom",e.transitionName),maskTransitionName:Object(h.b)(k,"fade",e.maskTransitionName),mask:R,maskClosable:q,maskStyle:O,style:z,width:M,zIndex:i,afterClose:s,keyboard:d,centered:m,getContainer:f,closable:S,closeIcon:I,modalRender:A,focusTriggerAfterClose:w},o.createElement("div",{className:"".concat(F,"-body-wrapper")},o.createElement(j.a,{prefixCls:k},o.createElement("div",{className:"".concat(F,"-body"),style:T},t,void 0===e.title?null:o.createElement("span",{className:"".concat(F,"-title")},e.title),o.createElement("div",{className:"".concat(F,"-content")},e.content))),o.createElement("div",{className:"".concat(F,"-btns")},B,o.createElement(p,{type:P,actionFn:r,closeModal:c,autoFocus:"ok"===V,buttonProps:v,prefixCls:"".concat(k,"-btn")},g))))},g=n(34),v=n(40),x=n(28),C=function(e,t){var n=e.afterClose,a=e.config,c=o.useState(!0),i=Object(d.a)(c,2),l=i[0],s=i[1],u=o.useState(a),m=Object(d.a)(u,2),f=m[0],p=m[1],b=o.useContext(x.b),j=b.direction,h=b.getPrefixCls,C=h("modal"),y=h();function N(){s(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.some((function(e){return e&&e.triggerCancel}));f.onCancel&&a&&f.onCancel()}return o.useImperativeHandle(t,(function(){return{destroy:N,update:function(e){p((function(t){return Object(r.a)(Object(r.a)({},t),e)}))}}})),o.createElement(v.a,{componentName:"Modal",defaultLocale:g.a.Modal},(function(e){return o.createElement(O,Object(r.a)({prefixCls:C,rootPrefixCls:y},f,{close:N,visible:l,afterClose:n,okText:f.okText||(f.okCancel?e.okText:e.justOkText),direction:j,cancelText:f.cancelText||e.cancelText}))}))},y=o.forwardRef(C),N=n(23),k=n(68),T=n(67),E=n(69),S=n(70),I=n(33),A=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},w="";function P(e){var t=document.createElement("div");document.body.appendChild(t);var n=Object(r.a)(Object(r.a)({},e),{close:i,visible:!0});function a(){var n=N.unmountComponentAtNode(t);n&&t.parentNode&&t.parentNode.removeChild(t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];var c=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&c&&e.onCancel.apply(e,r);for(var l=0;l<Y.length;l++){var s=Y[l];if(s===i){Y.splice(l,1);break}}}function c(e){var n=e.okText,a=e.cancelText,c=e.prefixCls,i=A(e,["okText","cancelText","prefixCls"]);setTimeout((function(){var e=Object(I.b)(),l=(0,Object(j.b)().getPrefixCls)(void 0,w),s=c||"".concat(l,"-modal");N.render(o.createElement(O,Object(r.a)({},i,{prefixCls:s,rootPrefixCls:l,okText:n||(i.okCancel?e.okText:e.justOkText),cancelText:a||e.cancelText})),t)}))}function i(){for(var t=this,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];c(n=Object(r.a)(Object(r.a)({},n),{visible:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),a.apply(t,i)}}))}return c(n),Y.push(i),{destroy:i,update:function(e){c(n="function"===typeof e?e(n):Object(r.a)(Object(r.a)({},n),e))}}}function F(e){return Object(r.a)(Object(r.a)({icon:o.createElement(S.a,null),okCancel:!1},e),{type:"warning"})}function D(e){return Object(r.a)(Object(r.a)({icon:o.createElement(k.a,null),okCancel:!1},e),{type:"info"})}function M(e){return Object(r.a)(Object(r.a)({icon:o.createElement(T.a,null),okCancel:!1},e),{type:"success"})}function z(e){return Object(r.a)(Object(r.a)({icon:o.createElement(E.a,null),okCancel:!1},e),{type:"error"})}function R(e){return Object(r.a)(Object(r.a)({icon:o.createElement(S.a,null),okCancel:!0},e),{type:"confirm"})}var q=0,V=o.memo(o.forwardRef((function(e,t){var n=function(){var e=o.useState([]),t=Object(d.a)(e,2),n=t[0],a=t[1];return[n,o.useCallback((function(e){return a((function(t){return[].concat(Object(u.a)(t),[e])})),function(){a((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),a=Object(d.a)(n,2),r=a[0],c=a[1];return o.useImperativeHandle(t,(function(){return{patchElement:c}}),[]),o.createElement(o.Fragment,null,r)})));var L,B=n(142),H=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Y=[];Object(B.a)()&&document.documentElement.addEventListener("click",(function(e){L={x:e.pageX,y:e.pageY},setTimeout((function(){L=null}),100)}),!0);var U=function(e){var t,n=o.useContext(x.b),i=n.getPopupContainer,u=n.getPrefixCls,d=n.direction,p=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},b=function(t){var n=e.onOk;null===n||void 0===n||n(t)},j=function(t){var n=e.okText,a=e.okType,c=e.cancelText,i=e.confirmLoading;return o.createElement(o.Fragment,null,o.createElement(m.a,Object(r.a)({onClick:p},e.cancelButtonProps),c||t.cancelText),o.createElement(m.a,Object(r.a)({},Object(f.a)(a),{loading:i,onClick:b},e.okButtonProps),n||t.okText))},O=e.prefixCls,g=e.footer,C=e.visible,y=e.wrapClassName,N=e.centered,k=e.getContainer,T=e.closeIcon,E=e.focusTriggerAfterClose,S=void 0===E||E,A=H(e,["prefixCls","footer","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),w=u("modal",O),P=u(),F=o.createElement(v.a,{componentName:"Modal",defaultLocale:Object(I.b)()},j),D=o.createElement("span",{className:"".concat(w,"-close-x")},T||o.createElement(s.a,{className:"".concat(w,"-close-icon")})),M=l()(y,(t={},Object(a.a)(t,"".concat(w,"-centered"),!!N),Object(a.a)(t,"".concat(w,"-wrap-rtl"),"rtl"===d),t));return o.createElement(c.a,Object(r.a)({},A,{getContainer:void 0===k?i:k,prefixCls:w,wrapClassName:M,footer:void 0===g?F:g,visible:C,mousePosition:L,onClose:p,closeIcon:D,focusTriggerAfterClose:S,transitionName:Object(h.b)(P,"zoom",e.transitionName),maskTransitionName:Object(h.b)(P,"fade",e.maskTransitionName)}))};U.useModal=function(){var e=o.useRef(null),t=o.useState([]),n=Object(d.a)(t,2),a=n[0],r=n[1];o.useEffect((function(){a.length&&(Object(u.a)(a).forEach((function(e){e()})),r([]))}),[a]);var c=o.useCallback((function(t){return function(n){var a;q+=1;var c,i=o.createRef(),l=o.createElement(y,{key:"modal-".concat(q),config:t(n),ref:i,afterClose:function(){c()}});return c=null===(a=e.current)||void 0===a?void 0:a.patchElement(l),{destroy:function(){function e(){var e;null===(e=i.current)||void 0===e||e.destroy()}i.current?e():r((function(t){return[].concat(Object(u.a)(t),[e])}))},update:function(e){function t(){var t;null===(t=i.current)||void 0===t||t.update(e)}i.current?t():r((function(e){return[].concat(Object(u.a)(e),[t])}))}}}}),[]);return[o.useMemo((function(){return{info:c(D),success:c(M),error:c(z),warning:c(F),confirm:c(R)}}),[]),o.createElement(V,{ref:e})]},U.defaultProps={width:520,confirmLoading:!1,visible:!1,okType:"primary"};var J=U;function K(e){return P(F(e))}var _=J;_.info=function(e){return P(D(e))},_.success=function(e){return P(M(e))},_.error=function(e){return P(z(e))},_.warning=K,_.warn=K,_.confirm=function(e){return P(R(e))},_.destroyAll=function(){for(;Y.length;){var e=Y.pop();e&&e()}},_.config=function(e){var t=e.rootPrefixCls;Object(b.a)(!1,"Modal","Modal.config is deprecated. Please use ConfigProvider.config instead."),w=t};t.a=_},371:function(e,t,n){"use strict";n.r(t);var a=n(114),r=n(0),o=n(61),c=n(6),i=n(162),l=n(363),s=n(123),u=n(116),d=n(9);var m=function(e){var t=e.onAdd;return Object(d.jsx)("div",{className:"m-content-tool",children:Object(d.jsx)("div",{className:"m-content-tool-row",children:Object(d.jsxs)(s.a,{className:"m-space",type:"primary",onClick:t,children:[Object(d.jsx)(u.b,{name:"add",className:"m-tool-btn-icon"}),"\u6dfb\u52a0\u5b57\u6bb5"]})})})},f=n(221),p=n(368),b=n(222),j=n(366),h=n(115),O=f.a.Option,g=function(e){return[{title:"ID",dataIndex:"id"},{title:"\u5b57\u6bb5\u540d\u79f0",dataIndex:"title"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"dataIndex"},{title:"\u8868\u5355\u7ec4\u4ef6\u540d",dataIndex:"formComponentName",render:function(e){return e||"\u65e0"}},{title:"\u6e32\u67d3\u51fd\u6570\u540d",dataIndex:"renderFunName",render:function(e){return e||"\u65e0"}},{title:"\u5b57\u6bb5\u5fc5\u586b",dataIndex:"rules",render:function(e){var t=Array.isArray(e)&&e.length>0&&e[0];return t&&t.required?"\u662f":"\u5426"}},{title:"\u8868\u683c\u5c55\u793a",dataIndex:"isColumn",render:function(e){return e?"\u662f":"\u5426"}},{title:"\u6dfb\u52a0/\u7f16\u8f91",dataIndex:"isModalField",render:function(e){return e?"\u662f":"\u5426"}},{title:"\u987a\u5e8f\u53f7",dataIndex:"orderIndex",render:function(e){return"number"===typeof e?e:"\u65e0"}},{title:"\u64cd\u4f5c",width:220,render:function(t){return t.isSystem?"\u7cfb\u7edf\u5b57\u6bb5":Object(d.jsxs)("div",{className:"m-action",children:[Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",danger:!0,onClick:function(){return e.onDelete(t)},children:"\u5220\u9664"}),Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onCheck(t)},children:"\u67e5\u770b"}),Object(d.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onEdit(t)},children:"\u7f16\u8f91"})]})}}]},v=function(e){var t=e.dataSource,n=e.type,a=e.initValues,r=e.formComponentName;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.a.Item,{label:"\u5b57\u6bb5\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"},{validator:function(e,r){return"edit"===n&&r===a.title?Promise.resolve():t.find((function(e){return e.title===r}))?Promise.reject(new Error("\u5b57\u6bb5\u540d\u79f0\u5df2\u5b58\u5728!")):Promise.resolve()}}],children:Object(d.jsx)(p.a,{})}),Object(d.jsx)(l.a.Item,{label:"\u82f1\u6587\u540d\u79f0",name:"dataIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"},{validator:function(e,r){return"edit"===n&&r===a.dataIndex?Promise.resolve():t.find((function(e){return e.dataIndex===r}))?Promise.reject(new Error("\u82f1\u6587\u5b57\u6bb5\u540d\u79f0\u5df2\u5b58\u5728!")):Promise.resolve()}}],children:Object(d.jsx)(p.a,{})}),Object(d.jsx)(l.a.Item,{label:"\u8868\u5355\u7ec4\u4ef6",name:"formComponentName",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8868\u5355\u7ec4\u4ef6\uff01"}],children:Object(d.jsx)(f.a,{placeholder:"\u8bf7\u9009\u62e9",getPopupContainer:function(){return document.getElementById("m-set-application-modal-form")},children:Object(h.a)().map((function(e){return Object(d.jsx)(O,{value:e.formComponentName,children:e.title},e.id)}))})}),Object(d.jsx)(l.a.Item,{label:"\u6e32\u67d3\u51fd\u6570\u540d",name:"renderFunName",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8868\u6e32\u67d3\u51fd\u6570\u540d\uff01"}],children:Object(d.jsx)(f.a,{placeholder:"\u8bf7\u9009\u62e9",getPopupContainer:function(){return document.getElementById("m-set-application-modal-form")},children:Object(h.c)().filter((function(e){return e.formComponentNameArr.includes(r)})).map((function(e){return Object(d.jsx)(O,{value:e.renderFunName,children:e.title},e.id)}))})}),Object(d.jsx)(l.a.Item,{label:"\u5b57\u6bb5\u5fc5\u586b",name:"rules",children:Object(d.jsx)(u.a,{})}),Object(d.jsx)(l.a.Item,{label:"\u8868\u683c\u5c55\u793a",name:"isColumn",valuePropName:"checked",children:Object(d.jsx)(b.a,{children:"\u5c55\u793a"})}),Object(d.jsx)(l.a.Item,{label:"\u6dfb\u52a0/\u7f16\u8f91",name:"isModalField",valuePropName:"checked",children:Object(d.jsx)(b.a,{children:"\u5c55\u793a"})}),Object(d.jsx)(l.a.Item,{label:"\u987a\u5e8f\u53f7",name:"orderIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u987a\u5e8f\u53f7\uff01"}],children:Object(d.jsx)(j.a,{min:1,max:100})})]})};var x=Object(c.g)((function(e){var t=e.applicationTitle;return Object(d.jsxs)("div",{className:"m-set-application-header",children:[Object(d.jsx)(u.b,{name:"goback",title:"\u8fd4\u56de",className:"m-set-application-header-icon",onClick:function(){return e.history.go(-1)}}),Object(d.jsx)("span",{title:t,children:t})]})})),C=n(117),y=n(121),N=i.a.confirm;t.default=Object(o.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_LIGHT_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))(Object(c.g)((function(e){var t=function(e){var t=Object(r.useState)([]),n=Object(C.a)(t,2),o=n[0],c=n[1],i=l.a.useForm(),s=Object(C.a)(i,1)[0],u=Object(r.useState)(!1),d=Object(C.a)(u,2),m=d[0],f=d[1],p=Object(r.useState)({}),b=Object(C.a)(p,2),j=b[0],O=b[1],g=Object(r.useState)("add"),v=Object(C.a)(g,2),x=v[0],k=v[1],T=Object(r.useState)(),E=Object(C.a)(T,2),S=E[0],I=E[1],A=Object(r.useState)(),w=Object(C.a)(A,2),P=w[0],F=w[1],D=Object(r.useState)(),M=Object(C.a)(D,2),z=M[0],R=M[1],q=Object(h.d)(e).id,V={},L=function(){y.a.light.fieldsSearch({tableId:q}).then((function(e){200===e.code&&(c(e.data.fields),I(e.data.title))}))};return Object(r.useEffect)((function(){L()}),[]),Object(r.useEffect)((function(){s.resetFields()}),[m,s]),{dataSource:o,isModalVisible:m,initValues:j,type:x,form:s,applicationTitle:S,modalTitle:P,formComponentName:z,handleSearch:L,handleDelete:function(e){console.log("\u5220\u9664, id:",e.id),N({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){y.a.light.fieldsDelete({tableId:q,ids:[e.id]}).then((function(e){200===e.code&&L()}))}})},handleAdd:function(){k("add"),O(V),console.log(V),F("\u6dfb\u52a0\u5b57\u6bb5"),f(!0)},handleEdit:function(e){console.log("\u7f16\u8f91, id:",e),k("edit"),e.rules=Array.isArray(e.rules)?e.rules[0]:{},O(Object(a.a)(Object(a.a)({},j),e)),F("\u7f16\u8f91\u5b57\u6bb5"),f(!0)},handleCheck:function(e){k("check"),O(Object(a.a)(Object(a.a)({},j),e)),F("\u67e5\u770b\u5b57\u6bb5"),f(!0)},setIsModalVisible:f,handleFinish:function(e){console.log("Success:",e),e.rules=Array.isArray(e.rules)?e.rules:[e.rules],"add"===x?y.a.light.fieldsAdd({tableId:q,dataItem:e}).then((function(e){200===e.code&&(f(!1),L())})):"edit"===x&&(e.rules=Array.isArray(e.rules)?e.rules:[e.rules],y.a.light.fieldsEdit({tableId:q,id:j.id,dataItem:Object(a.a)(Object(a.a)({},j),e)}).then((function(e){200===e.code&&(f(!1),L())})))},handleFinishFailed:function(e){console.log("Failed:",e)},handleValuesChange:function(e,t){console.log(e,t),R(t.formComponentName)}}}(e),n=t.dataSource,o=t.isModalVisible,c=t.initValues,f=t.type,p=t.form,b=t.applicationTitle,j=t.modalTitle,O=t.formComponentName,k=t.handleSearch,T=t.handleDelete,E=t.handleAdd,S=t.handleEdit,I=t.handleCheck,A=t.setIsModalVisible,w=t.handleFinish,P=t.handleFinishFailed,F=t.handleValuesChange;return Object(d.jsxs)("div",{className:"m-admin-content",children:[Object(d.jsx)(x,{applicationTitle:b}),Object(d.jsx)(m,{onAdd:E}),Object(d.jsx)(u.d,{dataSource:n,onSearch:k,onDelete:T,onEdit:S,onCheck:I,getColumns:g}),Object(d.jsx)(i.a,{title:j,visible:o,onCancel:function(){return A(!1)},footer:null,width:900,className:"m-set-application-modal",forceRender:!0,children:Object(d.jsxs)(l.a,{form:p,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(a.a)({},c),scrollToFirstError:!0,onFinish:w,onFinishFailed:P,onValuesChange:F,id:"m-set-application-modal-form",className:"m-set-application-modal-form",children:[v({dataSource:n,type:f,initValues:c,formComponentName:O}),Object(d.jsxs)(l.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===f||"edit"===f)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(s.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(d.jsx)(u.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(d.jsxs)(s.a,{className:"m-space",onClick:function(){p.resetFields()},children:[Object(d.jsx)(u.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(d.jsx)(s.a,{className:"m-space",onClick:function(){return A(!1)},children:"\u53d6\u6d88"})]})]})})]})})))}}]);