(this.webpackJsonpair=this.webpackJsonpair||[]).push([[10],{114:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return h}));var n=a(0),r=a(14);function i(e){var t=e.name,a=e.className;return Object(r.jsx)("span",{className:"icon iconfont icon-".concat(t," ").concat(a||""),onClick:e.onClick})}var l=a(308);var c=function(e){var t=e.dataSource,a=e.total,n=e.current,i=e.pageSize,c=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(l.a,{className:"m-my-table",columns:c(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},rowSelection:{onChange:function(t,a){return e.onRowSelect(t,a)}},pagination:{current:n,total:a,pageSize:i,onChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:function(t,a){return e.onSearch({page:t,pageSize:a})},showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})};var o=function(e){var t=e.dataSource,a=e.getColumns;return Object(r.jsx)("div",{className:"m-content-table",children:Object(r.jsx)(l.a,{className:"m-my-table",columns:a(e),dataSource:t,rowKey:"id",scroll:{scrollToFirstRowOnChange:!0,x:!0},pagination:{showTotal:function(e){return Object(r.jsxs)("span",{children:["\u5171\u6709\u6570\u636e\uff1a ",Object(r.jsx)("span",{className:"m-total-text",children:e})," \u6761"]})}}})})},s=a(113),d=a(119),u=a(195),m=a(311);function h(e){var t=e.value,a=void 0===t?{}:t,i=e.onChange,l=Object(n.useState)(!1),c=Object(d.a)(l,2),o=c[0],h=c[1],p=Object(n.useState)(),f=Object(d.a)(p,2),b=f[0],j=f[1],O=function(e){i(Object(s.a)(Object(s.a)({required:o,message:b},a),e))},g=!1,x="";return"boolean"===typeof a.required?(g=a.required,x=a.message):(g=o,x=b),Object(r.jsxs)("div",{children:[Object(r.jsx)(u.a,{checked:g,onChange:function(e){h(e.target.checked),O({required:e.target.checked})},children:"\u5fc5\u586b"}),Object(r.jsx)(m.a,{className:"m-fields-required-input ".concat(g?"active":""),value:x,onChange:function(e){j(e.target.value),O({message:e.target.value})},placeholder:"\u8bf7\u8f93\u5165\u5fc5\u586b\u63d0\u793a\u8bed"})]})}},117:function(e,t,a){"use strict";var n={light:{templateSearch:"/api/template/search",templateAdd:"/api/template/add",templateDelete:"/api/template/delete",templateEdit:"/api/template/edit",easyTemplateSearch:"/api/easyTemplate/search",easyTemplateAdd:"/api/easyTemplate/add",easyTemplateDelete:"/api/easyTemplate/delete",easyTemplateEdit:"/api/easyTemplate/edit",routerSearch:"/api/router/search",routerAdd:"/api/router/add",routerDelete:"/api/router/delete",routerEdit:"/api/router/edit",tableSearch:"/api/table/search",tableAdd:"/api/table/add",tableDelete:"/api/table/delete",tableEdit:"/api/table/edit",fieldsSearch:"/api/fields/search",fieldsAdd:"/api/fields/add",fieldsDelete:"/api/fields/delete",fieldsEdit:"/api/fields/edit"}},r=a(129),i=a.n(r),l=a(130),c=a(113),o=a(131),s=a.n(o),d=a(88),u="http://localhost:81";u="https://efficacious-tiny-infinity.glitch.me",s.a.defaults.baseURL=u,s.a.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"","get"===e.method?e.params=Object(c.a)({},e.data):e.data=Object(c.a)({},e.data),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return 200===e.data.code?e.data:400===e.data.code?(d.b.warning(e.data.message),e.data):Promise.reject(e)}));var m=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={light:{templateSearch:function(e){return m({url:n.light.templateSearch,data:e,method:"post"})},templateAdd:function(e){return m({url:n.light.templateAdd,data:e,method:"post"})},templateDelete:function(e){return m({url:n.light.templateDelete,data:e,method:"post"})},templateEdit:function(e){return m({url:n.light.templateEdit,data:e,method:"post"})},easyTemplateSearch:function(e){return m({url:n.light.easyTemplateSearch,data:e,method:"post"})},easyTemplateAdd:function(e){return m({url:n.light.easyTemplateAdd,data:e,method:"post"})},easyTemplateDelete:function(e){return m({url:n.light.easyTemplateDelete,data:e,method:"post"})},easyTemplateEdit:function(e){return m({url:n.light.easyTemplateEdit,data:e,method:"post"})},routerSearch:function(e){return m({url:n.light.routerSearch,data:e,method:"post"})},routerAdd:function(e){return m({url:n.light.routerAdd,data:e,method:"post"})},routerDelete:function(e){return m({url:n.light.routerDelete,data:e,method:"post"})},routerEdit:function(e){return m({url:n.light.routerEdit,data:e,method:"post"})},tableSearch:function(e){return m({url:n.light.tableSearch,data:e,method:"post"})},tableAdd:function(e){return m({url:n.light.tableAdd,data:e,method:"post"})},tableDelete:function(e){return m({url:n.light.tableDelete,data:e,method:"post"})},tableEdit:function(e){return m({url:n.light.tableEdit,data:e,method:"post"})},fieldsSearch:function(e){return m({url:n.light.fieldsSearch,data:e,method:"post"})},fieldsAdd:function(e){return m({url:n.light.fieldsAdd,data:e,method:"post"})},fieldsDelete:function(e){return m({url:n.light.fieldsDelete,data:e,method:"post"})},fieldsEdit:function(e){return m({url:n.light.fieldsEdit,data:e,method:"post"})}}};t.a=h},121:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));a(66);var n=a(311),r=a(144),i=a.n(r),l=a(14),c=function(e){return function(e){var t={},a=e.split("?");if(a.length<=1)return t;for(var n=0,r=(a=a[1].split("&")).length;n<r;n++){var i=a[n].split("=");t[i[0]]=i[1]}return t}(e.location.search)},o=function(){return[{id:0,title:"\u8f93\u5165\u6846(Input)",formComponentName:"Input",component:Object(l.jsx)(n.a,{})}]},s=function(){return[{id:0,title:"span\u6807\u7b7e",renderFunName:"renderSpan",formComponentNameArr:["Input"],render:function(e){return Object(l.jsx)("span",{children:e})}},{id:1,title:"\u65e5\u671f",renderFunName:"renderDatetime",formComponentNameArr:[],render:function(e){return Object(l.jsx)("span",{children:e?i()(e).format("YYYY-MM-DD HH:mm:ss"):""})}}]}},314:function(e,t,a){"use strict";a.r(t);var n=a(113),r=a(0),i=a(62),l=a(6),c=a(312),o=a(309),s=a(127),d=a(114),u=a(14);var m=function(e){var t=e.onAdd;return Object(u.jsx)("div",{className:"m-content-tool",children:Object(u.jsx)("div",{className:"m-content-tool-row",children:Object(u.jsxs)(s.a,{className:"m-space",type:"primary",onClick:t,children:[Object(u.jsx)(d.b,{name:"add",className:"m-tool-btn-icon"}),"\u6dfb\u52a0\u5b57\u6bb5"]})})})},h=a(193),p=a(311),f=a(195),b=a(310),j=a(121),O=h.a.Option,g=function(e){return[{title:"ID",dataIndex:"id"},{title:"\u5b57\u6bb5\u540d\u79f0",dataIndex:"title"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"dataIndex"},{title:"\u8868\u5355\u7ec4\u4ef6\u540d",dataIndex:"formComponentName",render:function(e){return e||"\u65e0"}},{title:"\u6e32\u67d3\u51fd\u6570\u540d",dataIndex:"renderFunName",render:function(e){return e||"\u65e0"}},{title:"\u5b57\u6bb5\u5fc5\u586b",dataIndex:"rules",render:function(e){var t=Array.isArray(e)&&e.length>0&&e[0];return t&&t.required?"\u662f":"\u5426"}},{title:"\u8868\u683c\u5c55\u793a",dataIndex:"isColumn",render:function(e){return e?"\u662f":"\u5426"}},{title:"\u6dfb\u52a0/\u7f16\u8f91",dataIndex:"isModalField",render:function(e){return e?"\u662f":"\u5426"}},{title:"\u987a\u5e8f\u53f7",dataIndex:"orderIndex",render:function(e){return"number"===typeof e?e:"\u65e0"}},{title:"\u64cd\u4f5c",width:220,render:function(t){return t.isSystem?"\u7cfb\u7edf\u5b57\u6bb5":Object(u.jsxs)("div",{className:"m-action",children:[Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",danger:!0,onClick:function(){return e.onDelete(t)},children:"\u5220\u9664"}),Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onCheck(t)},children:"\u67e5\u770b"}),Object(u.jsx)(s.a,{className:"m-action-btn",size:"small",onClick:function(){return e.onEdit(t)},children:"\u7f16\u8f91"})]})}}]},x=function(e){var t=e.dataSource,a=e.type,n=e.initValues,r=e.formComponentName;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.a.Item,{label:"\u5b57\u6bb5\u540d\u79f0",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"},{validator:function(e,r){return"edit"===a&&r===n.title?Promise.resolve():t.find((function(e){return e.title===r}))?Promise.reject(new Error("\u5b57\u6bb5\u540d\u79f0\u5df2\u5b58\u5728!")):Promise.resolve()}}],children:Object(u.jsx)(p.a,{})}),Object(u.jsx)(o.a.Item,{label:"\u82f1\u6587\u540d\u79f0",name:"dataIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b57\u6bb5\u540d\u79f0\uff01"},{validator:function(e,r){return"edit"===a&&r===n.dataIndex?Promise.resolve():t.find((function(e){return e.dataIndex===r}))?Promise.reject(new Error("\u82f1\u6587\u5b57\u6bb5\u540d\u79f0\u5df2\u5b58\u5728!")):Promise.resolve()}}],children:Object(u.jsx)(p.a,{})}),Object(u.jsx)(o.a.Item,{label:"\u8868\u5355\u7ec4\u4ef6",name:"formComponentName",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8868\u5355\u7ec4\u4ef6\uff01"}],children:Object(u.jsx)(h.a,{placeholder:"\u8bf7\u9009\u62e9",getPopupContainer:function(){return document.getElementById("m-set-application-modal-form")},children:Object(j.a)().map((function(e){return Object(u.jsx)(O,{value:e.formComponentName,children:e.title},e.id)}))})}),Object(u.jsx)(o.a.Item,{label:"\u6e32\u67d3\u51fd\u6570\u540d",name:"renderFunName",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8868\u6e32\u67d3\u51fd\u6570\u540d\uff01"}],children:Object(u.jsx)(h.a,{placeholder:"\u8bf7\u9009\u62e9",getPopupContainer:function(){return document.getElementById("m-set-application-modal-form")},children:Object(j.b)().filter((function(e){return e.formComponentNameArr.includes(r)})).map((function(e){return Object(u.jsx)(O,{value:e.renderFunName,children:e.title},e.id)}))})}),Object(u.jsx)(o.a.Item,{label:"\u5b57\u6bb5\u5fc5\u586b",name:"rules",children:Object(u.jsx)(d.a,{})}),Object(u.jsx)(o.a.Item,{label:"\u8868\u683c\u5c55\u793a",name:"isColumn",valuePropName:"checked",children:Object(u.jsx)(f.a,{children:"\u5c55\u793a"})}),Object(u.jsx)(o.a.Item,{label:"\u6dfb\u52a0/\u7f16\u8f91",name:"isModalField",valuePropName:"checked",children:Object(u.jsx)(f.a,{children:"\u5c55\u793a"})}),Object(u.jsx)(o.a.Item,{label:"\u987a\u5e8f\u53f7",name:"orderIndex",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u987a\u5e8f\u53f7\uff01"}],children:Object(u.jsx)(b.a,{min:1,max:100})})]})};var S=Object(l.g)((function(e){var t=e.applicationTitle;return Object(u.jsxs)("div",{className:"m-set-application-header",children:[Object(u.jsx)(d.b,{name:"arrow",className:"m-set-application-header-icon",onClick:function(){return e.history.go(-1)}}),t]})})),v=a(119),y=a(117),C=c.a.confirm;t.default=Object(i.b)((function(e){return{}}),(function(e){return{onSetState:function(t,a){e({type:"SET_LIGHT_STATE",key:t,value:a})},onDispatch:function(t){e(t)}}}))(Object(l.g)((function(e){var t=function(e){var t=Object(r.useState)([]),a=Object(v.a)(t,2),i=a[0],l=a[1],c=o.a.useForm(),s=Object(v.a)(c,1)[0],d=Object(r.useState)(!1),u=Object(v.a)(d,2),m=u[0],h=u[1],p=Object(r.useState)({}),f=Object(v.a)(p,2),b=f[0],O=f[1],g=Object(r.useState)("add"),x=Object(v.a)(g,2),S=x[0],N=x[1],I=Object(r.useState)(),A=Object(v.a)(I,2),T=A[0],E=A[1],k=Object(r.useState)(),D=Object(v.a)(k,2),F=D[0],w=D[1],q=Object(r.useState)(),P=Object(v.a)(q,2),V=P[0],z=P[1],M=Object(j.c)(e).id-0,R={},Y=function(){y.a.light.fieldsSearch({tableId:M}).then((function(e){200===e.code&&(l(e.data.fields),E(e.data.title))}))};return Object(r.useEffect)((function(){Y()}),[]),Object(r.useEffect)((function(){s.resetFields()}),[m,s]),{dataSource:i,isModalVisible:m,initValues:b,type:S,form:s,applicationTitle:T,modalTitle:F,formComponentName:V,handleSearch:Y,handleDelete:function(e){console.log("\u5220\u9664, id:",e.id),C({title:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",onOk:function(){y.a.light.fieldsDelete({tableId:M,ids:[e.id]}).then((function(e){200===e.code&&Y()}))}})},handleAdd:function(){N("add"),O(R),console.log(R),w("\u6dfb\u52a0\u5b57\u6bb5"),h(!0)},handleEdit:function(e){console.log("\u7f16\u8f91, id:",e),N("edit"),e.rules=Array.isArray(e.rules)?e.rules[0]:{},O(Object(n.a)(Object(n.a)({},b),e)),w("\u7f16\u8f91\u5b57\u6bb5"),h(!0)},handleCheck:function(e){N("check"),O(Object(n.a)(Object(n.a)({},b),e)),w("\u67e5\u770b\u5b57\u6bb5"),h(!0)},setIsModalVisible:h,handleFinish:function(e){console.log("Success:",e),e.rules=Array.isArray(e.rules)?e.rules:[e.rules],"add"===S?y.a.light.fieldsAdd({tableId:M,dataItem:e}).then((function(e){200===e.code&&(h(!1),Y())})):"edit"===S&&(e.rules=Array.isArray(e.rules)?e.rules:[e.rules],y.a.light.fieldsEdit({tableId:M,id:b.id,dataItem:Object(n.a)(Object(n.a)({},b),e)}).then((function(e){200===e.code&&(h(!1),Y())})))},handleFinishFailed:function(e){console.log("Failed:",e)},handleValuesChange:function(e,t){console.log(e,t),z(t.formComponentName)}}}(e),a=t.dataSource,i=t.isModalVisible,l=t.initValues,h=t.type,p=t.form,f=t.applicationTitle,b=t.modalTitle,O=t.formComponentName,N=t.handleSearch,I=t.handleDelete,A=t.handleAdd,T=t.handleEdit,E=t.handleCheck,k=t.setIsModalVisible,D=t.handleFinish,F=t.handleFinishFailed,w=t.handleValuesChange;return Object(u.jsxs)("div",{className:"m-admin-content",children:[Object(u.jsx)(S,{applicationTitle:f}),Object(u.jsx)(m,{onAdd:A}),Object(u.jsx)(d.d,{dataSource:a,onSearch:N,onDelete:I,onEdit:T,onCheck:E,getColumns:g}),Object(u.jsx)(c.a,{title:b,visible:i,onCancel:function(){return k(!1)},footer:null,width:900,className:"m-set-application-modal",forceRender:!0,children:Object(u.jsxs)(o.a,{form:p,labelCol:{span:4},wrapperCol:{span:17},initialValues:Object(n.a)({},l),scrollToFirstError:!0,onFinish:D,onFinishFailed:F,onValuesChange:w,id:"m-set-application-modal-form",className:"m-set-application-modal-form",children:[x({dataSource:a,type:h,initValues:l,formComponentName:O}),Object(u.jsxs)(o.a.Item,{wrapperCol:{offset:4,span:17},className:"m-modal-footer",children:[("add"===h||"edit"===h)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(s.a,{type:"primary",htmlType:"submit",className:"m-space",children:[Object(u.jsx)(d.b,{name:"submit",className:"m-tool-btn-icon"}),"\u63d0\u4ea4"]}),Object(u.jsxs)(s.a,{className:"m-space",onClick:function(){p.resetFields()},children:[Object(u.jsx)(d.b,{name:"reset",className:"m-tool-btn-icon"}),"\u91cd\u7f6e"]})]}),Object(u.jsx)(s.a,{className:"m-space",onClick:function(){return k(!1)},children:"\u53d6\u6d88"})]})]})})]})})))}}]);
//# sourceMappingURL=10.2609827d.chunk.js.map